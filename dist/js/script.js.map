{"version":3,"sources":["global.js","animate.js","template.js","header.js","menu.js","fsscroll.js","screens.js","screens2.js","scrollsmooth.js","toggle.js","flex-image.js","cover-image.js","lazy-load.js","video.js","popup.js","validate.js","checkbox.js","radio.js","select.js","slider.js","autocomplete.js","file.js","placeholder.js","maskinput.js","fieldset.js","number.js","form.js","accord.js","ajax.js","more.js","tab.js","alert.js","tooltip.js","anchor.js","diagram.js","numberspin.js","share.js","timer.js","getcontentajax.js","animation.js","frames-animate.js","webgl.js","mouseparallax.js","scrollbox.js","floatslider.js","zoom.js","cursor.js","spa.js","drag-n-drop.js"],"names":["browser","elemIsHidden","ajax","LocStor","document","documentElement","setAttribute","navigator","userAgent","toLowerCase","test","CustomEvent","e","window","event","params","evt","createEvent","bubbles","cancelable","detail","undefined","initCustomEvent","prototype","Object","create","Event","winResizedEvent","winWidthResizedEvent","rsz","beginWidth","innerWidth","addEventListener","setTimeout","dispatchEvent","Element","closest","ElProto","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","selector","parentElement","elem","exclude","compStyle","getComputedStyle","display","visibility","indexOf","opacity","options","xhr","XMLHttpRequest","method","open","url","send","setRequestHeader","onreadystatechange","readyState","status","success","response","error","set","prop","val","localStorage","setItem","get","getItem","animate","draw","duration","ease","complete","start","performance","now","requestAnimationFrame","anim","time","timeFraction","easing","quad","Math","pow","template","data","sign","s","tplEl","getElementById","innerHTML","result","replace","RegExp","match","p1","p2","p3","offset","input","map","item","res","key","hasOwnProperty","join","m","Array","isArray","length","MobNav","headerElem","scrTop","scrAccUp","scrAccDown","fixHeader","pageYOffset","classList","add","remove","body","contains","winScrollTop","fixBody","st","style","top","scrollTo","btnElem","headerId","close","openBtnElements","querySelectorAll","openBtn","i","init","openElem","target","preventDefault","closeBtn","closeLink","Menu","toggle","elementStr","subMenuStr","subMenuElem","querySelector","height","mainElem","itemElements","subMenuElements","scrollHeight","viewport","getAttribute","FsScroll","contElem","scrolling","delta","current","midWinScrollTop","innerHeight","screenElements","screen","screenOffsetTop","getBoundingClientRect","offsetHeight","scroll","progress","mouseScroll","currentScreenElem","winScrollBottom","nextScreenElem","nextElementSibling","currentScreenOffsetTop","nextScreenOffsetTop","previousElementSibling","container","deltaY","Screens","wrapHeight","wrapEl","screenElems","screenProps","curScreenInd","screenChanging","lastEvenSrc","onChange","opt","screenHadChanged","scrollHandler","goToScreen","ind","scrollInner","scrEl","inScrollEl","sP","bottomEdge","topEdge","toFixed","scrBot","forEach","setProps","heightSum","sEl","screenVirtHeight","scrollTop","divider","horizontal","contEl","Screens2","scrollSum","menu","menuElements","curMenuItElem","id","curClass","menuCurrentClass","mEl","changeScreen","location","hash","split","nextScreen","setHeight","actScreenElem","scEl","_this","$","swipe","allowPageScroll","direction","distance","fingerCount","fingerData","dS","absDelta","abs","chngSecBtn","screenElem","ScrollSmooth","startPageYOffset","console","log","Toggle","toggledClass","targetsToggledClass","onChangeSubscribers","btnEl","state","targetElements","selArr","toggleElem","off","hasAttribute","dependenceTargetElements","el","toggleOff","targetEls","toggleBtnEls","onDocClickOff","targetBtnEl","toggleElements","targetSelectors","fun","push","button","offBtnEl","offButton","FlexImg","elementsStr","load","images","image","imageProp","src","elements","CoverImg","cover","img","currentTarget","imgWrap","imgProportion","offsetWidth","imgWrapProportion","Infinity","reInit","parentElementStr","Date","getTime","LazyLoad","doLoad","sel","elems","backgroundImage","Video","play","vSrc","parEl","vidFrameWrapEl","autoplay","iFrame","createElement","vId","allow","allowFullscreen","appendChild","videoEl","controls","stop","frameBlockEls","Popup","MediaPopup","onClose","_onclose","onOpenSubscribers","headerSelector","delay","closeBtnElem","callback","winEl","elemParent","onOpen","message","msg","winSel","evInit","openedWinEl","visWinElems","samePop","clientWidth","transition","right","args","elemPopup","popupStr","elemImg","href","video","prevEl","btnPlayEl","preview","next","group","index","slice","call","btnSel","type","caption","ValidateForm","formSelector","errorTip","err","errInd","errorTxt","field","tipEl","removeAttribute","customErrorTip","isLockForm","validate","formError","formElem","errTxt","errTipElem","customFormErrorTip","txt","value","num","cardNumber","name","date","errDate","compDate","curDate","interval","valueOf","getFullYear","getMonth","getDate","Number","email","tel","pass","minLng","checkbox","checkedElements","checked","radio","checkedElement","select","file","filesArr","errCount","ext","size","maxFiles","extRegExp","maxSize","fileItemElements","validateOnInput","dataType","checkElems","selectElements","selectElem","chboxEls","chboxGrEls","chboxInGrEls","radGrEls","radInGrEls","fileEls","CustomFile","inputFiles","pwdCompEls","compElemVal","removeEventListener","inpH","chH","bind","Checkbox","hideCssClass","focusOnTarget","change","changeHandler","onInit","targetElem","inpEls","j","inpEl","focus","ChangeRadio","checkedElem","hideElems","hideEl","Select","onSelectSubscribers","focusBlurIsDisabled","reset","parentElem","parElem","fieldElements","buttonElements","inputElements","valueElements","children","blur","disabled","closeAll","optionsElements","listItemElements","fieldEl","optionsElem","selectMultipleVal","toButtonValue","toInputValue","inputsBlock","yetInput","targetAction","valEls","vEl","showEls","txtInpEl","hideEls","hEl","selectVal","valElem","Placeholder","hide","Form","submitForm","varHeightTextarea","onSelect","setOptions","fieldSelector","optObj","nameKey","valKey","secValKey","li","secValAttr","keyboard","hoverItem","nextItem","firstElementChild","lastElementChild","build","parent","optionsList","selectedOption","require","placeholder","submitOnChange","head","multiple","class","inpDiv","hiddenInp","customElem","className","insertBefore","firstChild","removeChild","clickHandler","focusHandler","blurHandler","keydownHandler","clearTimeout","inpElem","which","keyCode","FormSlider","mM","mU","dragElemObj","formsliderObj","track","edge","valUnit","dragElemLeft","dragEndSubscribers","formaters","sliders","sliderEl","isRange","dragElem","setInitState","mouseDown","slider","dragElems","trackEl","dragWidth","sliderW","min","max","dragEl","inpVal","left","mouseMove","mouseUp","clientX","targetTouches","X","shiftX","width","formslider","oneValPerc","siblElem","L","R","setInputVal","onDragEnd","round","formatId","format","AutoComplete","fieldElem","inputElem","setValues","optH","optionsHeight","searchValue","permOpened","values","preReg","valuesData","valData","getAllValuesIfEmpty","itemElem","ev","valueElem","keybinding","acElems","acEl","arrElem","filesObj","filesArrayObj","filesIsReady","changeInput","delBtnElem","clearBtnElem","setFilesObj","filesDeleted","clear","resetVal","labelText","fieldClass","lockUpload","labTxtElem","loadPreview","fileItem","reader","FileReader","previewDiv","onload","imgDiv","readAsDataURL","fileItems","files","filesList","objKey","getFiles","inputFileElements","elemFor","label","htmlFor","iH","fH","bH","Maskinput","inputSel","defValue","reg","cursPos","selectionStart","str","p4","gmail","number","maxLength","float","cyr","NextFieldset","fwd","currentFieldset","nextFieldset","nextPending","nextEl","goTo","focusInput","nextBtnSelector","prevBtnSelector","fsEls","fsItemEls","itEl","fEl","nextBtnElem","prevBtnElem","inputEl","action","inputHandler","DuplicateForm","mirror","mirrorOutput","onSubmitSubscribers","sH","kH","code","click","ctrlKey","initScripst","errFieldEl","submit","fReturn","obj","actSubmitBtn","unlockSubmitButton","clearForm","onSubmit","inpFileEls","textareaMirrors","BindLabels","forID","modelElem","destElem","duplicatedDiv","dupicatedElements","dupicatedElem","labelElements","duplElem","addBtnSelector","removeBtnSelector","addBtnElem","removeBtnElem","Accord","autoScroll","initialized","contentElem","allButtonElem","allContentElem","position","Ajax","More","btnTxt","Tab","btnElements","tabItemElements","tabItemElem","contElements","tabItemElemActive","changeOnHover","Alert","alertIndex","alertId","showOnce","hiddenAlert","alertElem","addClass","setContent","content","hidePermanently","ToolTip","tooltipDiv","tooltipClass","canBeHidden","onShow","notHide","evClick","mouseOver","element","show","mouseClick","ontouchstart","html","Y","bubleStyle","elemRect","winW","coordX","coordY","marginLeft","marginRight","bottom","marginTop","mouseOut","Anchor","shift","anchorId","anchorSectionElem","ownShift","anchId","Diagram","canvasElement","canvasId","chartValues","charts","ctx","clearRect","center","x","y","prevChartsWidth","chart","drawChart","getContext","canvasWidth","startAngle","PI","endAngle","maxValue","radius","beginPath","arc","lineWidth","strokeStyle","color","stroke","outputNum","numElem","numContId","Numberspin","elemSel","numStr","String","Share","network","net","encodedHref","encodeURIComponent","encodedImageUrl","title","popup","Timer","numToWord","wordsArr","continue","elemId","tickSubscribers","setCookie","cookie","toUTCString","onTick","clearInterval","onStop","pause","output","day","floor","hour","sec","timerOut","minTxt","secTxt","minOut","secNum","minNum","startTime","lastTimestampValue","matchArr","stopwatch","setInterval","GetContentAjax","eventBtn","getContent","eventBtnElem","outputDivElem","outputDiv","sourceFile","animationOnVisible","animElements","winBotEdge","animElem","animElemOffsetTop","animElemOffsetBot","animElems","FramesAnimate","count","path","fps","backward","infinite","loadedImages","animated","onLoad","loaded","W","H","imgDims","viewportDims","contElWidth","contElHeight","imgEl","Image","loadedImg","dir","back","sx","drawImage","WEBGL","VSTxt","FSTxt","loadTxtRes","successFun","Mouseparallax","elSel","_","defaultOpt","listener","deltaX","rangeX","rangeY","extend","startMousePos","listenerW","listenerH","cursorPos","direct","each","$el","translateElement","startElementPos","attr","on","clientY","deltaMouse","startMousePosX","startMousePosY","translateX","translateY","css","Scrollbox","scrBoxEl","fullSizeStep","nestedScrollbox","parentScrollbox","childrenScrollbox","evListenerEl","bar","barSize","innerEl","winSize","nestedSbEls","parentEl","barSlEl","barSlElSize","scrolled","isScrolling","isBreak","ts","innerSize","endBreak","innerW","scrollWidth","scrollBar","innerH","winH","nEl","actionEls","actEl","points","actionProp","actionRange","reverse","end","startFrom","endTo","pts","rng","startAction","endAction","actionFrom","actionTo","scrollAnim","scrTo","progr","wheelHandler","atr","step","dur","nestedScrollboxObj","destroy","transform","aftScroll","pos","moveTo","barW","barH","onScroll","afterScroll","barEl","mouseStart","mouseDelta","barSlStart","limit","FlSlider","animation","isLine","t","first","last","removeClass","dots","append","dotC","hasClass","activeDot","find","line","Curr","Next","Prev","ToNext","ToPrev","prev","ready","triggerOnTouchEnd","excludedElements","threshold","Zoom","contSel","contPos","X2","Y2","zoomEl","zoomInnerEl","mOver","mMove","pageXOffset","move","pageX","pageY","sX","sY","Cursor","elObj","cursorEl","mOut","cursWrap","it","cursCl","SPA","routeSubscribers","route","changeTemplate","cb","tplSign","DragAndDrop","parentDropElem","curentDropElem","maskDiv","lastInsertPos","onDragSubscribers","mD","setInd","dropEls","dropEl","dragEls","shiftY","after","moveX","moveY","prepend","siblingDragEl","siblingDragElCenter","before","replaceWith","onDragged"],"mappings":"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","file":"script.js","sourcesContent":["// global variables\r\n; var browser, elemIsHidden, ajax, LocStor;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    // Get useragent\r\n    document.documentElement.setAttribute('data-useragent', navigator.userAgent.toLowerCase());\r\n\r\n    // Browser identify\r\n    browser = (function (userAgent) {\r\n        userAgent = userAgent.toLowerCase();\r\n\r\n        if (/(msie|rv:11\\.0)/.test(userAgent)) {\r\n            return 'ie';\r\n        } else if (/firefox/.test(userAgent)) {\r\n            return 'ff';\r\n        }\r\n    })(navigator.userAgent);\r\n\r\n    // Add support CustomEvent constructor for IE\r\n    try {\r\n        new CustomEvent(\"IE has CustomEvent, but doesn't support constructor\");\r\n    } catch (e) {\r\n        window.CustomEvent = function (event, params) {\r\n            var evt = document.createEvent(\"CustomEvent\");\r\n\r\n            params = params || {\r\n                bubbles: false,\r\n                cancelable: false,\r\n                detail: undefined\r\n            };\r\n\r\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n\r\n            return evt;\r\n        }\r\n\r\n        CustomEvent.prototype = Object.create(window.Event.prototype);\r\n    }\r\n\r\n    // Window Resized Event\r\n    const winResizedEvent = new CustomEvent('winResized'),\r\n        winWidthResizedEvent = new CustomEvent('winWidthResized');\r\n\r\n    let rsz = true,\r\n        beginWidth = window.innerWidth;\r\n\r\n    window.addEventListener('resize', function () {\r\n        if (rsz) {\r\n            rsz = false;\r\n\r\n            setTimeout(function () {\r\n                window.dispatchEvent(winResizedEvent);\r\n\r\n                if (beginWidth != window.innerWidth) {\r\n                    window.dispatchEvent(winWidthResizedEvent);\r\n\r\n                    beginWidth = window.innerWidth\r\n                }\r\n\r\n                rsz = true;\r\n            }, 1021);\r\n        }\r\n    });\r\n\r\n    // Closest polyfill\r\n    if (!Element.prototype.closest) {\r\n        (function (ElProto) {\r\n            ElProto.matches = ElProto.matches || ElProto.mozMatchesSelector || ElProto.msMatchesSelector || ElProto.oMatchesSelector || ElProto.webkitMatchesSelector;\r\n\r\n            ElProto.closest = ElProto.closest || function closest(selector) {\r\n                if (!this) {\r\n                    return null;\r\n                }\r\n\r\n                if (this.matches(selector)) {\r\n                    return this;\r\n                }\r\n\r\n                if (!this.parentElement) {\r\n                    return null;\r\n                } else {\r\n                    return this.parentElement.closest(selector);\r\n                }\r\n            };\r\n        })(Element.prototype);\r\n    }\r\n\r\n    // Check element for hidden\r\n    elemIsHidden = function (elem, exclude) {\r\n        exclude = exclude || [];\r\n\r\n        while (elem) {\r\n            if (!elem) break;\r\n\r\n            const compStyle = getComputedStyle(elem);\r\n\r\n            if (\r\n                compStyle.display == 'none' ||\r\n                compStyle.visibility == 'hidden' ||\r\n                (exclude.indexOf('opacity') == -1 && compStyle.opacity == '0')\r\n            ) return true;\r\n\r\n            elem = elem.parentElement;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // Ajax\r\n    ajax = function (options) {\r\n        const xhr = new XMLHttpRequest();\r\n\r\n        if (options.method == 'GET') {\r\n            xhr.open('GET', options.url);\r\n\r\n            options.send = null;\r\n        } else {\r\n            xhr.open('POST', options.url);\r\n\r\n            if (typeof options.send == 'string') {\r\n                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n            }\r\n        }\r\n\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                if (options.success) {\r\n                    options.success(xhr.response);\r\n                }\r\n            } else if (xhr.readyState == 4 && xhr.status != 200) {\r\n                if (options.error) {\r\n                    options.error(xhr.response);\r\n                }\r\n            }\r\n        }\r\n\r\n        xhr.send(options.send);\r\n    }\r\n\r\n\r\n\r\n    // Local Storage\r\n    LocStor = {\r\n        set: function (prop, val) {\r\n            window.localStorage.setItem(prop, val);\r\n        },\r\n\r\n        get: function (prop) {\r\n            const val = window.localStorage.getItem(prop);\r\n\r\n            return (val !== null) ? val : false;\r\n        }\r\n    };\r\n\r\n})();","/*\r\nanimate(function(takes 0...1) {}, Int duration in ms[, Str easing[, Fun animation complete]]);\r\n*/\r\n\r\n; var animate;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    animate = function (draw, duration, ease, complete) {\r\n        const start = performance.now();\r\n\r\n        requestAnimationFrame(function anim(time) {\r\n            let timeFraction = (time - start) / duration;\r\n\r\n            if (timeFraction > 1) {\r\n                timeFraction = 1;\r\n            }\r\n\r\n            draw((ease) ? easing(timeFraction, ease) : timeFraction);\r\n\r\n            if (timeFraction < 1) {\r\n                requestAnimationFrame(anim);\r\n            } else {\r\n                if (complete !== undefined) {\r\n                    complete();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function easing(timeFraction, ease) {\r\n        switch (ease) {\r\n            case 'easeInQuad':\r\n                return quad(timeFraction);\r\n\r\n            case 'easeOutQuad':\r\n                return 1 - quad(1 - timeFraction);\r\n\r\n            case 'easeInOutQuad':\r\n                if (timeFraction <= 0.5) {\r\n                    return quad(2 * timeFraction) / 2;\r\n                } else {\r\n                    return (2 - quad(2 * (1 - timeFraction))) / 2;\r\n                }\r\n        }\r\n    }\r\n\r\n    function quad(timeFraction) {\r\n        return Math.pow(timeFraction, 2)\r\n    }\r\n})();","; var template;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    template = function (data, template, sign) {\r\n        const s = sign || '%',\r\n            tplEl = document.getElementById(template);\r\n\r\n        if (tplEl) {\r\n            template = tplEl.innerHTML;\r\n        }\r\n\r\n        let result = template;\r\n\r\n        result = result.replace(new RegExp('<' + s + 'for (\\\\w+) as (\\\\w+)' + s + '>(.*?)<' + s + 'endfor' + s + '>', 'gs'), function (match, p1, p2, p3, offset, input) {\r\n\r\n            if (!data[p1]) return '';\r\n\r\n            return data[p1].map(function (item) {\r\n                let res = p3;\r\n\r\n                if (typeof item === 'object') {\r\n                    for (const key in item) {\r\n                        if (item.hasOwnProperty(key)) {\r\n                            res = res.replace(new RegExp('<' + s + p2 + '.' + key + s + '>', 'g'), item[key]);\r\n                        }\r\n                    }\r\n                } else {\r\n                    res = res.replace(new RegExp('<' + s + p2 + s + '>', 'g'), item);\r\n                }\r\n\r\n                return res;\r\n            }).join('');\r\n        });\r\n\r\n        result = result.replace(new RegExp('<' + s + 'if (\\\\w+)' + s + '>(.*?)<' + s + 'endif' + s + '>', 'gs'), function (match, p1, p2, offset, input) {\r\n            const m = data[p1];\r\n\r\n            if (\r\n                m === '' || m === false || m == undefined || m == null ||\r\n                (Array.isArray(m) && !m.length)\r\n            ) {\r\n                return '';\r\n            } else {\r\n                return p2;\r\n            }\r\n        });\r\n\r\n        result = result.replace(new RegExp('<' + s + '{2}if (\\\\w+)' + s + '>(.*?)<' + s + '{2}endif' + s + '>', 'gs'), function (match, p1, p2, offset, input) {\r\n            const m = data[p1];\r\n\r\n            if (\r\n                m === '' || m === false || m == undefined || m == null ||\r\n                (Array.isArray(m) && !m.length)\r\n            ) {\r\n                return '';\r\n            } else {\r\n                return p2;\r\n            }\r\n        });\r\n\r\n        for (const key in data) {\r\n            if (data.hasOwnProperty(key)) {\r\n                result = result.replace(new RegExp('<' + s + key + s + '>', 'g'), data[key]);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n})();","/* \r\n    MobNav.init({\r\n        openBtn: '.js-open-menu',\r\n        closeBtn: '.js-close-menu',\r\n        headerId: 'header',\r\n        closeLink: '.menu a.js-anchor'\r\n    });\r\n*/\r\n\r\n; var MobNav;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    // fix header\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n        const headerElem = document.getElementById('header');\r\n\r\n        let scrTop = 0,\r\n            scrAccUp = 0,\r\n            scrAccDown = 0;\r\n\r\n        function fixHeader() {\r\n            if (headerElem) {\r\n                if (window.pageYOffset > 21) {\r\n                    headerElem.classList.add('header_fixed');\r\n\r\n                    if (window.pageYOffset > scrTop) {\r\n                        scrAccDown++;\r\n                        scrAccUp = 0;\r\n                    } else {\r\n                        scrAccUp++;\r\n                        scrAccDown = 0;\r\n                    }\r\n\r\n                    scrTop = window.pageYOffset;\r\n\r\n                    if (scrAccDown > 3) {\r\n                        headerElem.classList.add('header_hide');\r\n                    } else if (scrAccUp > 1) {\r\n                        headerElem.classList.remove('header_hide');\r\n                    }\r\n\r\n                } else if (\r\n                    !document.body.classList.contains('popup-is-opened') &&\r\n                    !document.body.classList.contains('mob-nav-is-opened')\r\n                ) {\r\n                    headerElem.classList.remove('header_fixed');\r\n                    headerElem.classList.remove('header_hide');\r\n                }\r\n            }\r\n        }\r\n\r\n        fixHeader();\r\n\r\n        window.addEventListener('scroll', fixHeader);\r\n    });\r\n\r\n    //mob menu\r\n    MobNav = {\r\n        options: null,\r\n        winScrollTop: 0,\r\n\r\n        fixBody: function (st) {\r\n            if (st) {\r\n                this.winScrollTop = window.pageYOffset;\r\n\r\n                document.body.classList.add('mob-nav-is-opened');\r\n                document.body.style.top = -this.winScrollTop + 'px';\r\n            } else {\r\n                document.body.classList.remove('mob-nav-is-opened');\r\n\r\n                if (this.winScrollTop > 0) {\r\n                    window.scrollTo(0, this.winScrollTop);\r\n                }\r\n            }\r\n        },\r\n\r\n        open: function (btnElem) {\r\n            var headerElem = document.getElementById(this.options.headerId);\r\n\r\n            if (!headerElem) return;\r\n\r\n            if (btnElem.classList.contains('opened')) {\r\n                this.close();\r\n            } else {\r\n                btnElem.classList.add('opened');\r\n                headerElem.classList.add('opened');\r\n                this.fixBody(true);\r\n            }\r\n        },\r\n\r\n        close: function () {\r\n            var headerElem = document.getElementById(this.options.headerId);\r\n\r\n            if (!headerElem) return;\r\n\r\n            headerElem.classList.remove('opened');\r\n\r\n            var openBtnElements = document.querySelectorAll(this.options.openBtn);\r\n\r\n            for (var i = 0; i < openBtnElements.length; i++) {\r\n                openBtnElements[i].classList.remove('opened');\r\n            }\r\n\r\n            this.fixBody(false);\r\n        },\r\n\r\n        init: function (options) {\r\n            this.options = options;\r\n\r\n            document.addEventListener('click', (e) => {\r\n                const openElem = e.target.closest(options.openBtn);\r\n\r\n                if (openElem) {\r\n                    e.preventDefault();\r\n                    this.open(openElem);\r\n                } else if (e.target.closest(options.closeBtn)) {\r\n                    e.preventDefault();\r\n                    this.close();\r\n                } else if (e.target.closest(options.closeLink)) {\r\n                    this.close();\r\n                }\r\n            });\r\n        }\r\n    };\r\n})();","/*\r\n* call Menu.init(Str menu item selector, Str sub menu selector);\r\n*/\r\nvar Menu;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Menu = {\r\n        toggle: function (elem, elementStr, subMenuStr) {\r\n            var subMenuElem = elem.querySelector(subMenuStr);\r\n\r\n            if (!subMenuElem) {\r\n                return;\r\n            }\r\n\r\n            if (elem.classList.contains('active')) {\r\n                subMenuElem.style.height = 0;\r\n\r\n                elem.classList.remove('active');\r\n            } else {\r\n                var mainElem = elem.closest('.menu'),\r\n                    itemElements = mainElem.querySelectorAll(elementStr),\r\n                    subMenuElements = mainElem.querySelectorAll(subMenuStr);\r\n\r\n                for (var i = 0; i < itemElements.length; i++) {\r\n                    itemElements[i].classList.remove('accord__button_active');\r\n                    subMenuElements[i].style.height = 0;\r\n                }\r\n\r\n                subMenuElem.style.height = subMenuElem.scrollHeight + 'px';\r\n\r\n                elem.classList.add('active');\r\n            }\r\n        },\r\n\r\n        init: function (elementStr, subMenuStr, viewport) {\r\n            document.addEventListener('click', (e) => {\r\n                var elem = e.target.closest(elementStr);\r\n\r\n                if (!elem || window.innerWidth > viewport) return;\r\n\r\n                if (e.target.getAttribute('href') == '#') e.preventDefault();\r\n\r\n                this.toggle(elem, elementStr, subMenuStr);\r\n            });\r\n        }\r\n    };\r\n})();","/*\r\nFsScroll.init({\r\n\tcontainer: Str selector,\r\n\tscreen: Str selector,\r\n\tduration: Int milliseconds\r\n});\r\n*/\r\n\r\n; var FsScroll;\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\tFsScroll = {\r\n\t\toptions: null,\r\n\t\tcontElem: null,\r\n\t\tscrolling: false,\r\n\t\tdelta: 0,\r\n\r\n\t\tcurrent: function() {\r\n\t\t\tvar midWinScrollTop = window.pageYOffset + window.innerHeight / 2,\r\n\t\t\tscreenElements = this.contElem.querySelectorAll(this.options.screen);\r\n\r\n\t\t\tfor (var i = 0; i < screenElements.length; i++) {\r\n\t\t\t\tscreenElements[i].classList.remove('fsscroll__screen_current');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < screenElements.length; i++) {\r\n\t\t\t\tvar screenOffsetTop = screenElements[i].getBoundingClientRect().top + window.pageYOffset;\r\n\r\n\t\t\t\tif (screenOffsetTop <= midWinScrollTop && (screenOffsetTop + screenElements[i].offsetHeight) >= midWinScrollTop) {\r\n\r\n\t\t\t\t\tscreenElements[i].classList.add('fsscroll__screen_current');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscroll: function(scrollTo, scroll) {\r\n\t\t\tthis.scrolling = true;\r\n\t\t\t\r\n\t\t\tvar duration = this.options.duration || 1000,\r\n\t\t\teasing = 'easeInOutQuad';\r\n\r\n\t\t\tif (scroll) {\r\n\t\t\t\tduration = 500;\r\n\t\t\t\teasing = 'easeInOutQuad';\r\n\t\t\t}\r\n\r\n\t\t\tanimate(function(progress) {\r\n\t\t\t\twindow.scrollTo(0, ((scrollTo * progress) + ((1 - progress) * window.pageYOffset)));\r\n\t\t\t}, duration, easing, () => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.current();\r\n\r\n\t\t\t\t\tthis.scrolling = false;\r\n\t\t\t\t\tthis.delta = 0;\r\n\t\t\t\t}, 321);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tmouseScroll: function(delta) {\r\n\t\t\tvar currentScreenElem = this.contElem.querySelector('.fsscroll__screen_current'),\r\n\t\t\twinScrollBottom = window.pageYOffset + window.innerHeight;\r\n\r\n\t\t\tif (delta > 0) {\r\n\t\t\t\tvar nextScreenElem = (currentScreenElem) ? currentScreenElem.nextElementSibling : null;\r\n\r\n\t\t\t\tif (currentScreenElem && ((currentScreenElem.offsetHeight - 21) < window.innerHeight) && !currentScreenElem.classList.contains('fsscroll__screen_last')) {\r\n\t\t\t\t\tif (!this.scrolling) {\r\n\t\t\t\t\t\tvar currentScreenOffsetTop = currentScreenElem.getBoundingClientRect().top + window.pageYOffset;\r\n\r\n\t\t\t\t\t\tif ((window.pageYOffset + 21) < currentScreenOffsetTop) {\r\n\t\t\t\t\t\t\tthis.scroll(currentScreenOffsetTop);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.scroll(nextScreenElem.getBoundingClientRect().top + window.pageYOffset);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar nextScreenOffsetTop = (nextScreenElem) ? nextScreenElem.getBoundingClientRect().top + window.pageYOffset : undefined;\r\n\r\n\t\t\t\t\tif (nextScreenElem && (winScrollBottom > nextScreenOffsetTop)) {\r\n\t\t\t\t\t\tif (!this.scrolling) {\r\n\t\t\t\t\t\t\tthis.scroll(nextScreenOffsetTop);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.delta += delta / 3;\r\n\r\n\t\t\t\t\t\tthis.scroll(window.pageYOffset + this.delta, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (delta < 0) {\r\n\t\t\t\tvar nextScreenElem = (currentScreenElem) ? currentScreenElem.previousElementSibling : null;\r\n\r\n\t\t\t\tif (nextScreenElem && ((currentScreenElem.offsetHeight - 21) < window.innerHeight) && !currentScreenElem.classList.contains('fsscroll__screen_first')) {\r\n\t\t\t\t\tif (!this.scrolling) {\r\n\t\t\t\t\t\tvar currentScreenOffsetTop = currentScreenElem.getBoundingClientRect().top + window.pageYOffset;\r\n\r\n\t\t\t\t\t\tif ((winScrollBottom - 21) > (currentScreenOffsetTop + currentScreenElem.offsetHeight)) {\r\n\t\t\t\t\t\t\tthis.scroll(currentScreenOffsetTop + currentScreenElem.offsetHeight - window.innerHeight);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.scroll(nextScreenElem.getBoundingClientRect().top + window.pageYOffset + nextScreenElem.offsetHeight - window.innerHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar nextScreenOffsetTop = (nextScreenElem) ? nextScreenElem.getBoundingClientRect().top + window.pageYOffset : undefined;\r\n\r\n\t\t\t\t\tif (nextScreenElem && ((nextScreenOffsetTop + nextScreenElem.offsetHeight) > window.pageYOffset)) {\r\n\t\t\t\t\t\tif (!this.scrolling) {\r\n\t\t\t\t\t\t\tthis.scroll(nextScreenOffsetTop);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.delta += delta / 3;\r\n\t\t\t\t\t\tthis.scroll(window.pageYOffset + this.delta, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function(options) {\r\n\t\t\tvar contElem = document.querySelector(options.container);\r\n\r\n\t\t\tif (!contElem) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.options = options;\r\n\t\t\tthis.contElem = contElem;\r\n\r\n\t\t\tvar screenElements = contElem.querySelectorAll(options.screen);\r\n\r\n\t\t\tscreenElements[0].classList.add('fsscroll__screen_first');\r\n\t\t\tscreenElements[0].classList.add('fsscroll__screen_current');\r\n\t\t\tscreenElements[screenElements.length - 1].classList.add('fsscroll__screen_last');\r\n\r\n\t\t\tif ('onwheel' in document) {\r\n\t\t\t\tdocument.addEventListener('wheel', (e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tthis.mouseScroll(e.deltaY);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\tif (!this.scrolling) {\r\n\t\t\t\t\tthis.current();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","; var Screens;\r\n\r\n(function () {\r\n\t'use strict';\r\n\r\n\tScreens = {\r\n\t\twrapHeight: 0,\r\n\t\twrapEl: 0,\r\n\t\tscreenElems: null,\r\n\t\tscreenProps: null,\r\n\t\tcurScreenInd: 0,\r\n\t\tscreenChanging: false,\r\n\t\tlastEvenSrc: 'win',\r\n\t\tonChange: null,\r\n\t\topt: {},\r\n\r\n\t\tscreenHadChanged: function () {\r\n\t\t\tif (this.lastEvenSrc == 'fun') return;\r\n\r\n\t\t\tthis.lastEvenSrc = 'fun';\r\n\r\n\t\t\tthis.scrollHandler(window.pageYOffset);\r\n\r\n\t\t\tif (this.onChange) {\r\n\t\t\t\tthis.onChange();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgoToScreen: function (ind) {\r\n\t\t\tif (ind == this.curScreenInd) return;\r\n\r\n\t\t\tthis.screenChanging = true;\r\n\r\n\t\t\tthis.screenElems[this.curScreenInd].classList.remove('screen_current');\r\n\r\n\t\t\tif (ind < this.curScreenInd) {\r\n\t\t\t\tthis.screenElems[this.curScreenInd].classList.remove('screen_top');\r\n\t\t\t}\r\n\r\n\t\t\tthis.screenElems[ind].classList.add('screen_top');\r\n\t\t\tthis.screenElems[ind].classList.add('screen_current');\r\n\r\n\t\t\tthis.curScreenInd = ind;\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.screenChanging = false;\r\n\t\t\t\tthis.screenHadChanged();\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\r\n\t\tscrollInner: function (scrTop) {\r\n\t\t\tfor (let i = 0; i < this.screenElems.length; i++) {\r\n\t\t\t\tconst scrEl = this.screenElems[i];\r\n\r\n\t\t\t\tif (!scrEl.classList.contains('screen_inner-scroll')) continue;\r\n\r\n\t\t\t\tconst inScrollEl = scrEl.querySelector('.screen_inner-scroll__in'),\r\n\t\t\t\t\tsP = this.screenProps[i];\r\n\r\n\t\t\t\t// let top = sP.topEdge - scrTop;\r\n\t\t\t\tlet top = ((inScrollEl.offsetHeight - window.innerHeight) / 100) * (scrTop / ((sP.bottomEdge - sP.topEdge - window.innerHeight) / 100)) * -1;\r\n\r\n\t\t\t\tif (top > 0) {\r\n\t\t\t\t\ttop = 0;\r\n\t\t\t\t} else if (top < scrEl.offsetHeight - inScrollEl.offsetHeight) {\r\n\t\t\t\t\ttop = scrEl.offsetHeight - inScrollEl.offsetHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinScrollEl.style.top = top.toFixed(0) + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollHandler: function (scrTop) {\r\n\t\t\tconst scrBot = scrTop + window.innerHeight;\r\n\r\n\t\t\tthis.scrollInner(scrTop);\r\n\r\n\t\t\tif (this.screenChanging) return;\r\n\r\n\t\t\tthis.screenProps.forEach((sP, i) => {\r\n\t\t\t\tif (scrTop >= sP.topEdge && scrTop < sP.bottomEdge) {\r\n\t\t\t\t\tthis.goToScreen(i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (scrBot + (window.innerHeight / 3) >= sP.bottomEdge) {\r\n\t\t\t\t\tthis.screenElems[i].classList.add('screen_bottom-edge');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.screenElems[i].classList.remove('screen_bottom-edge');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\tsetProps: function () {\r\n\t\t\tif (!this.screenElems) return;\r\n\r\n\t\t\tlet heightSum = 0;\r\n\r\n\t\t\tthis.screenProps = [];\r\n\r\n\t\t\tthis.screenElems[0].classList.add('screen_top');\r\n\t\t\tthis.screenElems[0].classList.add('screen_first');\r\n\r\n\t\t\tfor (let i = 0; i < this.screenElems.length; i++) {\r\n\t\t\t\tconst sEl = this.screenElems[i];\r\n\r\n\t\t\t\tlet screenVirtHeight;\r\n\r\n\t\t\t\tsEl.style.height = window.innerHeight + 'px';\r\n\r\n\t\t\t\tif (sEl.scrollHeight > sEl.offsetHeight) {\r\n\t\t\t\t\tscreenVirtHeight = sEl.scrollHeight + sEl.scrollTop;\r\n\r\n\t\t\t\t\tsEl.classList.add('screen_inner-scroll');\r\n\r\n\t\t\t\t\tsEl.innerHTML = '<div class=\"screen_inner-scroll__in\">' + sEl.innerHTML + '</div>';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscreenVirtHeight = (window.innerWidth > 1200) ? 121 : sEl.scrollHeight + sEl.scrollTop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (i == 1) {\r\n\t\t\t\t\tscreenVirtHeight = screenVirtHeight * 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\theightSum += screenVirtHeight;\r\n\r\n\t\t\t\tthis.screenProps[i] = {\r\n\t\t\t\t\ttopEdge: (!i) ? 0 : this.screenProps[i - 1].bottomEdge + 1,\r\n\t\t\t\t\tbottomEdge: heightSum,\r\n\t\t\t\t\tdivider: (i == 1) ? 2 : 1\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (this.opt.horizontal != true) {\r\n\t\t\t\tthis.wrapHeight = heightSum;\r\n\t\t\t\tthis.wrapEl.style.height = heightSum + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tthis.wrapEl.classList.add('screen-horisontal');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function (opt) {\r\n\t\t\tconst wrapEl = document.querySelector('.screen-wrap');\r\n\r\n\t\t\tthis.opt = opt || {};\r\n\r\n\t\t\tif (!wrapEl) return;\r\n\r\n\t\t\tconst contEl = document.querySelector('.screen-container'),\r\n\t\t\t\tscreenElems = contEl.querySelectorAll('.screen');\r\n\r\n\t\t\tthis.wrapEl = wrapEl;\r\n\t\t\tthis.screenElems = screenElems;\r\n\r\n\t\t\tthis.setProps();\r\n\r\n\t\t\twindow.addEventListener('scroll', () => {\r\n\t\t\t\tthis.lastEvenSrc = 'win';\r\n\t\t\t\tthis.scrollHandler(window.pageYOffset);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n})();","/* \r\nScreens.init({\r\n\tcontainer: '.main',\r\n\tduration: 700 // default - 1000,\r\n\tmenuCurrentClass: 'current' // default - 'menu__item_current'\r\n});\r\n\r\nScreens.setHeight(); // call on window resize\r\n\r\nScreens.onChange = function (nextScreenElem) {}\r\n*/\r\n\r\n; var Screens2;\r\n\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tScreens2 = {\r\n\t\toptions: {},\r\n\t\tcontElem: null,\r\n\t\tscrolling: false,\r\n\t\tscrollSum: 0,\r\n\t\tonChange: null,\r\n\t\t\r\n\t\tmenu: function (currentScreenElem) {\r\n\t\t\tconst menuElements = document.querySelectorAll('.js-change-screen-menu'),\r\n\t\t\tcurMenuItElem = document.querySelector('.js-change-screen-menu[data-screen=\"#' + currentScreenElem.id + '\"]'),\r\n\t\t\tcurClass = this.options.menuCurrentClass || 'current';\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < menuElements.length; i++) {\r\n\t\t\t\tconst mEl = menuElements[i];\r\n\t\t\t\t\r\n\t\t\t\tmEl.parentElement.classList.remove(curClass);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (curMenuItElem) {\r\n\t\t\t\tcurMenuItElem.parentElement.classList.add(curClass);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tchangeScreen: function (nextScreenElem) {\r\n\t\t\tconst currentScreenElem = this.contElem.querySelector('.screen_visible');\r\n\t\t\t\r\n\t\t\tif (nextScreenElem === currentScreenElem) return;\r\n\t\t\t\r\n\t\t\tif (nextScreenElem.offsetHeight < window.innerHeight) {\r\n\t\t\t\tnextScreenElem.style.height = window.innerHeight + 'px';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.scrolling = true;\r\n\t\t\tthis.scrollSum = 0;\r\n\t\t\t\r\n\t\t\tconst duration = this.options.duration || 1000;\r\n\t\t\t\r\n\t\t\tcurrentScreenElem.classList.remove('screen_active');\r\n\t\t\t\r\n\t\t\tnextScreenElem.classList.add('screen_visible');\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.menu(nextScreenElem);\r\n\t\t\t}, duration / 2);\r\n\t\t\t\r\n\t\t\tanimate(function (progress) {\r\n\t\t\t\tcurrentScreenElem.style.opacity = 1 - progress;\r\n\t\t\t\t\r\n\t\t\t\tnextScreenElem.style.opacity = progress;\r\n\t\t\t}, duration, false, () => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tcurrentScreenElem.classList.remove('screen_visible');\r\n\t\t\t\t\t\r\n\t\t\t\t\tnextScreenElem.classList.add('screen_active');\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.scrolling = false;\r\n\t\t\t\t}, 21);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\twindow.location.hash = '#' + nextScreenElem.id.split('-')[0];\r\n\r\n\t\t\tif (this.onChange) {\r\n\t\t\t\tthis.onChange(nextScreenElem);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tnextScreen: function (delta) {\r\n\t\t\tconst currentScreenElem = this.contElem.querySelector('.screen_visible');\r\n\t\t\t\r\n\t\t\tlet nextScreenElem = null;\r\n\t\t\t\r\n\t\t\tif (delta > 0) {\r\n\t\t\t\tif (currentScreenElem && currentScreenElem.nextElementSibling && currentScreenElem.nextElementSibling.classList.contains('screen')) {\r\n\t\t\t\t\tnextScreenElem = currentScreenElem.nextElementSibling;\r\n\t\t\t\t}\r\n\t\t\t} else if (delta < 0) {\r\n\t\t\t\tif (currentScreenElem && currentScreenElem.previousElementSibling && currentScreenElem.previousElementSibling.classList.contains('screen')) {\r\n\t\t\t\t\tnextScreenElem = currentScreenElem.previousElementSibling;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (nextScreenElem) {\r\n\t\t\t\tthis.changeScreen(nextScreenElem);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetHeight: function () {\r\n\t\t\tif (!this.contElem) return;\r\n\r\n\t\t\tconst screenElements = this.contElem.querySelectorAll('.screen'),\r\n\t\t\tactScreenElem = this.contElem.querySelector('.screen_active');\r\n\r\n\t\t\tfor (let i = 0; i < screenElements.length; i++) {\r\n\t\t\t\tconst scEl = screenElements[i];\r\n\t\t\t\t\r\n\t\t\t\tscEl.style.height = 'auto';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (actScreenElem.offsetHeight < window.innerHeight) {\r\n\t\t\t\tactScreenElem.style.height = window.innerHeight + 'px';\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (options) {\r\n\t\t\tconst contElem = document.querySelector(options.container);\r\n\t\t\t\r\n\t\t\tif (!contElem) return;\r\n\t\t\t\r\n\t\t\tthis.options = options;\r\n\t\t\tthis.contElem = contElem;\r\n\t\t\t\r\n\t\t\tthis.setHeight();\r\n\r\n\t\t\t// scroll or swipe event\r\n\t\t\tif ('ontouchstart' in document) {\r\n\t\t\t\tconst _this = this;\r\n\r\n\t\t\t\t$(contElem).swipe({\r\n\t\t\t\t\tallowPageScroll: \"vertical\",\r\n\t\t\t\t\tswipe: function (event, direction, distance, duration, fingerCount, fingerData) {\r\n\t\t\t\t\t\tif (direction == 'down') {\r\n\t\t\t\t\t\t\tif (!_this.scrolling) {\r\n\t\t\t\t\t\t\t\t_this.nextScreen(-1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (direction == 'up') {\r\n\t\t\t\t\t\t\tif (!_this.scrolling) {\r\n\t\t\t\t\t\t\t\t_this.nextScreen(1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tcontElem.addEventListener('wheel', (e) => {\r\n\t\t\t\t\tif (document.documentElement.offsetHeight >= document.documentElement.scrollHeight) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\t\tif (!this.scrolling) {\r\n\t\t\t\t\t\t\tthis.nextScreen(e.deltaY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst dS = document.documentElement.scrollHeight - document.documentElement.offsetHeight;\r\n\r\n\t\t\t\t\t\tif ((e.deltaY > 0 && window.pageYOffset >= dS) || e.deltaY < 0 && window.pageYOffset == 0) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\t\t\tconst absDelta = Math.abs(e.deltaY);\r\n\r\n\t\t\t\t\t\t\tthis.scrollSum += absDelta;\r\n\r\n\t\t\t\t\t\t\tif (!this.scrolling && this.scrollSum > (absDelta * 3)) {\r\n\t\t\t\t\t\t\t\tthis.nextScreen(e.deltaY);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// click event\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tconst chngSecBtn = e.target.closest('.js-change-screen-menu');\r\n\t\t\t\t\r\n\t\t\t\tif (chngSecBtn) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tconst curClass = this.options.menuCurrentClass || 'current';\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!this.scrolling && !chngSecBtn.parentElement.classList.contains(curClass)) {\r\n\t\t\t\t\t\tthis.changeScreen(document.querySelector(chngSecBtn.getAttribute('data-screen')));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// change by hash url\r\n\t\t\tif (window.location.hash) {\r\n\t\t\t\tconst screenElem = document.getElementById(window.location.hash.split('#')[1] + '-screen');\r\n\t\t\t\t\r\n\t\t\t\tif (screenElem) {\r\n\t\t\t\t\tthis.changeScreen(screenElem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})();\r\n\r\n// (function () {\r\n// \t'use strict';\r\n\r\n// \tScreens = {\r\n// \t\toptions: null,\r\n// \t\tcontElem: null,\r\n// \t\tscrolling: false,\r\n// \t\tscrollSum: 0,\r\n\r\n// \t\tmenu: function (currentScreenElem) {\r\n// \t\t\tconst menuElements = document.querySelectorAll('.js-change-screen-menu'),\r\n// \t\t\t\tcurMenuItElem = document.querySelector('.js-change-screen-menu[data-screen=\"#' + currentScreenElem.id + '\"]'),\r\n// \t\t\t\tcurClass = this.options.menuCurrentClass || 'menu__item_current';\r\n\r\n// \t\t\tfor (let i = 0; i < menuElements.length; i++) {\r\n// \t\t\t\tconst mEl = menuElements[i];\r\n\r\n// \t\t\t\tmEl.parentElement.classList.remove(curClass);\r\n// \t\t\t}\r\n\r\n// \t\t\tif (curMenuItElem) {\r\n// \t\t\t\tcurMenuItElem.parentElement.classList.add(curClass);\r\n// \t\t\t}\r\n// \t\t},\r\n\r\n// \t\tchangeScreen: function (nextScreenElem) {\r\n// \t\t\tconst currentScreenElem = this.contElem.querySelector('.screen_visible');\r\n\r\n// \t\t\tif (nextScreenElem === currentScreenElem) return;\r\n\r\n// \t\t\tthis.scrolling = true;\r\n// \t\t\tthis.scrollSum = 0;\r\n\r\n// \t\t\tconst duration = this.options.duration || 1000;\r\n\r\n// \t\t\tcurrentScreenElem.classList.remove('screen_active');\r\n\r\n// \t\t\tnextScreenElem.classList.add('screen_visible');\r\n\r\n// \t\t\tsetTimeout(() => {\r\n// \t\t\t\tthis.menu(nextScreenElem);\r\n// \t\t\t}, duration / 2);\r\n\r\n// \t\t\tanimate(function (progress) {\r\n// \t\t\t\tcurrentScreenElem.style.opacity = 1 - progress;\r\n\r\n// \t\t\t\tnextScreenElem.style.opacity = progress;\r\n// \t\t\t}, duration, false, () => {\r\n// \t\t\t\tsetTimeout(() => {\r\n// \t\t\t\t\tcurrentScreenElem.classList.remove('screen_visible');\r\n\r\n// \t\t\t\t\tnextScreenElem.classList.add('screen_active');\r\n\r\n// \t\t\t\t\tthis.scrolling = false;\r\n// \t\t\t\t}, 21);\r\n// \t\t\t});\r\n\r\n// \t\t\twindow.location.hash = '#' + nextScreenElem.id.split('-')[0];\r\n\r\n// \t\t\tif (window.Video && Video.stop != undefined) {\r\n// \t\t\t\tVideo.stop();\r\n// \t\t\t}\r\n// \t\t},\r\n\r\n// \t\tnextScreen: function (delta) {\r\n// \t\t\tconst currentScreenElem = this.contElem.querySelector('.screen_visible');\r\n\r\n// \t\t\tlet nextScreenElem = null;\r\n\r\n// \t\t\tif (delta > 0) {\r\n// \t\t\t\tif (currentScreenElem && currentScreenElem.nextElementSibling && currentScreenElem.nextElementSibling.classList.contains('screen')) {\r\n// \t\t\t\t\tnextScreenElem = currentScreenElem.nextElementSibling;\r\n// \t\t\t\t}\r\n// \t\t\t} else if (delta < 0) {\r\n// \t\t\t\tif (currentScreenElem && currentScreenElem.previousElementSibling && currentScreenElem.previousElementSibling.classList.contains('screen')) {\r\n// \t\t\t\t\tnextScreenElem = currentScreenElem.previousElementSibling;\r\n// \t\t\t\t}\r\n// \t\t\t}\r\n\r\n// \t\t\tif (nextScreenElem) {\r\n// \t\t\t\tthis.changeScreen(nextScreenElem);\r\n// \t\t\t}\r\n// \t\t},\r\n\r\n// \t\tinit: function (options) {\r\n// \t\t\tconst contElem = document.querySelector(options.container);\r\n\r\n// \t\t\tif (!contElem) return;\r\n\r\n// \t\t\tthis.options = options;\r\n// \t\t\tthis.contElem = contElem;\r\n\r\n// \t\t\t// const screenElements = contElem.querySelectorAll('.screen');\r\n\r\n// \t\t\t// for (let i = 0; i < screenElements.length; i++) {\r\n// \t\t\t// \tconst scrElem = screenElements[i];\r\n\r\n// \t\t\t// \tscrElem.setAttribute('data-height', scrElem.scrollHeight);\r\n\r\n// \t\t\t// \tif (!i) {\r\n// \t\t\t// \t\tcontElem.style.height = scrElem.scrollHeight + 'px';\r\n// \t\t\t// \t}\r\n// \t\t\t// }\r\n\r\n// \t\t\tif ('ontouchstart' in document) {\r\n// \t\t\t\tconst _this = this;\r\n\r\n// \t\t\t\t$(contElem).swipe({\r\n// \t\t\t\t\tallowPageScroll: \"vertical\",\r\n// \t\t\t\t\tswipe: function (event, direction, distance, duration, fingerCount, fingerData) {\r\n// \t\t\t\t\t\tconst dS = document.documentElement.scrollHeight - document.documentElement.offsetHeight;\r\n\r\n// \t\t\t\t\t\tif (direction == 'down' && window.pageYOffset == 0) {\r\n// \t\t\t\t\t\t\tif (!_this.scrolling) {\r\n// \t\t\t\t\t\t\t\t_this.nextScreen(-1);\r\n// \t\t\t\t\t\t\t}\r\n// \t\t\t\t\t\t} else if (direction == 'up') {\r\n// \t\t\t\t\t\t\tif (!_this.scrolling) {\r\n// \t\t\t\t\t\t\t\t_this.nextScreen(1);\r\n// \t\t\t\t\t\t\t}\r\n// \t\t\t\t\t\t}\r\n// \t\t\t\t\t}\r\n// \t\t\t\t});\r\n// \t\t\t} else if ('onwheel' in document) {\r\n// \t\t\t\tcontElem.addEventListener('wheel', (e) => {\r\n// \t\t\t\t\tif (document.documentElement.offsetHeight >= document.documentElement.scrollHeight) {\r\n// \t\t\t\t\t\te.preventDefault();\r\n\r\n// \t\t\t\t\t\tif (!this.scrolling) {\r\n// \t\t\t\t\t\t\tthis.nextScreen(e.deltaY);\r\n// \t\t\t\t\t\t}\r\n// \t\t\t\t\t} else {\r\n// \t\t\t\t\t\tconst dS = document.documentElement.scrollHeight - document.documentElement.offsetHeight;\r\n\r\n// \t\t\t\t\t\tif ((e.deltaY > 0 && window.pageYOffset >= dS) || e.deltaY < 0 && window.pageYOffset == 0) {\r\n// \t\t\t\t\t\t\te.preventDefault();\r\n\r\n// \t\t\t\t\t\t\tconst absDelta = Math.abs(e.deltaY);\r\n\r\n// \t\t\t\t\t\t\tthis.scrollSum += absDelta;\r\n\r\n// \t\t\t\t\t\t\tif (!this.scrolling && this.scrollSum > (absDelta * 3)) {\r\n// \t\t\t\t\t\t\t\tthis.nextScreen(e.deltaY);\r\n// \t\t\t\t\t\t\t}\r\n// \t\t\t\t\t\t}\r\n// \t\t\t\t\t}\r\n\r\n// \t\t\t\t});\r\n// \t\t\t}\r\n\r\n// \t\t\tdocument.addEventListener('click', (e) => {\r\n// \t\t\t\tconst chngSecBtn = e.target.closest('.js-change-screen-menu');\r\n\r\n// \t\t\t\tif (chngSecBtn) {\r\n// \t\t\t\t\te.preventDefault();\r\n\r\n// \t\t\t\t\tif (!this.scrolling && !chngSecBtn.parentElement.classList.contains('menu__item_current')) {\r\n// \t\t\t\t\t\tthis.changeScreen(document.querySelector(chngSecBtn.getAttribute('data-screen')));\r\n// \t\t\t\t\t}\r\n// \t\t\t\t}\r\n// \t\t\t});\r\n\r\n// \t\t\tif (window.location.hash) {\r\n// \t\t\t\tthis.changeScreen(document.querySelector(window.location.hash + '-screen'));\r\n// \t\t\t}\r\n// \t\t}\r\n// \t};\r\n// })();","/*\r\nScrollSmooth.init();\r\n*/\r\n\r\n; var ScrollSmooth;\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\t\r\n\tScrollSmooth = {\r\n\t\tscrolling: false,\r\n\t\tdelta: 0,\r\n\t\tscrollTo: 0,\r\n\t\tstartPageYOffset: window.pageYOffset,\r\n\t\t\r\n\t\tscroll: function() {\r\n\t\t\tthis.scrolling = true;\r\n\t\t\t\r\n\t\t\tvar duration = 3500,\r\n\t\t\teasing = 'easeInOutQuad';\r\n\t\t\t\r\n\t\t\tanimate((progress) => {\r\n\t\t\t\twindow.scrollTo(0, ((this.scrollTo * progress) + ((1 - progress) * window.pageYOffset)));\r\n\t\t\t\tconsole.log(this.scrollTo);\r\n\t\t\t}, duration, easing, () => {\r\n\t\t\t\tthis.scrolling = false;\r\n\t\t\t\tthis.delta = 0;\r\n\t\t\t\tthis.startPageYOffset = window.pageYOffset;\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\tinit: function() {\r\n\t\t\tif ('onwheel' in document) {\r\n\t\t\t\tdocument.addEventListener('wheel', (e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.delta += e.deltaY;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.scrollTo = this.delta + this.startPageYOffset;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!this.scrolling) {\r\n\t\t\t\t\t\tthis.scroll();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})();","/*\r\nToggle.init({\r\n    button: '.js-tgl-btn',\r\n    offButton: '.js-tgl-off',\r\n    toggledClass: 'some-class' // def: toggled,\r\n    targetsToggledClass: 'some-class' // def: toggled\r\n});\r\n\r\nToggle.onChange(function (btnEl, targetElems, state) {\r\n    // code...\r\n});\r\n*/\r\n\r\n; var Toggle;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Toggle = {\r\n        toggledClass: 'toggled',\r\n        targetsToggledClass: 'toggled',\r\n        onChangeSubscribers: [],\r\n\r\n        target: function (btnEl, state) {\r\n            const target = btnEl.getAttribute('data-target-elements');\r\n\r\n            let targetElements;\r\n\r\n            if (target.indexOf('->') !== -1) {\r\n                const selArr = target.split('->');\r\n\r\n                targetElements = btnEl.closest(selArr[0]).querySelectorAll(selArr[1]);\r\n\r\n            } else {\r\n                targetElements = document.querySelectorAll(target);\r\n            }\r\n\r\n            if (!targetElements.length) return;\r\n\r\n            if (state) {\r\n                for (let i = 0; i < targetElements.length; i++) {\r\n                    targetElements[i].classList.add(this.targetsToggledClass);\r\n                }\r\n            } else {\r\n                for (let i = 0; i < targetElements.length; i++) {\r\n                    targetElements[i].classList.remove(this.targetsToggledClass);\r\n                }\r\n            }\r\n\r\n            //call onChange\r\n            if (this.onChangeSubscribers.length) {\r\n                this.onChangeSubscribers.forEach(function (item) {\r\n                    item(btnEl, targetElements, state);\r\n                });\r\n            }\r\n        },\r\n\r\n        toggle: function (toggleElem, off) {\r\n            var state;\r\n\r\n            if (toggleElem.classList.contains(this.toggledClass)) {\r\n                toggleElem.classList.remove(this.toggledClass);\r\n\r\n                state = false;\r\n\r\n                if (toggleElem.hasAttribute('data-first-text')) {\r\n                    toggleElem.innerHTML = toggleElem.getAttribute('data-first-text');\r\n                }\r\n            } else if (!off) {\r\n                if (toggleElem.getAttribute('data-type') != 'button') {\r\n                    toggleElem.classList.add(this.toggledClass);\r\n                }\r\n\r\n                state = true;\r\n\r\n                if (toggleElem.hasAttribute('data-second-text')) {\r\n                    toggleElem.setAttribute('data-first-text', toggleElem.innerHTML);\r\n\r\n                    toggleElem.innerHTML = toggleElem.getAttribute('data-second-text');\r\n                }\r\n            }\r\n\r\n            //target\r\n            if (toggleElem.hasAttribute('data-target-elements')) {\r\n                this.target(toggleElem, state);\r\n            }\r\n\r\n            if (!state) return;\r\n\r\n            //dependence elements\r\n            if (toggleElem.hasAttribute('data-dependence-target-elements')) {\r\n                const dependenceTargetElements = document.querySelectorAll(toggleElem.getAttribute('data-dependence-target-elements'));\r\n\r\n                for (let i = 0; i < dependenceTargetElements.length; i++) {\r\n                    const el = dependenceTargetElements[i];\r\n\r\n                    dependenceTargetElements[i].classList.remove(this.toggledClass);\r\n\r\n                    if (el.hasAttribute('data-target-elements')) {\r\n                        this.target(el, false);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        toggleOff: function (btnEl) {\r\n            const targetEls = btnEl.getAttribute('data-target-elements'),\r\n                toggleBtnEls = document.querySelectorAll('.' + this.toggledClass +\r\n                    '[data-target-elements*=\"' + targetEls + '\"]');\r\n\r\n            this.target(btnEl, false);\r\n\r\n            for (let i = 0; i < toggleBtnEls.length; i++) {\r\n                toggleBtnEls[i].classList.remove(this.toggledClass);\r\n            }\r\n        },\r\n\r\n        onDocClickOff: function (e, targetBtnEl) {\r\n            const toggleElements = document.querySelectorAll('[data-toggle-off=\"document\"].' + this.toggledClass);\r\n\r\n            for (let i = 0; i < toggleElements.length; i++) {\r\n                const elem = toggleElements[i];\r\n\r\n                if (targetBtnEl === elem) continue;\r\n\r\n                if (elem.hasAttribute('data-target-elements')) {\r\n                    const targetSelectors = elem.getAttribute('data-target-elements');\r\n\r\n                    if (!e.target.closest(targetSelectors)) {\r\n                        this.toggle(elem, true);\r\n                    }\r\n                } else {\r\n                    this.toggle(elem, true);\r\n                }\r\n            }\r\n        },\r\n\r\n        onChange: function (fun) {\r\n            if (typeof fun === 'function') {\r\n                this.onChangeSubscribers.push(fun);\r\n            }\r\n        },\r\n\r\n        init: function (opt) {\r\n            if (opt.toggledClass) {\r\n                this.toggledClass = opt.toggledClass;\r\n            }\r\n\r\n            if (opt.targetsToggledClass) {\r\n                this.targetsToggledClass = opt.targetsToggledClass;\r\n            }\r\n\r\n            document.addEventListener('click', (e) => {\r\n                const btnEl = e.target.closest(opt.button),\r\n                    offBtnEl = e.target.closest(opt.offButton);\r\n\r\n                if (btnEl) {\r\n                    e.preventDefault();\r\n\r\n                    this.toggle(btnEl);\r\n                } else if (offBtnEl) {\r\n                    e.preventDefault();\r\n\r\n                    this.toggleOff(offBtnEl);\r\n                }\r\n\r\n                this.onDocClickOff(e, btnEl);\r\n            });\r\n        }\r\n    };\r\n})();","; var FlexImg;\r\n\r\n(function() {\r\n    'use strict';\r\n    \r\n    FlexImg = function(elementsStr) {\r\n        \r\n        function load(elem) {\r\n            \r\n            if (!elem.hasAttribute('data-images')) {\r\n                return;\r\n            }\r\n            \r\n            var images = elem.getAttribute('data-images').split(',');\r\n            \r\n            images.forEach(function(image) {\r\n                \r\n                var imageProp = image.split('->');\r\n                \r\n                if (window.innerWidth < (+imageProp[0])) {\r\n                    elem.src = imageProp[1];\r\n                }\r\n                \r\n            });\r\n            \r\n        }\r\n        \r\n        //init\r\n        var elements = document.querySelectorAll(elementsStr);\r\n        \r\n        if (elements.length) {\r\n            \r\n            for (var i = 0; i < elements.length; i++) {\r\n                load(elements[i]);\r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n})();","/* \r\nCoverImg.init([Str parent element selector]);\r\n\r\nCoverImg.reInit([Str parent element selector]);\r\n*/\r\n; var CoverImg;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    CoverImg = {\r\n        cover: function (e) {\r\n            var img = e.currentTarget,\r\n                imgWrap = img.closest('.cover-img-wrap'),\r\n                imgProportion = img.offsetWidth / img.offsetHeight,\r\n                imgWrapProportion = imgWrap.offsetWidth / imgWrap.offsetHeight;\r\n\r\n            if (imgWrapProportion != Infinity && imgWrapProportion < 21) {\r\n\r\n                if (imgProportion <= imgWrapProportion) {\r\n                    // var margin = Math.round(-(imgWrap.offsetWidth / imgProportion - imgWrap.offsetHeight) / 2);\r\n\r\n                    img.classList.add('cover-img_w');\r\n                    // img.style.marginTop = margin +'px';\r\n\r\n                } else {\r\n                    // var margin = Math.round(-(imgWrap.offsetHeight * imgProportion - imgWrap.offsetWidth) / 2);\r\n\r\n                    img.classList.add('cover-img_h');\r\n                    // img.style.marginLeft = margin +'px';\r\n\r\n                }\r\n\r\n            } else {\r\n                img.classList.add('cover-img_w');\r\n            }\r\n\r\n        },\r\n\r\n        reInit: function (parentElementStr) {\r\n\r\n            var elements;\r\n\r\n            if (parentElementStr) {\r\n                if (typeof parentElementStr == 'string') {\r\n                    elements = document.querySelectorAll(parentElementStr + ' .cover-img');\r\n                } else {\r\n                    elements = parentElementStr.querySelectorAll('.cover-img');\r\n                }\r\n            } else {\r\n                elements = document.querySelectorAll('.cover-img');\r\n            }\r\n\r\n            for (var i = 0; i < elements.length; i++) {\r\n                var img = elements[i];\r\n\r\n                img.classList.remove('cover-img_w');\r\n                img.classList.remove('cover-img_h');\r\n                // img.style.marginTop = '';\r\n                // img.style.marginLeft = '';\r\n                img.src = (browser == 'ie') ? (img.src + '?' + new Date().getTime()) : img.src;\r\n            }\r\n\r\n        },\r\n\r\n        init: function (parentElementStr) {\r\n            var elements = (parentElementStr) ? document.querySelectorAll(parentElementStr + ' .cover-img, ' + parentElementStr + ' .cover-img-wrap') : document.querySelectorAll('.cover-img, .cover-img-wrap');\r\n\r\n            for (var i = 0; i < elements.length; i++) {\r\n                var elem = elements[i],\r\n                    img;\r\n\r\n                if (elem.classList.contains('cover-img-wrap')) {\r\n\r\n                    img = elem.querySelector('img');\r\n\r\n                    img.classList.add('cover-img');\r\n\r\n                } else if (elem.classList.contains('cover-img')) {\r\n\r\n                    img = elem;\r\n\r\n                    img.parentElement.classList.add('cover-img-wrap');\r\n\r\n                }\r\n\r\n                if (!img.hasAttribute('data-event')) {\r\n\r\n                    img.addEventListener('load', this.cover);\r\n\r\n                    img.setAttribute('data-event', 'true');\r\n\r\n                }\r\n\r\n                if (browser == 'ie') {\r\n                    img.src = img.src + '?' + new Date().getTime();\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n})();","/* \r\nnew LazyLoad({\r\n   selector: @Str,\r\n   event: false\r\n});\r\n\r\nconst lazy = new LazyLoad().load;\r\nlazy('.el-sel');\r\n*/\r\n\r\n; var LazyLoad;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    LazyLoad = function (opt) {\r\n        opt = opt || {};\r\n\r\n        const elements = document.querySelectorAll(opt.selector);\r\n\r\n        if (elements) {\r\n            if (opt.event) {\r\n                if (opt.event == 'scroll') {\r\n                    window.addEventListener('scroll', function (e) {\r\n                        for (let i = 0; i < elements.length; i++) {\r\n                            const el = elements[i];\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                setTimeout(() => {\r\n                    this.doLoad(elements);\r\n                }, 1000);\r\n            }\r\n        }\r\n\r\n        return {\r\n            load: (sel) => {\r\n                const elements = document.querySelectorAll(sel);\r\n                this.doLoad(elements);\r\n            }\r\n        }\r\n    }\r\n\r\n    LazyLoad.prototype.doLoad = function (elems) {\r\n        for (let i = 0; i < elems.length; i++) {\r\n            const elem = elems[i];\r\n\r\n            if (elem.hasAttribute('data-src')) {\r\n                elem.src = elem.getAttribute('data-src');\r\n            } else if (elem.hasAttribute('data-bg-url')) {\r\n                elem.style.backgroundImage = 'url(' + elem.getAttribute('data-bg-url') + ')';\r\n            }\r\n        }\r\n    }\r\n})();","/*\r\nVideo.init(Str button selector);\r\n*/\r\nvar Video;\r\n\r\n(function () {\r\n\t'use strict';\r\n\r\n\tVideo = {\r\n\t\tplay: function (elem, vSrc, parEl) {\r\n\t\t\tlet vidFrameWrapEl,\r\n\t\t\t\tautoplay = true;\r\n\r\n\t\t\tif (elem) {\r\n\t\t\t\tvidFrameWrapEl = elem.nextElementSibling;\r\n\t\t\t\tvSrc = elem.getAttribute('data-src');\r\n\t\t\t} else {\r\n\t\t\t\tvidFrameWrapEl = parEl.querySelector('.video__frame');\r\n\t\t\t\tautoplay = false;\r\n\t\t\t}\r\n\r\n\t\t\tvidFrameWrapEl.classList.add('video__frame_visible');\r\n\r\n\t\t\tif (vSrc.indexOf('youtube') !== -1 || vSrc.indexOf('youtu.be') !== -1) {\r\n\t\t\t\tconst iFrame = document.createElement('iframe'),\r\n\t\t\t\t\tvId = vSrc.match(/(?:youtu\\.be\\/|youtube\\.com\\/watch\\?v\\=|youtube\\.com\\/embed\\/)+?([\\w-]+)/i)[1];\r\n\r\n\t\t\t\tiFrame.src = 'https://www.youtube.com/embed/' + vId + '?' + (autoplay ? 'autoplay=1' : '') + '&rel=0&amp;showinfo=0';\r\n\t\t\t\tiFrame.allow = (autoplay ? 'autoplay; ' : '') + 'encrypted-media';\r\n\t\t\t\tiFrame.allowFullscreen = true;\r\n\r\n\t\t\t\tiFrame.addEventListener('load', function () {\r\n\t\t\t\t\tiFrame.classList.add('visible');\r\n\r\n\t\t\t\t\tvidFrameWrapEl.classList.add('video__frame_played');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvidFrameWrapEl.appendChild(iFrame);\r\n\t\t\t} else {\r\n\t\t\t\tconst videoEl = document.createElement('video');\r\n\r\n\t\t\t\tvideoEl.src = vSrc;\r\n\t\t\t\tvideoEl.autoplay = autoplay;\r\n\t\t\t\tvideoEl.controls = true;\r\n\r\n\t\t\t\tvidFrameWrapEl.appendChild(videoEl);\r\n\r\n\t\t\t\tvideoEl.classList.add('visible');\r\n\r\n\t\t\t\tvidFrameWrapEl.classList.add('video__frame_played');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstop: function () {\r\n\t\t\tconst frameBlockEls = document.querySelectorAll('.video__frame_played');\r\n\r\n\t\t\tfor (let i = 0; i < frameBlockEls.length; i++) {\r\n\t\t\t\tconst el = frameBlockEls[i];\r\n\r\n\t\t\t\tel.innerHTML = '';\r\n\t\t\t\tel.classList.remove('video__frame_visible');\r\n\t\t\t\tel.classList.remove('video__frame_played');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function (elementStr) {\r\n\t\t\tif (!document.querySelectorAll('.video').length) return;\r\n\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tconst elem = e.target.closest(elementStr);\r\n\r\n\t\t\t\tif (elem) {\r\n\t\t\t\t\tthis.play(elem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","var Popup, MediaPopup;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    //popup core\r\n    Popup = {\r\n        winScrollTop: 0,\r\n        onClose: null,\r\n        _onclose: null,\r\n        onOpenSubscribers: [],\r\n        headerSelector: '.header',\r\n        delay: 300,\r\n\r\n        init: function (elementStr) {\r\n            document.addEventListener('click', (e) => {\r\n                var btnElem = e.target.closest(elementStr),\r\n                    closeBtnElem = e.target.closest('.js-popup-close');\r\n\r\n                if (btnElem) {\r\n                    e.preventDefault();\r\n                    this.open(btnElem.getAttribute('data-popup'), false, btnElem);\r\n                } else if (\r\n                    closeBtnElem ||\r\n                    (\r\n                        !e.target.closest('.popup__window') &&\r\n                        e.target.closest('.popup') &&\r\n                        !e.target.closest('.popup[data-btn-close-only=\"true\"]')\r\n                    )\r\n                ) {\r\n                    this.close('closeButton');\r\n                }\r\n            });\r\n\r\n            if (window.location.hash) {\r\n                this.open(window.location.hash);\r\n            }\r\n        },\r\n\r\n        open: function (elementStr, callback, btnElem) {\r\n            const winEl = document.querySelector(elementStr);\r\n\r\n            if (!winEl || !winEl.classList.contains('popup__window')) return;\r\n\r\n            this.close('openPopup', winEl);\r\n\r\n            const elemParent = winEl.parentElement;\r\n\r\n            elemParent.style.display = 'block';\r\n\r\n            setTimeout(function () {\r\n                elemParent.style.opacity = '1';\r\n            }, 121);\r\n\r\n            elemParent.scrollTop = 0;\r\n\r\n            setTimeout(function () {\r\n                winEl.style.display = 'inline-block';\r\n\r\n                if (winEl.offsetHeight < window.innerHeight) {\r\n                    winEl.style.top = ((window.innerHeight - winEl.offsetHeight) / 2) + 'px';\r\n                }\r\n\r\n                winEl.style.opacity = '1';\r\n\r\n                setTimeout(() => {\r\n                    winEl.classList.add('popup__window_visible');\r\n                }, this.delay);\r\n            }, this.delay);\r\n\r\n\r\n            if (callback) this._onclose = callback;\r\n\r\n            this.fixBody(true);\r\n\r\n            this.onOpenSubscribers.forEach(function (item) {\r\n                item(elementStr, btnElem);\r\n            });\r\n\r\n            return winEl;\r\n        },\r\n\r\n        onOpen: function (fun) {\r\n            if (typeof fun === 'function') {\r\n                this.onOpenSubscribers.push(fun);\r\n            }\r\n        },\r\n\r\n        message: function (msg, winSel, callback) {\r\n            const winEl = this.open(winSel || '#message-popup', callback);\r\n\r\n            winEl.querySelector('.popup__message').innerHTML = msg;\r\n        },\r\n\r\n        close: function (evInit, openedWinEl) {\r\n            const visWinElems = document.querySelectorAll('.popup__window_visible');\r\n\r\n            if (!visWinElems.length) return;\r\n\r\n            for (let i = 0; i < visWinElems.length; i++) {\r\n                const winEl = visWinElems[i];\r\n\r\n                if (!winEl.classList.contains('popup__window_visible')) continue;\r\n\r\n                winEl.style.opacity = '0';\r\n\r\n                const samePop = openedWinEl ? winEl.parentElement === openedWinEl.parentElement : false;\r\n\r\n                setTimeout(() => {\r\n                    winEl.classList.remove('popup__window_visible');\r\n                    winEl.style.display = 'none';\r\n\r\n                    if (evInit !== 'openPopup' || !samePop) winEl.parentElement.style.opacity = '0';\r\n\r\n                    setTimeout(() => {\r\n                        if (evInit !== 'openPopup' || !samePop) winEl.parentElement.style.display = 'none';\r\n\r\n                        if (evInit == 'closeButton') this.fixBody(false);\r\n                    }, this.delay);\r\n                }, this.delay);\r\n            }\r\n\r\n            if (this._onclose) {\r\n                this._onclose();\r\n                this._onclose = null;\r\n            } else if (this.onClose) {\r\n                this.onClose();\r\n            }\r\n        },\r\n\r\n        fixBody: function (st) {\r\n            var headerElem = document.querySelector(this.headerSelector);\r\n\r\n            if (st && !document.body.classList.contains('popup-is-opened')) {\r\n                this.winScrollTop = window.pageYOffset;\r\n\r\n                var offset = window.innerWidth - document.documentElement.clientWidth;\r\n\r\n                document.body.classList.add('popup-is-opened');\r\n\r\n                if (headerElem) {\r\n                    headerElem.style.transition = '0s';\r\n                    headerElem.style.right = offset + 'px';\r\n                }\r\n\r\n                document.body.style.right = offset + 'px';\r\n\r\n                document.body.style.top = (-this.winScrollTop) + 'px';\r\n\r\n            } else if (!st) {\r\n                if (headerElem) {\r\n                    headerElem.style.right = '';\r\n                    setTimeout(function () {\r\n                        headerElem.style.transition = '';\r\n                    }, 321);\r\n                }\r\n\r\n                document.body.classList.remove('popup-is-opened');\r\n\r\n                window.scrollTo(0, this.winScrollTop);\r\n            }\r\n        }\r\n    };\r\n\r\n    //popup media\r\n    MediaPopup = {\r\n        image: function (args) {\r\n            const elemPopup = Popup.open(args.popupStr),\r\n                elemImg = elemPopup.querySelector('.popup-media__image');\r\n\r\n            Popup.onClose = function () {\r\n                elemImg.src = '#';\r\n                elemImg.classList.remove('popup-media__image_visible');\r\n            }\r\n\r\n            elemImg.src = args.href;\r\n            elemImg.classList.add('popup-media__image_visible');\r\n\r\n        },\r\n\r\n        video: function (args) {\r\n            const elemPopup = Popup.open(args.popupStr),\r\n                videoEl = elemPopup.querySelector('.popup-media__video'),\r\n                prevEl = videoEl.querySelector('.popup-media__preview'),\r\n                btnPlayEl = videoEl.querySelector('.popup-media__btn-play');\r\n\r\n            Popup.onClose = function () {\r\n                Video.stop();\r\n                prevEl.src = '#';\r\n                videoEl.classList.remove('popup-media__video_visible');\r\n            }\r\n\r\n            prevEl.src = args.preview;\r\n            btnPlayEl.setAttribute('data-src', args.href);\r\n            videoEl.classList.add('popup-media__video_visible');\r\n        },\r\n\r\n        next: function (elem) {\r\n            if (!elem.hasAttribute('data-group')) {\r\n                return;\r\n            }\r\n\r\n            var group = elem.getAttribute('data-group'),\r\n                index = [].slice.call(document.querySelectorAll('[data-group=\"' + group + '\"]')).indexOf(elem);\r\n        },\r\n\r\n        init: function (btnSel) {\r\n            document.addEventListener('click', (e) => {\r\n                const btnEl = e.target.closest(btnSel);\r\n\r\n                if (!btnEl) return;\r\n\r\n                e.preventDefault();\r\n\r\n                const type = btnEl.getAttribute('data-type'),\r\n                    args = {\r\n                        href: btnEl.href,\r\n                        preview: btnEl.getAttribute('data-preview'),\r\n                        caption: btnEl.getAttribute('data-caption'),\r\n                        group: btnEl.getAttribute('data-group'),\r\n                        popupStr: btnEl.getAttribute('data-popup') || '#media-popup'\r\n                    };\r\n\r\n                if (type == 'image') {\r\n                    this.image(args);\r\n                } else if (type == 'video') {\r\n                    this.video(args);\r\n                }\r\n\r\n                this.next(btnEl);\r\n            });\r\n        }\r\n    };\r\n\r\n})();","var ValidateForm;\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    ValidateForm = {\r\n        input: null,\r\n        formSelector: null,\r\n\r\n        errorTip: function (err, errInd, errorTxt) {\r\n            const field = this.input.closest('.form__field') || this.input.parentElement,\r\n                tipEl = field.querySelector('.field-error-tip');\r\n\r\n            if (err) {\r\n                field.classList.remove('field-success');\r\n                field.classList.add('field-error');\r\n\r\n                if (errInd) {\r\n                    if (tipEl) {\r\n                        if (!tipEl.hasAttribute('data-error-text')) {\r\n                            tipEl.setAttribute('data-error-text', tipEl.innerHTML);\r\n                        }\r\n                        tipEl.innerHTML = (errInd != 'custom') ? tipEl.getAttribute('data-error-text-' + errInd) : errorTxt;\r\n                    }\r\n\r\n                    field.setAttribute('data-error-index', errInd);\r\n\r\n                } else {\r\n                    if (tipEl && tipEl.hasAttribute('data-error-text')) {\r\n                        tipEl.innerHTML = tipEl.getAttribute('data-error-text');\r\n                    }\r\n\r\n                    field.removeAttribute('data-error-index');\r\n                }\r\n\r\n            } else {\r\n                field.classList.remove('field-error');\r\n                field.classList.add('field-success');\r\n                field.removeAttribute('data-error-index');\r\n            }\r\n        },\r\n\r\n        customErrorTip: function (input, errorTxt, isLockForm) {\r\n            if (!input) return;\r\n\r\n            this.input = input;\r\n\r\n            if (errorTxt) {\r\n                this.errorTip(true, 'custom', errorTxt);\r\n\r\n                if (isLockForm) {\r\n                    input.setAttribute('data-custom-error', 'true');\r\n                }\r\n            } else {\r\n                this.errorTip(false);\r\n                input.removeAttribute('data-custom-error');\r\n\r\n                this.validate(input.closest('form'));\r\n            }\r\n        },\r\n\r\n        formError: function (formElem, err, errTxt) {\r\n            const errTipElem = formElem.querySelector('.form-error-tip');\r\n\r\n            if (err) {\r\n                formElem.classList.add('form-error');\r\n\r\n                if (!errTipElem) return;\r\n\r\n                if (errTxt) {\r\n                    if (!errTipElem.hasAttribute('data-error-text')) {\r\n                        errTipElem.setAttribute('data-error-text', errTipElem.innerHTML);\r\n                    }\r\n\r\n                    errTipElem.innerHTML = errTxt;\r\n                } else if (errTipElem.hasAttribute('data-error-text')) {\r\n                    errTipElem.innerHTML = errTipElem.getAttribute('data-error-text');\r\n                }\r\n            } else {\r\n                formElem.classList.remove('form-error');\r\n            }\r\n        },\r\n\r\n        customFormErrorTip: function (formElem, errorTxt) {\r\n            if (!formElem) return;\r\n\r\n            if (errorTxt) {\r\n                this.formError(formElem, true, errorTxt);\r\n            } else {\r\n                this.formError(formElem, false);\r\n            }\r\n        },\r\n\r\n        txt: function () {\r\n            let err = false;\r\n\r\n            if (!/^[0-9a-z-_,.:;@-\\s]*$/i.test(this.input.value)) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        num: function () {\r\n            let err = false;\r\n\r\n            if (!/^[0-9.,-]*$/.test(this.input.value)) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        cardNumber: function () {\r\n            let err = false;\r\n\r\n            if (!/^\\d{4}\\-\\d{4}\\-\\d{4}\\-\\d{4}$/.test(this.input.value)) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        name: function () {\r\n            let err = false;\r\n\r\n            if (!/^[a-z-'\\s-]{2,21}(\\s[a-z-'\\s-]{2,21})?(\\s[a-z-'\\s-]{2,21})?$/i.test(this.input.value)) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        date: function () {\r\n            let err = false,\r\n                errDate = false,\r\n                matches = this.input.value.match(/^(\\d{2}).(\\d{2}).(\\d{4})$/);\r\n\r\n            if (!matches) {\r\n                errDate = 1;\r\n            } else {\r\n                var compDate = new Date(matches[3], (matches[2] - 1), matches[1]),\r\n                    curDate = new Date();\r\n\r\n                if (this.input.hasAttribute('data-min-years-passed')) {\r\n                    var interval = curDate.valueOf() - new Date(curDate.getFullYear() - (+this.input.getAttribute('data-min-years-passed')), curDate.getMonth(), curDate.getDate()).valueOf();\r\n\r\n                    if (curDate.valueOf() < compDate.valueOf() || (curDate.getFullYear() - matches[3]) > 100) {\r\n                        errDate = 1;\r\n                    } else if ((curDate.valueOf() - compDate.valueOf()) < interval) {\r\n                        errDate = 2;\r\n                    }\r\n                }\r\n\r\n                if (compDate.getFullYear() != matches[3] || compDate.getMonth() != (matches[2] - 1) || compDate.getDate() != matches[1]) {\r\n                    errDate = 1;\r\n                }\r\n            }\r\n\r\n            if (errDate == 1) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else if (errDate == 2) {\r\n                this.errorTip(true, 3);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        time: function () {\r\n            const matches = this.input.value.match(/^(\\d{1,2}):(\\d{1,2})$/);\r\n\r\n            let err = false;\r\n\r\n            if (!matches || Number(matches[1]) > 23 || Number(matches[2]) > 59) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        email: function () {\r\n            let err = false;\r\n\r\n            if (!/^[a-z0-9]+[\\w\\-\\.]*@([\\w\\-]{2,}\\.)+[a-z]{2,}$/i.test(this.input.value)) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        url: function () {\r\n            let err = false;\r\n\r\n            if (!/^(https?\\:\\/\\/)?[-\\w-.]+\\.[a-z-]{2,11}[/?-\\w/=-]+$/i.test(this.input.value)) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        tel: function () {\r\n            let err = false;\r\n\r\n            if (!/^\\+7\\([0-9]{3}\\)[0-9]{3}-[0-9]{2}-[0-9]{2}$/.test(this.input.value)) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        pass: function () {\r\n            let err = false,\r\n                minLng = this.input.getAttribute('data-min-length');\r\n\r\n            if (minLng && this.input.value.length < minLng) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        checkbox: function (elem) {\r\n            this.input = elem;\r\n\r\n            var group = elem.closest('.form__chbox-group');\r\n\r\n            if (group && group.getAttribute('data-tested')) {\r\n                var checkedElements = 0,\r\n                    elements = group.querySelectorAll('input[type=\"checkbox\"]');\r\n\r\n                for (var i = 0; i < elements.length; i++) {\r\n                    if (elements[i].checked) {\r\n                        checkedElements++;\r\n                    }\r\n                }\r\n\r\n                if (checkedElements < group.getAttribute('data-min')) {\r\n                    group.classList.add('form__chbox-group_error');\r\n                } else {\r\n                    group.classList.remove('form__chbox-group_error');\r\n                }\r\n\r\n            } else if (elem.getAttribute('data-tested')) {\r\n                if (elem.getAttribute('data-required') && !elem.checked) {\r\n                    this.errorTip(true);\r\n                } else {\r\n                    this.errorTip(false);\r\n                }\r\n            }\r\n        },\r\n\r\n        radio: function (elem) {\r\n            this.input = elem;\r\n\r\n            var checkedElement = false,\r\n                group = elem.closest('.form__radio-group');\r\n\r\n            if (!group) return;\r\n\r\n            var elements = group.querySelectorAll('input[type=\"radio\"]');\r\n\r\n            for (var i = 0; i < elements.length; i++) {\r\n                if (elements[i].checked) {\r\n                    checkedElement = true;\r\n                }\r\n            }\r\n\r\n            if (!checkedElement) {\r\n                group.classList.add('form__radio-group_error');\r\n            } else {\r\n                group.classList.remove('form__radio-group_error');\r\n            }\r\n        },\r\n\r\n        select: function (elem) {\r\n            let err = false;\r\n\r\n            this.input = elem;\r\n\r\n            if (elem.getAttribute('data-required') && !elem.value.length) {\r\n                this.errorTip(true);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        file: function (elem, filesArr) {\r\n            this.input = elem;\r\n\r\n            let err = false,\r\n                errCount = { ext: 0, size: 0 },\r\n                maxFiles = +this.input.getAttribute('data-max-files'),\r\n                extRegExp = new RegExp('(?:\\\\.' + this.input.getAttribute('data-ext').replace(/,/g, '|\\\\.') + ')$', 'i'),\r\n                maxSize = +this.input.getAttribute('data-max-size'),\r\n                fileItemElements = this.input.closest('.custom-file').querySelectorAll('.custom-file__item');;\r\n\r\n            for (var i = 0; i < filesArr.length; i++) {\r\n                var file = filesArr[i];\r\n\r\n                if (!file.name.match(extRegExp)) {\r\n                    errCount.ext++;\r\n\r\n                    if (fileItemElements[i]) {\r\n                        fileItemElements[i].classList.add('file-error');\r\n                    }\r\n\r\n                    continue;\r\n                }\r\n\r\n                if (file.size > maxSize) {\r\n                    errCount.size++;\r\n\r\n                    if (fileItemElements[i]) {\r\n                        fileItemElements[i].classList.add('file-error');\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (maxFiles && filesArr.length > maxFiles) {\r\n                this.errorTip(true, 4);\r\n                err = true;\r\n            } else if (errCount.ext) {\r\n                this.errorTip(true, 2);\r\n                err = true;\r\n            } else if (errCount.size) {\r\n                this.errorTip(true, 3);\r\n                err = true;\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n\r\n            return err;\r\n        },\r\n\r\n        validateOnInput: function (elem) {\r\n            this.input = elem;\r\n\r\n            const dataType = elem.getAttribute('data-type');\r\n\r\n            if (elem.getAttribute('data-required') && (!elem.value.length || /^\\s+$/.test(elem.value))) {\r\n                this.errorTip(true);\r\n            } else if (elem.value.length) {\r\n                if (dataType) {\r\n                    try {\r\n                        this[dataType]();\r\n                    } catch (error) {\r\n                        console.log('Error while process', dataType)\r\n                    }\r\n                } else {\r\n                    this.errorTip(false);\r\n                }\r\n            } else {\r\n                this.errorTip(false);\r\n            }\r\n        },\r\n\r\n        validate: function (formElem) {\r\n            let err = 0;\r\n\r\n            // text, password, textarea\r\n            const elements = formElem.querySelectorAll('input[type=\"text\"], input[type=\"password\"], input[type=\"number\"], input[type=\"tel\"], textarea');\r\n\r\n            const checkElems = (elements) => {\r\n                for (let i = 0; i < elements.length; i++) {\r\n                    const elem = elements[i];\r\n\r\n                    if (elemIsHidden(elem)) continue;\r\n\r\n                    this.input = elem;\r\n\r\n                    elem.setAttribute('data-tested', 'true');\r\n\r\n                    const dataType = elem.getAttribute('data-type');\r\n\r\n                    if (elem.getAttribute('data-required') && (!elem.value.length || /^\\s+$/.test(elem.value))) {\r\n                        this.errorTip(true);\r\n                        err++;\r\n                    } else if (elem.value.length) {\r\n                        if (elem.hasAttribute('data-custom-error')) {\r\n                            err++;\r\n                        } else if (dataType) {\r\n                            try {\r\n                                if (this[dataType]()) {\r\n                                    err++;\r\n                                }\r\n                            } catch (error) {\r\n                                console.log('Error while process', dataType)\r\n                            }\r\n                        } else {\r\n                            this.errorTip(false);\r\n                        }\r\n                    } else {\r\n                        this.errorTip(false);\r\n                    }\r\n                }\r\n            }\r\n\r\n            checkElems(elements);\r\n\r\n            if (formElem.id) {\r\n                const elements = document.querySelectorAll('input[form=\"' + formElem.id + '\"]');\r\n\r\n                checkElems(elements);\r\n            }\r\n\r\n            // select\r\n            const selectElements = formElem.querySelectorAll('.select__input');\r\n\r\n            for (let i = 0; i < selectElements.length; i++) {\r\n                const selectElem = selectElements[i];\r\n\r\n                if (elemIsHidden(selectElem.parentElement)) continue;\r\n\r\n                if (this.select(selectElem)) {\r\n                    err++;\r\n                }\r\n            }\r\n\r\n            // checkboxes\r\n            const chboxEls = formElem.querySelectorAll('input[type=\"checkbox\"]');\r\n\r\n            for (let i = 0; i < chboxEls.length; i++) {\r\n                const elem = chboxEls[i];\r\n\r\n                if (elemIsHidden(elem)) {\r\n                    continue;\r\n                }\r\n\r\n                this.input = elem;\r\n\r\n                elem.setAttribute('data-tested', 'true');\r\n\r\n                if (elem.getAttribute('data-required') && !elem.checked) {\r\n                    this.errorTip(true);\r\n                    err++;\r\n                } else {\r\n                    this.errorTip(false);\r\n                }\r\n            }\r\n\r\n            // checkbox group\r\n            const chboxGrEls = formElem.querySelectorAll('.form__chbox-group');\r\n\r\n            for (let i = 0; i < chboxGrEls.length; i++) {\r\n                var group = chboxGrEls[i],\r\n                    checkedElements = 0;\r\n\r\n                if (elemIsHidden(group)) {\r\n                    continue;\r\n                }\r\n\r\n                group.setAttribute('data-tested', 'true');\r\n\r\n                const chboxInGrEls = group.querySelectorAll('input[type=\"checkbox\"]');\r\n\r\n                for (let i = 0; i < chboxInGrEls.length; i++) {\r\n                    if (chboxInGrEls[i].checked) {\r\n                        checkedElements++;\r\n                    }\r\n                }\r\n\r\n                if (checkedElements < group.getAttribute('data-min')) {\r\n                    group.classList.add('form__chbox-group_error');\r\n                    err++;\r\n                } else {\r\n                    group.classList.remove('form__chbox-group_error');\r\n                }\r\n            }\r\n\r\n            // radio group\r\n            const radGrEls = formElem.querySelectorAll('.form__radio-group');\r\n\r\n            for (let i = 0; i < radGrEls.length; i++) {\r\n                var group = radGrEls[i],\r\n                    checkedElement = false;\r\n\r\n                if (elemIsHidden(group)) {\r\n                    continue;\r\n                }\r\n\r\n                group.setAttribute('data-tested', 'true');\r\n\r\n                const radInGrEls = group.querySelectorAll('input[type=\"radio\"]');\r\n\r\n                for (let i = 0; i < radInGrEls.length; i++) {\r\n                    if (radInGrEls[i].checked) {\r\n                        checkedElement = true;\r\n                    }\r\n                }\r\n\r\n                if (!checkedElement) {\r\n                    group.classList.add('form__radio-group_error');\r\n                    err++;\r\n                } else {\r\n                    group.classList.remove('form__radio-group_error');\r\n                }\r\n            }\r\n\r\n            // file\r\n            const fileEls = formElem.querySelectorAll('input[type=\"file\"]');\r\n\r\n            for (var i = 0; i < fileEls.length; i++) {\r\n                var elem = fileEls[i];\r\n\r\n                if (elemIsHidden(elem)) {\r\n                    continue;\r\n                }\r\n\r\n                this.input = elem;\r\n\r\n                if (CustomFile.inputFiles(elem).length) {\r\n                    if (this.file(elem, CustomFile.inputFiles(elem))) {\r\n                        err++;\r\n                    }\r\n                } else if (elem.getAttribute('data-required')) {\r\n                    this.errorTip(true);\r\n                    err++;\r\n                } else {\r\n                    this.errorTip(false);\r\n                }\r\n            }\r\n\r\n            // passwords compare\r\n            const pwdCompEls = formElem.querySelectorAll('input[data-pass-compare-input]');\r\n\r\n            for (var i = 0; i < pwdCompEls.length; i++) {\r\n                var elem = pwdCompEls[i];\r\n\r\n                if (elemIsHidden(elem)) {\r\n                    continue;\r\n                }\r\n\r\n                this.input = elem;\r\n\r\n                var val = elem.value;\r\n\r\n                if (val.length) {\r\n                    var compElemVal = formElem.querySelector(elem.getAttribute('data-pass-compare-input')).value;\r\n\r\n                    if (val !== compElemVal) {\r\n                        this.errorTip(true, 2);\r\n                        err++;\r\n                    } else {\r\n                        this.errorTip(false);\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.formError(formElem, err);\r\n\r\n            return (err) ? false : true;\r\n        },\r\n\r\n        init: function (formSelector) {\r\n            this.formSelector = formSelector;\r\n\r\n            document.removeEventListener('input', this.inpH);\r\n            document.removeEventListener('change', this.chH);\r\n\r\n            this.inpH = this.inpH.bind(this);\r\n            this.chH = this.chH.bind(this);\r\n\r\n            document.addEventListener('input', this.inpH);\r\n            document.addEventListener('change', this.chH);\r\n        },\r\n\r\n        inpH: function (e) {\r\n            const elem = e.target.closest(this.formSelector + ' input[type=\"text\"],' + this.formSelector + ' input[type=\"password\"],' + this.formSelector + ' input[type=\"number\"],' + this.formSelector + ' input[type=\"tel\"],' + this.formSelector + ' textarea, input[type=\"text\"][form]');\r\n\r\n            if (elem && elem.hasAttribute('data-tested')) {\r\n                setTimeout(() => {\r\n                    this.validateOnInput(elem);\r\n                }, 121);\r\n            }\r\n        },\r\n\r\n        chH: function (e) {\r\n            const elem = e.target.closest(this.formSelector + ' input[type=\"radio\"],' + this.formSelector + ' input[type=\"checkbox\"]');\r\n\r\n            if (elem) {\r\n                this[elem.type](elem);\r\n            }\r\n        }\r\n    };\r\n})();","/* \r\n*   Checkbox.onChange(function(el, state) {\r\n*       // body\r\n*   }); \r\n*/\r\n\r\nvar Checkbox;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Checkbox = {\r\n        hideCssClass: 'hidden',\r\n        opt: {},\r\n        onChangeSubscribers: [],\r\n\r\n        init: function (options) {\r\n            options = options || {};\r\n\r\n            this.opt.focusOnTarget = (options.focusOnTarget !== undefined) ? options.focusOnTarget : false;\r\n\r\n            const elems = document.querySelectorAll('input[type=\"checkbox\"]');\r\n\r\n            for (let i = 0; i < elems.length; i++) {\r\n                this.change(elems[i], true);\r\n            }\r\n\r\n            // change event\r\n            document.removeEventListener('change', this.changeHandler);\r\n\r\n            this.changeHandler = this.changeHandler.bind(this);\r\n            document.addEventListener('change', this.changeHandler);\r\n        },\r\n\r\n        changeHandler: function (e) {\r\n            const elem = e.target.closest('input[type=\"checkbox\"]');\r\n\r\n            if (elem) {\r\n                this.change(elem);\r\n            }\r\n        },\r\n\r\n        change: function (elem, onInit) {\r\n            if (!onInit) {\r\n                this.onChangeSubscribers.forEach(function (item) {\r\n                    item(elem, elem.checked);\r\n                });\r\n            }\r\n\r\n            const targetElements = (elem.hasAttribute('data-target-elements')) ? document.querySelectorAll(elem.getAttribute('data-target-elements')) : {};\r\n\r\n            if (!targetElements.length) return;\r\n\r\n            for (let i = 0; i < targetElements.length; i++) {\r\n                const targetElem = targetElements[i];\r\n\r\n                targetElem.style.display = (elem.checked) ? 'block' : 'none';\r\n\r\n                if (elem.checked) {\r\n                    targetElem.classList.remove(this.hideCssClass);\r\n\r\n                    const inpEls = targetElem.querySelectorAll('input[type=\"text\"]');\r\n\r\n                    for (var j = 0; j < inpEls.length; j++) {\r\n                        var inpEl = inpEls[j];\r\n\r\n                        inpEl.focus();\r\n                    }\r\n\r\n                } else {\r\n                    targetElem.classList.add(this.hideCssClass);\r\n                }\r\n            }\r\n        },\r\n\r\n        onChange: function (fun) {\r\n            if (typeof fun === 'function') {\r\n                this.onChangeSubscribers.push(fun);\r\n            }\r\n        }\r\n    };\r\n})();","(function () {\r\n\t'use strict';\r\n\r\n\t//show element on radio button change\r\n\tvar ChangeRadio = {\r\n\t\thideCssClass: 'hidden',\r\n\r\n\t\tchange: function (checkedElem) {\r\n\t\t\tvar elements = document.querySelectorAll('input[type=\"radio\"][name=\"' + checkedElem.name + '\"]');\r\n\r\n\t\t\tif (!elements.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\tconst elem = elements[i],\r\n\t\t\t\t\ttargetElements = (elem.hasAttribute('data-target-elements')) ? document.querySelectorAll(elem.getAttribute('data-target-elements')) : [],\r\n\t\t\t\t\thideElems = (elem.hasAttribute('data-hide-elements')) ? document.querySelectorAll(elem.getAttribute('data-hide-elements')) : [];\r\n\r\n\t\t\t\tif (!targetElements.length && !hideElems.length) continue;\r\n\r\n\t\t\t\tfor (let i = 0; i < targetElements.length; i++) {\r\n\t\t\t\t\tconst targetElem = targetElements[i];\r\n\r\n\t\t\t\t\ttargetElem.style.display = (elem.checked) ? 'block' : 'none';\r\n\r\n\t\t\t\t\tif (elem.checked) {\r\n\t\t\t\t\t\ttargetElem.classList.remove(this.hideCssClass);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttargetElem.classList.add(this.hideCssClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (let i = 0; i < hideElems.length; i++) {\r\n\t\t\t\t\tconst hideEl = hideElems[i];\r\n\r\n\t\t\t\t\thideEl.style.display = (elem.checked) ? 'none' : 'block';\r\n\r\n\t\t\t\t\tif (elem.checked) {\r\n\t\t\t\t\t\thideEl.classList.add(this.hideCssClass);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thideEl.classList.remove(this.hideCssClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function () {\r\n\t\t\tdocument.addEventListener('change', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('input[type=\"radio\"]');\r\n\r\n\t\t\t\tif (elem) {\r\n\t\t\t\t\tthis.change(elem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t//init scripts\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tChangeRadio.init();\r\n\t});\r\n})();","; var Select;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    // custom select\r\n    Select = {\r\n        field: null,\r\n        hideCssClass: 'hidden',\r\n        onSelectSubscribers: [],\r\n        focusBlurIsDisabled: false,\r\n        st: null,\r\n\r\n        reset: function (parentElem) {\r\n            const parElem = parentElem || document,\r\n                fieldElements = parElem.querySelectorAll('.select'),\r\n                buttonElements = parElem.querySelectorAll('.select__button'),\r\n                inputElements = parElem.querySelectorAll('.select__input'),\r\n                valueElements = parElem.querySelectorAll('.select__val');\r\n\r\n            for (let i = 0; i < fieldElements.length; i++) {\r\n                fieldElements[i].classList.remove('select_changed');\r\n            }\r\n\r\n            for (let i = 0; i < buttonElements.length; i++) {\r\n                buttonElements[i].children[0].innerHTML = buttonElements[i].getAttribute('data-placeholder');\r\n            }\r\n\r\n            for (let i = 0; i < inputElements.length; i++) {\r\n                inputElements[i].value = '';\r\n                inputElements[i].blur();\r\n            }\r\n\r\n            for (let i = 0; i < valueElements.length; i++) {\r\n                valueElements[i].classList.remove('select__val_checked');\r\n                valueElements[i].disabled = false;\r\n            }\r\n        },\r\n\r\n        closeAll: function () {\r\n            const fieldElements = document.querySelectorAll('.select'),\r\n                optionsElements = document.querySelectorAll('.select__options');\r\n\r\n            for (let i = 0; i < fieldElements.length; i++) {\r\n                fieldElements[i].classList.remove('select_opened');\r\n\r\n                optionsElements[i].classList.remove('ovfauto');\r\n                optionsElements[i].style.height = 0;\r\n\r\n                const listItemElements = optionsElements[i].querySelectorAll('li');\r\n\r\n                for (let i = 0; i < listItemElements.length; i++) {\r\n                    listItemElements[i].classList.remove('hover');\r\n                }\r\n            }\r\n        },\r\n\r\n        close: function (fieldEl) {\r\n            fieldEl = fieldEl || this.field;\r\n\r\n            setTimeout(function () {\r\n                fieldEl.classList.remove('select_opened');\r\n            }, 210);\r\n\r\n            const optionsElem = fieldEl.querySelector('.select__options'),\r\n                listItemElements = optionsElem.querySelectorAll('li');\r\n\r\n            optionsElem.classList.remove('ovfauto');\r\n            optionsElem.style.height = 0;\r\n\r\n            for (let i = 0; i < listItemElements.length; i++) {\r\n                listItemElements[i].classList.remove('hover');\r\n            }\r\n        },\r\n\r\n        open: function () {\r\n            this.field.classList.add('select_opened');\r\n\r\n            const optionsElem = this.field.querySelector('.select__options');\r\n\r\n            setTimeout(function () {\r\n                optionsElem.style.height = ((optionsElem.scrollHeight > window.innerHeight - optionsElem.getBoundingClientRect().top) ? window.innerHeight - optionsElem.getBoundingClientRect().top : (optionsElem.scrollHeight + 2)) + 'px';\r\n                optionsElem.scrollTop = 0;\r\n\r\n                setTimeout(function () {\r\n                    optionsElem.classList.add('ovfauto');\r\n                }, 621);\r\n            }, 21);\r\n        },\r\n\r\n        selectMultipleVal: function (elem, button, input) {\r\n            const toButtonValue = [],\r\n                toInputValue = [],\r\n                inputsBlock = this.field.querySelector('.select__multiple-inputs');\r\n\r\n            elem.classList.toggle('select__val_checked');\r\n\r\n            const checkedElements = this.field.querySelectorAll('.select__val_checked');\r\n\r\n            for (let i = 0; i < checkedElements.length; i++) {\r\n                const elem = checkedElements[i];\r\n\r\n                toButtonValue[i] = elem.innerHTML;\r\n                toInputValue[i] = (elem.hasAttribute('data-value')) ? elem.getAttribute('data-value') : elem.innerHTML;\r\n            }\r\n\r\n            if (toButtonValue.length) {\r\n                button.children[0].innerHTML = toButtonValue.join(', ');\r\n\r\n                input.value = toInputValue[0];\r\n\r\n                inputsBlock.innerHTML = '';\r\n\r\n                if (toInputValue.length > 1) {\r\n                    for (let i = 1; i < toInputValue.length; i++) {\r\n                        const yetInput = document.createElement('input');\r\n\r\n                        yetInput.type = 'hidden';\r\n                        yetInput.name = input.name;\r\n                        yetInput.value = toInputValue[i];\r\n\r\n                        inputsBlock.appendChild(yetInput);\r\n                    }\r\n                }\r\n            } else {\r\n                button.children[0].innerHTML = button.getAttribute('data-placeholder');\r\n                input.value = '';\r\n                this.close();\r\n            }\r\n        },\r\n\r\n        targetAction: function () {\r\n            const valEls = this.field.querySelectorAll('.select__val');\r\n\r\n            for (let i = 0; i < valEls.length; i++) {\r\n                const vEl = valEls[i];\r\n\r\n                if (vEl.hasAttribute('data-show-elements')) {\r\n                    const showEls = document.querySelectorAll(vEl.getAttribute('data-show-elements'));\r\n\r\n                    for (let i = 0; i < showEls.length; i++) {\r\n                        const sEl = showEls[i];\r\n\r\n                        if (vEl.classList.contains('select__val_checked')) {\r\n                            sEl.style.display = 'block';\r\n                            sEl.classList.remove(this.hideCssClass);\r\n\r\n                            // focus on input\r\n                            const txtInpEl = sEl.querySelector('input[type=\"text\"]');\r\n\r\n                            if (txtInpEl) {\r\n                                txtInpEl.focus();\r\n                            }\r\n                        } else {\r\n                            sEl.style.display = 'none';\r\n                            sEl.classList.add(this.hideCssClass);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (vEl.hasAttribute('data-hide-elements')) {\r\n                    const hideEls = document.querySelectorAll(vEl.getAttribute('data-hide-elements'));\r\n\r\n                    for (let i = 0; i < hideEls.length; i++) {\r\n                        const hEl = hideEls[i];\r\n\r\n                        if (vEl.classList.contains('select__val_checked')) {\r\n                            hEl.style.display = 'none';\r\n                            hEl.classList.add(this.hideCssClass);\r\n                        } else {\r\n                            hEl.style.display = 'block';\r\n                            hEl.classList.remove(this.hideCssClass);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        selectVal: function (elem) {\r\n            const button = this.field.querySelector('.select__button'),\r\n                input = this.field.querySelector('.select__input');\r\n\r\n            if (this.field.classList.contains('select_multiple')) {\r\n                this.selectMultipleVal(elem, button, input);\r\n            } else {\r\n                const toButtonValue = elem.innerHTML,\r\n                    toInputValue = (elem.hasAttribute('data-value')) ? elem.getAttribute('data-value') : elem.innerHTML;\r\n\r\n                const valueElements = this.field.querySelectorAll('.select__val');\r\n\r\n                for (let i = 0; i < valueElements.length; i++) {\r\n                    const valElem = valueElements[i];\r\n\r\n                    valElem.classList.remove('select__val_checked');\r\n                    valElem.disabled = false;\r\n                }\r\n\r\n                elem.classList.add('select__val_checked');\r\n                elem.disabled = true;\r\n\r\n                if (button) {\r\n                    button.children[0].innerHTML = toButtonValue;\r\n                }\r\n\r\n                input.value = toInputValue;\r\n\r\n                this.close();\r\n\r\n                if (window.Placeholder) {\r\n                    Placeholder.hide(input, true);\r\n                }\r\n\r\n                if (input.getAttribute('data-submit-form-onchange')) {\r\n                    Form.submitForm(input.closest('form'));\r\n                }\r\n\r\n                this.onSelectSubscribers.forEach(item => {\r\n                    item(input, toInputValue, elem.getAttribute('data-second-value'));\r\n                });\r\n            }\r\n\r\n            this.targetAction();\r\n\r\n            if (input.classList.contains('var-height-textarea__textarea')) {\r\n                varHeightTextarea.setHeight(input);\r\n            }\r\n\r\n            this.field.classList.add('select_changed');\r\n\r\n            ValidateForm.select(input);\r\n        },\r\n\r\n        onSelect: function (fun) {\r\n            if (typeof fun === 'function') {\r\n                this.onSelectSubscribers.push(fun);\r\n            }\r\n        },\r\n\r\n        setOptions: function (fieldSelector, optObj, nameKey, valKey, secValKey) {\r\n            const fieldElements = document.querySelectorAll(fieldSelector + ' .select');\r\n\r\n            for (let i = 0; i < fieldElements.length; i++) {\r\n                const optionsElem = fieldElements[i].querySelector('.select__options');\r\n\r\n                optionsElem.innerHTML = '';\r\n\r\n                for (let i = 0; i < optObj.length; i++) {\r\n                    let li = document.createElement('li'),\r\n                        secValAttr = (secValKey != undefined) ? ' data-second-value=\"' + optObj[i][secValKey] + '\"' : '';\r\n\r\n                    li.innerHTML = '<button type=\"button\" class=\"select__val\" data-value=\"' + optObj[i][valKey] + '\"' + secValAttr + '>' + optObj[i][nameKey] + '</button>';\r\n\r\n                    optionsElem.appendChild(li);\r\n                }\r\n            }\r\n        },\r\n\r\n        keyboard: function (key) {\r\n            const options = this.field.querySelector('.select__options'),\r\n                hoverItem = options.querySelector('li.hover');\r\n\r\n            switch (key) {\r\n                case 40:\r\n                    if (hoverItem) {\r\n                        const nextItem = function (item) {\r\n                            let elem = item.nextElementSibling;\r\n\r\n                            while (elem) {\r\n                                if (!elem) break;\r\n\r\n                                if (!elemIsHidden(elem)) {\r\n                                    return elem;\r\n                                } else {\r\n                                    elem = elem.nextElementSibling;\r\n                                }\r\n                            }\r\n                        }(hoverItem);\r\n\r\n                        if (nextItem) {\r\n                            hoverItem.classList.remove('hover');\r\n                            nextItem.classList.add('hover');\r\n\r\n                            options.scrollTop = options.scrollTop + (nextItem.getBoundingClientRect().top - options.getBoundingClientRect().top);\r\n                        }\r\n                    } else {\r\n                        let elem = options.firstElementChild;\r\n\r\n                        while (elem) {\r\n                            if (!elem) break;\r\n\r\n                            if (!elemIsHidden(elem)) {\r\n                                elem.classList.add('hover');\r\n                                break;\r\n                            } else {\r\n                                elem = elem.nextElementSibling;\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case 38:\r\n                    if (hoverItem) {\r\n                        const nextItem = function (item) {\r\n                            let elem = item.previousElementSibling;\r\n\r\n                            while (elem) {\r\n                                if (!elem) break;\r\n\r\n                                if (!elemIsHidden(elem)) {\r\n                                    return elem;\r\n                                } else {\r\n                                    elem = elem.previousElementSibling;\r\n                                }\r\n                            }\r\n                        }(hoverItem);\r\n\r\n                        if (nextItem) {\r\n                            hoverItem.classList.remove('hover');\r\n                            nextItem.classList.add('hover');\r\n\r\n                            options.scrollTop = options.scrollTop + (nextItem.getBoundingClientRect().top - options.getBoundingClientRect().top);\r\n                        }\r\n                    } else {\r\n                        let elem = options.lastElementChild;\r\n\r\n                        while (elem) {\r\n                            if (!elem) break;\r\n\r\n                            if (!elemIsHidden(elem)) {\r\n                                elem.classList.add('hover');\r\n                                options.scrollTop = 9999;\r\n                                break;\r\n                            } else {\r\n                                elem = elem.previousElementSibling;\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case 13:\r\n                    this.selectVal(hoverItem.querySelector('.select__val'));\r\n            }\r\n        },\r\n\r\n        build: function (elementStr) {\r\n            const elements = document.querySelectorAll(elementStr);\r\n\r\n            if (!elements.length) return;\r\n\r\n            for (let i = 0; i < elements.length; i++) {\r\n                const elem = elements[i],\r\n                    options = elem.querySelectorAll('option'),\r\n                    parent = elem.parentElement;\r\n\r\n                let optionsList = '',\r\n                    selectedOption = null;\r\n\r\n                // option list\r\n                for (let i = 0; i < options.length; i++) {\r\n                    const opt = options[i];\r\n\r\n                    if (opt.hasAttribute('selected')) {\r\n                        selectedOption = opt;\r\n                    }\r\n\r\n                    optionsList += '<li><button type=\"button\" tabindex=\"-1\" class=\"select__val' + ((opt.hasAttribute('selected')) ? ' select__val_checked' : '') + '\"' + ((opt.hasAttribute('value')) ? ' data-value=\"' + opt.value + '\"' : '') + ((opt.hasAttribute('data-second-value')) ? ' data-second-value=\"' + opt.getAttribute('data-second-value') + '\"' : '') + ((opt.hasAttribute('data-show-elements')) ? ' data-show-elements=\"' + opt.getAttribute('data-show-elements') + '\"' : '') + ((opt.hasAttribute('data-hide-elements')) ? ' data-hide-elements=\"' + opt.getAttribute('data-hide-elements') + '\"' : '') + '>' + opt.innerHTML + '</button></li>';\r\n                }\r\n\r\n                const require = (elem.hasAttribute('data-required')) ? ' data-required=\"' + elem.getAttribute('data-required') + '\" ' : '';\r\n\r\n                const placeholder = elem.getAttribute('data-placeholder');\r\n\r\n                const submitOnChange = (elem.hasAttribute('data-submit-form-onchange')) ? ' data-submit-form-onchange=\"' + elem.getAttribute('data-submit-form-onchange') + '\" ' : '';\r\n\r\n                const head = '<button type=\"button\"' + ((placeholder) ? ' data-placeholder=\"' + placeholder + '\"' : '') + ' class=\"select__button\"><span>' + ((selectedOption) ? selectedOption.innerHTML : (placeholder) ? placeholder : '') + '</span></button>';\r\n\r\n                const multiple = {\r\n                    class: (elem.multiple) ? ' select_multiple' : '',\r\n                    inpDiv: (elem.multiple) ? '<div class=\"select__multiple-inputs\"></div>' : ''\r\n                };\r\n\r\n                const hiddenInp = '<input type=\"hidden\" name=\"' + elem.name + '\"' + require + submitOnChange + 'class=\"select__input\" value=\"' + ((selectedOption) ? selectedOption.value : '') + '\">';\r\n\r\n                if (elem.hasAttribute('data-empty-text')) {\r\n                    optionsList = '<li class=\"select__options-empty\">' + elem.getAttribute('data-empty-text') + '</li>';\r\n                }\r\n\r\n                // output select\r\n                const customElem = document.createElement('div');\r\n\r\n                customElem.className = 'select' + multiple.class + ((selectedOption) ? ' select_changed' : '');\r\n\r\n                customElem.innerHTML = head + '<ul class=\"select__options\">' + optionsList + '</ul>' + hiddenInp + multiple.inpDiv;\r\n\r\n                parent.insertBefore(customElem, parent.firstChild);\r\n                parent.removeChild(parent.children[1]);\r\n            }\r\n        },\r\n\r\n        init: function (elementStr) {\r\n            if (document.querySelector(elementStr)) this.build(elementStr);\r\n\r\n            // click event\r\n            document.removeEventListener('click', this.clickHandler);\r\n\r\n            this.clickHandler = this.clickHandler.bind(this);\r\n            document.addEventListener('click', this.clickHandler);\r\n\r\n            // focus event\r\n            document.removeEventListener('focus', this.focusHandler, true);\r\n\r\n            this.focusHandler = this.focusHandler.bind(this);\r\n            document.addEventListener('focus', this.focusHandler, true);\r\n\r\n            // blur event\r\n            document.removeEventListener('blur', this.blurHandler, true);\r\n\r\n            this.blurHandler = this.blurHandler.bind(this);\r\n            document.addEventListener('blur', this.blurHandler, true);\r\n\r\n            // keydown event\r\n            document.removeEventListener('keydown', this.keydownHandler);\r\n\r\n            this.keydownHandler = this.keydownHandler.bind(this);\r\n            document.addEventListener('keydown', this.keydownHandler);\r\n\r\n            // close all\r\n            document.addEventListener('click', (e) => {\r\n                if (!e.target.closest('.select')) {\r\n                    this.closeAll();\r\n                }\r\n            });\r\n        },\r\n\r\n        clickHandler: function (e) {\r\n            clearTimeout(this.st);\r\n\r\n            const btnElem = e.target.closest('.select__button'),\r\n                valElem = e.target.closest('.select__val');\r\n\r\n            if (btnElem) {\r\n                this.focusBlurIsDisabled = true;\r\n\r\n                this.field = btnElem.closest('.select');\r\n\r\n                if (this.field.classList.contains('select_opened')) {\r\n                    this.close();\r\n                } else {\r\n                    this.closeAll();\r\n                    this.open();\r\n                }\r\n            } else if (valElem) {\r\n                this.focusBlurIsDisabled = true;\r\n\r\n                this.field = valElem.closest('.select');\r\n                this.selectVal(valElem);\r\n            }\r\n\r\n            this.st = setTimeout(function () {\r\n                this.focusBlurIsDisabled = false;\r\n            }, 521);\r\n        },\r\n\r\n        focusHandler: function (e) {\r\n            const inpElem = e.target.closest('.select__button');\r\n\r\n            if (inpElem) {\r\n                setTimeout(() => {\r\n                    if (this.focusBlurIsDisabled) return;\r\n\r\n                    this.field = inpElem.closest('.select');\r\n\r\n                    if (!this.field.classList.contains('select_opened')) {\r\n                        this.closeAll();\r\n                        this.open();\r\n                    }\r\n                }, 321);\r\n            }\r\n        },\r\n\r\n        blurHandler: function (e) {\r\n            const inpElem = e.target.closest('.select__button');\r\n\r\n            if (inpElem) {\r\n                setTimeout(() => {\r\n                    if (this.focusBlurIsDisabled) return;\r\n\r\n                    const fieldEl = inpElem.closest('.select');\r\n\r\n                    if (fieldEl.classList.contains('select_opened')) {\r\n                        this.close(fieldEl);\r\n                    }\r\n                }, 321);\r\n            }\r\n        },\r\n\r\n        keydownHandler: function (e) {\r\n            const elem = e.target.closest('.select_opened');\r\n\r\n            if (!elem) return;\r\n\r\n            this.field = elem.closest('.select');\r\n\r\n            const key = e.which || e.keyCode || 0;\r\n\r\n            if (key == 40 || key == 38 || key == 13) {\r\n                e.preventDefault();\r\n                this.keyboard(key);\r\n            }\r\n        }\r\n    };\r\n})();","var FormSlider;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    FormSlider = {\r\n        mM: null,\r\n        mU: null,\r\n        dragElemObj: {},\r\n        formsliderObj: {},\r\n        track: null,\r\n        edge: {},\r\n        input: null,\r\n        valUnit: 0,\r\n        dragElemLeft: 0,\r\n        dragEndSubscribers: [],\r\n        formaters: {},\r\n\r\n        init: function () {\r\n            const sliders = document.querySelectorAll('.formslider');\r\n\r\n            for (let i = 0; i < sliders.length; i++) {\r\n                const sliderEl = sliders[i],\r\n                    isRange = sliders[i].getAttribute('data-range');\r\n\r\n                let dragElem;\r\n\r\n                if (isRange) {\r\n                    dragElem = '<button type=\"button\" class=\"formslider__drag\" data-index=\"0\" data-input=\"' + sliderEl.getAttribute('data-first-input') + '\"></button><button type=\"button\" class=\"formslider__drag\" data-index=\"1\" data-input=\"' + sliderEl.getAttribute('data-second-input') + '\"></button>';\r\n                } else {\r\n                    dragElem = '<button type=\"button\" class=\"formslider__drag\" data-input=\"' + sliderEl.getAttribute('data-input') + '></button>';\r\n                }\r\n\r\n                sliderEl.innerHTML = '<div class=\"formslider__bar\"><div class=\"formslider__track\"></div>' + dragElem + '</div>';\r\n\r\n                this.setInitState(sliderEl);\r\n            }\r\n\r\n            document.addEventListener('mousedown', this.mouseDown.bind(this));\r\n            document.addEventListener('touchstart', this.mouseDown.bind(this));\r\n        },\r\n\r\n        reInit: function () {\r\n            const sliders = document.querySelectorAll('.formslider');\r\n\r\n            for (var i = 0; i < sliders.length; i++) {\r\n                this.setInitState(sliders[i]);\r\n            }\r\n        },\r\n\r\n        setInitState: function (slider) {\r\n            const dragElems = slider.querySelectorAll('.formslider__drag'),\r\n                trackEl = slider.querySelector('.formslider__track'),\r\n                dragWidth = dragElems[0].offsetWidth,\r\n                sliderW = slider.offsetWidth,\r\n                min = +slider.getAttribute('data-min'),\r\n                max = +slider.getAttribute('data-max'),\r\n                isRange = slider.getAttribute('data-range');\r\n\r\n            if (isRange) {\r\n                for (let i = 0; i < dragElems.length; i++) {\r\n                    const dragEl = dragElems[i],\r\n                        inpEl = document.getElementById(dragEl.getAttribute('data-input')),\r\n                        inpVal = inpEl.hasAttribute('data-value') ? +inpEl.getAttribute('data-value') : +inpEl.value,\r\n\r\n                        left = ((inpVal - min) / ((max - min) / 100)) * ((sliderW - dragWidth) / 100);\r\n\r\n                    dragEl.style.left = left + 'px';\r\n\r\n                    if (!i) {\r\n                        trackEl.style.left = (left + dragWidth / 2) + 'px';\r\n                    } else {\r\n                        trackEl.style.right = (sliderW - left - dragWidth / 2) + 'px';\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        // on mouse down\r\n        mouseDown: function (e) {\r\n            if (e.type == 'mousedown' && e.which != 1) {\r\n                return;\r\n            }\r\n\r\n            var elem = e.target.closest('.formslider__drag');\r\n\r\n            if (!elem) {\r\n                return;\r\n            }\r\n\r\n            this.mM = this.mouseMove.bind(this);\r\n            this.mU = this.mouseUp.bind(this);\r\n\r\n            document.addEventListener('mousemove', this.mM);\r\n            document.addEventListener('touchmove', this.mM);\r\n\r\n            document.addEventListener('mouseup', this.mU);\r\n            document.addEventListener('touchend', this.mU);\r\n\r\n            var clientX = (e.type == 'touchstart') ? e.targetTouches[0].clientX : e.clientX;\r\n\r\n            // dragable options \r\n            this.dragElemObj.elem = elem;\r\n            this.dragElemObj.X = elem.getBoundingClientRect().left;\r\n            this.dragElemObj.shiftX = clientX - this.dragElemObj.X;\r\n            this.dragElemObj.index = elem.getAttribute('data-index');\r\n            this.dragElemObj.width = elem.offsetWidth;\r\n            elem.setAttribute('data-active', 'true');\r\n\r\n            //formslider options\r\n            var formslider = elem.closest('.formslider');\r\n            this.formsliderObj.X = formslider.getBoundingClientRect().left;\r\n            this.formsliderObj.width = formslider.offsetWidth;\r\n            this.formsliderObj.isRange = formslider.getAttribute('data-range');\r\n            this.formsliderObj.min = +formslider.getAttribute('data-min');\r\n\r\n            //one unit of value\r\n            this.valUnit = (+formslider.getAttribute('data-max') - this.formsliderObj.min) / (formslider.offsetWidth - elem.offsetWidth);\r\n\r\n            this.oneValPerc = (+formslider.getAttribute('data-max') - this.formsliderObj.min) / 100;\r\n\r\n            //track\r\n            this.track = formslider.querySelector('.formslider__track');\r\n\r\n            //get parameters of slider\r\n            if (this.formsliderObj.isRange) {\r\n\r\n                if (this.dragElemObj.index == 0) {\r\n\r\n                    var siblElem = formslider.querySelector('.formslider__drag[data-index=\"1\"]');\r\n\r\n                    this.edge.L = 0;\r\n\r\n                    this.edge.R = siblElem.getBoundingClientRect().left - this.formsliderObj.X - siblElem.offsetWidth;\r\n\r\n                } else if (this.dragElemObj.index == 1) {\r\n\r\n                    var siblElem = formslider.querySelector('.formslider__drag[data-index=\"0\"]');\r\n\r\n                    this.edge.L = siblElem.getBoundingClientRect().left - this.formsliderObj.X + siblElem.offsetWidth;\r\n\r\n                    this.edge.R = this.formsliderObj.width - elem.offsetWidth;\r\n\r\n                }\r\n\r\n                this.input = document.getElementById(elem.getAttribute('data-input'));\r\n\r\n            } else {\r\n                this.edge.L = 0;\r\n                this.edge.R = this.formsliderObj.width - elem.offsetWidth;\r\n            }\r\n\r\n        },\r\n\r\n        // on mouse move\r\n        mouseMove: function (e) {\r\n            if (!this.dragElemObj.elem) {\r\n                return;\r\n            }\r\n\r\n            var clientX = (e.type == 'touchmove') ? e.targetTouches[0].clientX : e.clientX;\r\n\r\n            var dragElemLeft = clientX - this.dragElemObj.shiftX - this.formsliderObj.X;\r\n\r\n            if (dragElemLeft < this.edge.L) {\r\n                dragElemLeft = this.edge.L;\r\n            } else if (dragElemLeft > this.edge.R) {\r\n                dragElemLeft = this.edge.R;\r\n            }\r\n\r\n            if (this.formsliderObj.isRange) {\r\n\r\n                if (this.dragElemObj.index == 0) {\r\n                    this.track.style.left = (dragElemLeft + 5) + 'px';\r\n                } else if (this.dragElemObj.index == 1) {\r\n                    this.track.style.right = (this.formsliderObj.width - dragElemLeft - 5) + 'px';\r\n                }\r\n\r\n            } else {\r\n                this.track.style.width = (dragElemLeft + 5) + 'px';\r\n            }\r\n\r\n            this.dragElemObj.elem.style.left = dragElemLeft + 'px';\r\n\r\n            this.dragElemLeft = dragElemLeft;\r\n\r\n            this.setInputVal();\r\n        },\r\n\r\n        // end drag\r\n        mouseUp: function (e) {\r\n            document.removeEventListener('mousemove', this.mM);\r\n            document.removeEventListener('touchmove', this.mM);\r\n\r\n            document.removeEventListener('mouseup', this.mU);\r\n            document.removeEventListener('touchend', this.mU);\r\n\r\n            this.setInputVal();\r\n\r\n            this.dragElemObj.elem.setAttribute('data-active', 'false');\r\n\r\n            this.dragEndSubscribers.forEach(item => {\r\n                item();\r\n            });\r\n\r\n            //reset properties\r\n            this.dragElemObj = {};\r\n            this.formsliderObj = {};\r\n            this.track = null;\r\n            this.edge = {};\r\n            this.input = null;\r\n            this.valUnit = 0;\r\n            this.dragElemLeft = 0;\r\n        },\r\n\r\n        onDragEnd: function (fun) {\r\n\t\t\tif (typeof fun === 'function') {\r\n\t\t\t\tthis.dragEndSubscribers.push(fun);\r\n\t\t\t}\r\n\t\t},\r\n\r\n        //set hidden input value\r\n        setInputVal: function () {\r\n            let val;\r\n\r\n            if (this.formsliderObj.isRange) {\r\n                if (this.dragElemObj.index == 0) {\r\n                    val = Math.round((this.dragElemLeft / ((this.formsliderObj.width - this.dragElemObj.width * 2) / 100)) * this.oneValPerc);\r\n                } else {\r\n                    val = Math.round(((this.dragElemLeft - this.dragElemObj.width) / ((this.formsliderObj.width - this.dragElemObj.width * 2) / 100)) * this.oneValPerc);\r\n                }\r\n            }\r\n\r\n            val = val + this.formsliderObj.min;\r\n\r\n            const formatId = this.input.getAttribute('data-format');\r\n\r\n            if (formatId !== null && this.formaters[formatId]) {\r\n                val = this.formaters[formatId](val)\r\n            }\r\n\r\n            this.input.value = val;\r\n        },\r\n\r\n        format: function (id, fun) {\r\n            this.formaters[id] = fun;\r\n        }\r\n    };\r\n\r\n    document.addEventListener('DOMContentLoaded', function (e) {\r\n        FormSlider.init();\r\n\r\n        window.addEventListener('winResized', function () {\r\n            FormSlider.reInit();\r\n        });\r\n    });\r\n\r\n})();","; var AutoComplete;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    AutoComplete = {\r\n        fieldElem: null,\r\n        inputElem: null,\r\n        optionsElem: null,\r\n        setValues: null,\r\n        opt: {},\r\n        onSelectSubscribers: [],\r\n\r\n        open: function (optH) {\r\n            this.fieldElem.classList.add('autocomplete_opened');\r\n\r\n            const optionsHeight = optH || 185;\r\n\r\n            this.optionsElem.style.height = (optionsHeight + 2) + 'px';\r\n            this.optionsElem.scrollTop = 0;\r\n\r\n            setTimeout(() => {\r\n                this.optionsElem.classList.add('ovfauto');\r\n            }, 550);\r\n        },\r\n\r\n        close: function (inputElem) {\r\n            const inpElem = inputElem || this.inputElem,\r\n                fieldElem = inpElem.closest('.autocomplete'),\r\n                optionsElem = fieldElem.querySelector('.autocomplete__options');\r\n\r\n            fieldElem.classList.remove('autocomplete_opened');\r\n\r\n            optionsElem.classList.remove('ovfauto');\r\n            optionsElem.style.height = 0;\r\n        },\r\n\r\n        searchValue: function () {\r\n            if (!this.setValues) return;\r\n\r\n            const permOpened = this.inputElem.getAttribute('data-perm-opened') === 'true';\r\n\r\n            let values = '';\r\n\r\n            if (this.inputElem.value.length) {\r\n                const preReg = new RegExp('(' + this.inputElem.value + ')', 'i');\r\n\r\n                this.setValues(this.inputElem, (valuesData, nameKey, valKey, secValKey) => {\r\n                    if (valuesData) {\r\n                        for (let i = 0; i < valuesData.length; i++) {\r\n                            const valData = valuesData[i];\r\n\r\n                            if (!permOpened) {\r\n                                if (nameKey !== undefined) {\r\n                                    if (valData[nameKey].match(preReg)) {\r\n                                        values += '<li><button type=\"button\" data-value=\"' + valData[valKey] + '\" data-second-value=\"' + valData[secValKey] + '\" class=\"autocomplete__val\">' + valData[nameKey].replace(preReg, '<span>$1</span>') + '</button></li>';\r\n                                    }\r\n                                } else {\r\n                                    if (valData.match(preReg)) {\r\n                                        values += '<li><button type=\"button\" class=\"autocomplete__val\">' + valData.replace(preReg, '<span>$1</span>') + '</button></li>';\r\n                                    }\r\n                                }\r\n\r\n                            } else {\r\n                                values += '<li><button type=\"button\" data-value=\"' + valData[valKey] + '\" data-second-value=\"' + valData[secValKey] + '\" class=\"autocomplete__val\">' + valData[nameKey].replace(preReg, '<span>$1</span>') + '</button></li>';\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (values == '') {\r\n                        if (!valuesData || !valuesData.length) {\r\n                            values = '<li class=\"autocomplete__options-empty\">' + this.inputElem.getAttribute('data-empty-text') + '</li>';\r\n\r\n                            this.optionsElem.innerHTML = values;\r\n\r\n                            this.open(this.optionsElem.querySelector('.autocomplete__options-empty').offsetHeight);\r\n\r\n                        } else if (this.inputElem.hasAttribute('data-other-value')) {\r\n                            values = '<li class=\"autocomplete__options-other\"><button type=\"button\" class=\"autocomplete__val\">' + this.inputElem.getAttribute('data-other-value') + '</button></li>';\r\n\r\n                            this.optionsElem.innerHTML = values;\r\n\r\n                            this.open(this.optionsElem.querySelector('.autocomplete__options-other').offsetHeight);\r\n\r\n                        } else {\r\n                            values = '<li class=\"autocomplete__options-empty\">' + this.inputElem.getAttribute('data-nf-text') + '</li>';\r\n\r\n                            this.optionsElem.innerHTML = values;\r\n\r\n                            this.open(this.optionsElem.querySelector('.autocomplete__options-empty').offsetHeight);\r\n                        }\r\n\r\n\r\n                    } else {\r\n                        this.optionsElem.innerHTML = values;\r\n                        this.open();\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                if (this.opt.getAllValuesIfEmpty) {\r\n                    this.setValues(this.inputElem, (valuesData, nameKey, valKey, secValKey) => {\r\n                        if (valuesData) {\r\n                            for (let i = 0; i < valuesData.length; i++) {\r\n                                const valData = valuesData[i];\r\n\r\n                                if (nameKey !== undefined) {\r\n                                    values += '<li><button type=\"button\" data-value=\"' + valData[valKey] + '\" data-second-value=\"' + valData[secValKey] + '\" class=\"autocomplete__val\">' + valData[nameKey] + '</button></li>';\r\n                                } else {\r\n                                    values += '<li><button type=\"button\" class=\"autocomplete__val\">' + valData + '</button></li>';\r\n                                }\r\n                            }\r\n\r\n                            this.optionsElem.innerHTML = values;\r\n                            this.open();\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    this.optionsElem.innerHTML = '';\r\n                    this.close();\r\n                }\r\n            }\r\n        },\r\n\r\n        selectVal: function (itemElem, ev) {\r\n            const valueElem = itemElem.querySelector('.autocomplete__val');\r\n\r\n            if (!valueElem) {\r\n                return;\r\n            }\r\n\r\n            if (window.Placeholder) {\r\n                Placeholder.hide(this.inputElem, true);\r\n            }\r\n\r\n            const inpVal = valueElem.innerHTML.replace(/<\\/?span>/g, '');\r\n\r\n            this.inputElem.value = inpVal;\r\n\r\n            if (ev == 'click' || ev == 'enter') {\r\n                this.onSelectSubscribers.forEach(item => {\r\n                    item(this.inputElem, inpVal, valueElem.getAttribute('data-value'), valueElem.getAttribute('data-second-value'));\r\n                });\r\n            }\r\n        },\r\n\r\n        onSelect: function (fun) {\r\n            if (typeof fun === 'function') {\r\n                this.onSelectSubscribers.push(fun);\r\n            }\r\n        },\r\n\r\n        keybinding: function (e) {\r\n            const key = e.which || e.keyCode || 0;\r\n\r\n            if (key != 40 && key != 38 && key != 13) return;\r\n\r\n            e.preventDefault();\r\n\r\n            const optionsElem = this.optionsElem,\r\n                hoverItem = optionsElem.querySelector('li.hover');\r\n\r\n            switch (key) {\r\n                case 40:\r\n                    if (hoverItem) {\r\n                        var nextItem = hoverItem.nextElementSibling;\r\n\r\n                        if (nextItem) {\r\n                            hoverItem.classList.remove('hover');\r\n                            nextItem.classList.add('hover');\r\n\r\n                            optionsElem.scrollTop = optionsElem.scrollTop + (nextItem.getBoundingClientRect().top - optionsElem.getBoundingClientRect().top);\r\n\r\n                            this.selectVal(nextItem);\r\n                        }\r\n                    } else {\r\n                        var nextItem = optionsElem.firstElementChild;\r\n\r\n                        if (nextItem) {\r\n                            nextItem.classList.add('hover');\r\n\r\n                            this.selectVal(nextItem);\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case 38:\r\n                    if (hoverItem) {\r\n                        var nextItem = hoverItem.previousElementSibling;\r\n\r\n                        if (nextItem) {\r\n                            hoverItem.classList.remove('hover');\r\n                            nextItem.classList.add('hover');\r\n\r\n                            optionsElem.scrollTop = optionsElem.scrollTop + (nextItem.getBoundingClientRect().top - optionsElem.getBoundingClientRect().top);\r\n\r\n                            this.selectVal(nextItem);\r\n                        }\r\n                    } else {\r\n                        var nextItem = optionsElem.lastElementChild;\r\n\r\n                        if (nextItem) {\r\n                            nextItem.classList.add('hover');\r\n\r\n                            optionsElem.scrollTop = 9999;\r\n\r\n                            this.selectVal(nextItem);\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case 13:\r\n                    if (hoverItem) {\r\n                        this.selectVal(hoverItem, 'enter');\r\n\r\n                        this.inputElem.blur();\r\n                    }\r\n            }\r\n        },\r\n\r\n        init: function (options) {\r\n            options = options || {};\r\n\r\n            this.opt.getAllValuesIfEmpty = (options.getAllValuesIfEmpty !== undefined) ? options.getAllValuesIfEmpty : true;\r\n\r\n            const acElems = document.querySelectorAll('.autocomplete');\r\n\r\n            for (let i = 0; i < acElems.length; i++) {\r\n                const acEl = acElems[i],\r\n                    inputElem = acEl.querySelector('.autocomplete__input');\r\n\r\n                this.setValues(inputElem, (valuesData, nameKey, valKey, secValKey, permOpened) => {\r\n                    if (!permOpened) return;\r\n\r\n                    inputElem.setAttribute('data-perm-opened', true);\r\n\r\n                    const optionsElem = acEl.querySelector('.autocomplete__options');\r\n\r\n                    let values = '';\r\n\r\n                    for (let i = 0; i < valuesData.length; i++) {\r\n                        const valData = valuesData[i];\r\n\r\n                        if (nameKey !== undefined) {\r\n                            values += '<li><button type=\"button\" data-value=\"' + valData[valKey] + '\" data-second-value=\"' + valData[secValKey] + '\" class=\"autocomplete__val\">' + valData[nameKey] + '</button></li>';\r\n                        } else {\r\n                            values += '<li><button type=\"button\" class=\"autocomplete__val\">' + valData + '</button></li>';\r\n                        }\r\n                    }\r\n\r\n                    optionsElem.innerHTML = values;\r\n                });\r\n            }\r\n\r\n            // focus event\r\n            document.addEventListener('focus', (e) => {\r\n                var elem = e.target.closest('.autocomplete__input');\r\n\r\n                if (!elem) return;\r\n\r\n                this.fieldElem = elem.closest('.autocomplete');\r\n                this.inputElem = elem;\r\n                this.optionsElem = this.fieldElem.querySelector('.autocomplete__options');\r\n\r\n                this.searchValue();\r\n            }, true);\r\n\r\n            // blur event\r\n            document.addEventListener('blur', (e) => {\r\n                const inpElem = e.target.closest('.autocomplete__input');\r\n\r\n                if (inpElem) {\r\n                    setTimeout(() => {\r\n                        this.close(inpElem);\r\n                    }, 321);\r\n                }\r\n            }, true);\r\n\r\n            // input event\r\n            document.addEventListener('input', (e) => {\r\n                if (e.target.closest('.autocomplete__input')) {\r\n                    this.searchValue();\r\n                }\r\n            });\r\n\r\n            // click event\r\n            document.addEventListener('click', (e) => {\r\n                const valElem = e.target.closest('.autocomplete__val'),\r\n                    arrElem = e.target.closest('.autocomplete__arr');\r\n\r\n\r\n                if (valElem) {\r\n                    this.inputElem = valElem.closest('.autocomplete').querySelector('.autocomplete__input');\r\n\r\n                    this.selectVal(valElem.parentElement, 'click');\r\n                } else if (arrElem) {\r\n                    if (!arrElem.closest('.autocomplete_opened')) {\r\n                        arrElem.closest('.autocomplete').querySelector('.autocomplete__input').focus();\r\n                    } else {\r\n                        this.close();\r\n                    }\r\n                }\r\n            });\r\n\r\n            // keyboard events\r\n            document.addEventListener('keydown', (e) => {\r\n                if (e.target.closest('.autocomplete_opened')) {\r\n                    this.keybinding(e);\r\n                }\r\n            });\r\n        }\r\n    };\r\n})();","; var CustomFile;\r\n\r\n(function() {\r\n    'use strict';\r\n    \r\n    //custom file\r\n    CustomFile = {\r\n        input: null,\r\n        filesObj: {},\r\n        filesArrayObj: {},\r\n        filesIsReady: null,\r\n\r\n        init: function() {\r\n            document.addEventListener('change', (e) => {\r\n                const elem = e.target.closest('input[type=\"file\"]');\r\n                \r\n                if (!elem) return;\r\n                \r\n                this.input = elem;\r\n                \r\n                this.changeInput(elem);\r\n            });\r\n            \r\n            document.addEventListener('click', (e) => {\r\n                const delBtnElem = e.target.closest('.custom-file__del-btn'),\r\n                clearBtnElem = e.target.closest('.custom-file__clear-btn'),\r\n                inputElem = e.target.closest('input[type=\"file\"]');\r\n                \r\n                if (inputElem && inputElem.multiple) inputElem.value = null;\r\n                \r\n                if (delBtnElem) {\r\n                    this.input = delBtnElem.closest('.custom-file').querySelector('.custom-file__input');\r\n\r\n                    this.input.value = null;\r\n                    \r\n                    delBtnElem.closest('.custom-file__items').removeChild(delBtnElem.closest('.custom-file__item'));\r\n                    \r\n                    this.setFilesObj(false, delBtnElem.getAttribute('data-ind'));\r\n\r\n                    if (this.filesDeleted) this.filesDeleted(this.input);\r\n                }\r\n                \r\n                if (clearBtnElem) {\r\n                    const inputElem = clearBtnElem.closest('.custom-file').querySelector('.custom-file__input');\r\n                    \r\n                    inputElem.value = null;\r\n                    \r\n                    this.clear(inputElem);\r\n                }\r\n            });\r\n        },\r\n        \r\n        clear: function(inpEl, resetVal) {\r\n            if (inpEl.hasAttribute('data-preview-elem')) {\r\n                document.querySelector(inpEl.getAttribute('data-preview-elem')).innerHTML = '';\r\n            }\r\n            \r\n            inpEl.closest('.custom-file').querySelector('.custom-file__items').innerHTML = '';\r\n\r\n            if (resetVal !== false) inpEl.value = null;\r\n            \r\n            this.filesObj[inpEl.id] = {};\r\n            this.filesArrayObj[inpEl.id] = [];\r\n            \r\n            this.labelText(inpEl);\r\n        },\r\n        \r\n        fieldClass: function(inputElem) {\r\n            const fieldElem = inputElem.closest('.custom-file');\r\n            \r\n            if (this.filesArrayObj[inputElem.id].length) {\r\n                fieldElem.classList.add('custom-file_loaded');\r\n                \r\n                if (this.filesArrayObj[inputElem.id].length >= (+inputElem.getAttribute('data-max-files'))) {\r\n                    fieldElem.classList.add('custom-file_max-loaded');\r\n                } else {\r\n                    fieldElem.classList.remove('custom-file_max-loaded');\r\n                }\r\n            } else {\r\n                fieldElem.classList.remove('custom-file_loaded');\r\n                fieldElem.classList.remove('custom-file_max-loaded');\r\n            }\r\n        },\r\n        \r\n        lockUpload: function(inputElem) {\r\n            if (inputElem.classList.contains('custom-file__input_lock') && inputElem.multiple && inputElem.hasAttribute('data-max-files') && this.filesArrayObj[inputElem.id].length >= (+inputElem.getAttribute('data-max-files'))) {\r\n                inputElem.setAttribute('disabled', 'disable');\r\n            } else {\r\n                inputElem.removeAttribute('disabled');\r\n            }\r\n        },\r\n        \r\n        labelText: function(inputElem) {\r\n            const labTxtElem = inputElem.closest('.custom-file').querySelector('.custom-file__label-text');\r\n            \r\n            if (!labTxtElem || !labTxtElem.hasAttribute('data-label-text-2')) return;\r\n            \r\n            const maxFiles = (inputElem.multiple) ? (+this.input.getAttribute('data-max-files')) : 1;\r\n            \r\n            if (this.filesArrayObj[inputElem.id].length >= maxFiles) {\r\n                if (!labTxtElem.hasAttribute('data-label-text')) {\r\n                    labTxtElem.setAttribute('data-label-text', labTxtElem.innerHTML);\r\n                }\r\n                labTxtElem.innerHTML = labTxtElem.getAttribute('data-label-text-2');\r\n            } else if (labTxtElem.hasAttribute('data-label-text')) {\r\n                labTxtElem.innerHTML = labTxtElem.getAttribute('data-label-text');\r\n            }\r\n        },\r\n        \r\n        loadPreview: function(file, fileItem) {\r\n            var reader = new FileReader(),\r\n            previewDiv;\r\n            \r\n            if (this.input.hasAttribute('data-preview-elem')) {\r\n                previewDiv = document.querySelector(this.input.getAttribute('data-preview-elem'));\r\n            } else {\r\n                previewDiv = document.createElement('div');\r\n                \r\n                previewDiv.className = 'custom-file__preview';\r\n                \r\n                fileItem.insertBefore(previewDiv, fileItem.firstChild);\r\n            }\r\n            \r\n            reader.onload = function(e) {\r\n                setTimeout(function() {\r\n                    var imgDiv = document.createElement('div');\r\n                    \r\n                    imgDiv.innerHTML = (file.type.match(/image.*/)) ? '<img src=\"'+ e.target.result +'\">' : '<img src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzAwcHgiIGhlaWdodD0iMzAwcHgiIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMDAgMzAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxyZWN0IGZpbGw9IiNCOEQ4RkYiIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIi8+DQo8cG9seWdvbiBmaWxsPSIjN0M3QzdDIiBwb2ludHM9IjUxLDI2Ny42NjY5OTIyIDExMSwxOTcgMTUxLDI0My42NjY5OTIyIDI4OC4zMzMwMDc4LDEyMSAzMDAuMTY2OTkyMiwxMzQuMTY2NTAzOSAzMDAsMzAwIDAsMzAwIA0KCTAsMjA4LjgzMzk4NDQgIi8+DQo8cG9seWdvbiBmaWxsPSIjQUZBRkFGIiBwb2ludHM9IjAuMTI1LDI2Ny4xMjUgNDguODMzNDk2MSwxNzQuNjY2OTkyMiAxMDMuNSwyNjQuNSAyMDMuODc1LDY1LjMzMzAwNzggMzAwLjE2Njk5MjIsMjU0LjUgMzAwLDMwMCANCgkwLDMwMCAiLz4NCjxjaXJjbGUgZmlsbD0iI0VBRUFFQSIgY3g9Ijc3LjAwMDI0NDEiIGN5PSI3MSIgcj0iMzYuNjY2NzQ4Ii8+DQo8L3N2Zz4NCg==\">';\r\n                    \r\n                    previewDiv.appendChild(imgDiv);\r\n\r\n                    previewDiv.classList.add('custom-file__preview_loaded');\r\n                }, 121);\r\n            }\r\n            \r\n            reader.readAsDataURL(file);\r\n        },\r\n        \r\n        changeInput: function(elem) {\r\n            var fileItems = elem.closest('.custom-file').querySelector('.custom-file__items');\r\n            \r\n            if (elem.getAttribute('data-action') == 'clear' || !elem.multiple) {\r\n                this.clear(elem, false);\r\n            }\r\n            \r\n            for (var i = 0; i < elem.files.length; i++) {\r\n                var file = elem.files[i];\r\n                \r\n                if (this.filesObj[elem.id] && this.filesObj[elem.id][file.name] != undefined) continue;\r\n                \r\n                var fileItem = document.createElement('div');\r\n                \r\n                fileItem.className = 'custom-file__item';\r\n                fileItem.innerHTML = '<div class=\"custom-file__name\">'+ file.name +'</div><button type=\"button\" class=\"custom-file__del-btn\" data-ind=\"'+ file.name +'\"></button>';\r\n                \r\n                fileItems.appendChild(fileItem);\r\n                \r\n                this.loadPreview(file, fileItem);\r\n            }\r\n            \r\n            this.setFilesObj(elem.files);\r\n\r\n            if (this.filesIsReady) {\r\n                this.filesIsReady(elem);\r\n            }\r\n        },\r\n        \r\n        setFilesObj: function(filesList, objKey) {\r\n            var inputElem = this.input;\r\n            \r\n            if (!inputElem.id.length) {\r\n                inputElem.id = 'custom-file-input-'+ new Date().valueOf();\r\n            }\r\n            \r\n            if (filesList) {\r\n                this.filesObj[inputElem.id] = this.filesObj[inputElem.id] || {};\r\n                \r\n                for (var i = 0; i < filesList.length; i++) {\r\n                    this.filesObj[inputElem.id][filesList[i].name] = filesList[i];\r\n                }\r\n            } else {\r\n                delete this.filesObj[inputElem.id][objKey];\r\n            }\r\n            \r\n            this.filesArrayObj[inputElem.id] = [];\r\n            \r\n            for (var key in this.filesObj[inputElem.id]) {\r\n                this.filesArrayObj[inputElem.id].push(this.filesObj[inputElem.id][key]);\r\n            }\r\n            \r\n            this.fieldClass(inputElem);\r\n            \r\n            this.labelText(inputElem);\r\n            \r\n            this.lockUpload(inputElem);\r\n            \r\n            ValidateForm.file(inputElem, this.filesArrayObj[inputElem.id]);\r\n        },\r\n        \r\n        inputFiles: function(inputElem) {\r\n            return this.filesArrayObj[inputElem.id] || [];\r\n        },\r\n        \r\n        getFiles: function(formElem) {\r\n            var inputFileElements = formElem.querySelectorAll('.custom-file__input'),\r\n            filesArr = [];\r\n            \r\n            if (inputFileElements.length == 1) {\r\n                filesArr = this.filesArrayObj[inputFileElements[0].id];\r\n            } else {\r\n                for (var i = 0; i < inputFileElements.length; i++) {\r\n                    if (this.filesArrayObj[inputFileElements[i].id]) {\r\n                        filesArr.push({name: inputFileElements[i].name, files: this.filesArrayObj[inputFileElements[i].id]});\r\n                    }\r\n                }\r\n            }\r\n            \r\n            return filesArr;\r\n        }\r\n    };\r\n    \r\n    //init script\r\n    document.addEventListener('DOMContentLoaded', function() {\r\n        CustomFile.init();\r\n    });\r\n})();","; var Placeholder;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Placeholder = {\r\n        elementsStr: null,\r\n\r\n        init: function (elementsStr) {\r\n            var elements = document.querySelectorAll(elementsStr);\r\n\r\n            if (!elements.length) return;\r\n\r\n            this.elementsStr = elementsStr;\r\n\r\n            for (var i = 0; i < elements.length; i++) {\r\n                var elem = elements[i];\r\n\r\n                if (elem.placeholder) {\r\n\r\n                    var elemFor = (elem.id) ? elem.id : 'placeholder-index-' + i,\r\n                        label = document.createElement('label');\r\n\r\n                    label.htmlFor = elemFor;\r\n                    label.className = 'placeholder';\r\n                    label.innerHTML = elem.placeholder;\r\n\r\n                    if (elem.hasAttribute('data-hide-placeholder')) {\r\n                        label.setAttribute('data-hide-placeholder', elem.getAttribute('data-hide-placeholder'));\r\n                    }\r\n\r\n                    elem.parentElement.insertBefore(label, elem);\r\n\r\n                    elem.removeAttribute('placeholder');\r\n                    elem.removeAttribute('data-hide-placeholder');\r\n\r\n                    if (!elem.id) {\r\n                        elem.id = elemFor;\r\n                    }\r\n\r\n                }\r\n\r\n                if (elem.value.length) {\r\n                    this.hide(elem, true);\r\n                }\r\n            }\r\n\r\n            //events\r\n            document.removeEventListener('input', this.iH);\r\n            document.removeEventListener('focus', this.fH, true);\r\n            document.removeEventListener('blur', this.bH, true);\r\n\r\n            this.iH = this.iH.bind(this);\r\n            this.fH = this.fH.bind(this);\r\n            this.bH = this.bH.bind(this);\r\n\r\n            document.addEventListener('input', this.iH);\r\n            document.addEventListener('focus', this.fH, true);\r\n            document.addEventListener('blur', this.bH, true);\r\n        },\r\n\r\n        iH: function (e) {\r\n            const elem = e.target.closest(this.elementsStr);\r\n\r\n            if (!elem) return;\r\n\r\n            if (elem.value.length > 0) {\r\n                this.hide(elem, true, 'input');\r\n            } else {\r\n                this.hide(elem, false, 'input');\r\n            }\r\n        },\r\n\r\n        fH: function (e) {\r\n            const elem = e.target.closest(this.elementsStr);\r\n\r\n            if (elem) {\r\n                this.hide(elem, true, 'focus');\r\n            }\r\n        },\r\n\r\n        bH: function (e) {\r\n            const elem = e.target.closest(this.elementsStr);\r\n\r\n            if (elem) {\r\n                this.hide(elem, false);\r\n            }\r\n        },\r\n\r\n        hide: function (elem, hide, ev) {\r\n            var label = document.querySelector('label.placeholder[for=\"' + elem.id + '\"]');\r\n\r\n            if (!label) return;\r\n\r\n            if (hide) {\r\n                if (ev == 'focus' && label.getAttribute('data-hide-placeholder') == 'input') return;\r\n\r\n                label.style.display = 'none';\r\n\r\n            } else if (!elem.value.length) {\r\n                label.style.display = '';\r\n            }\r\n        }\r\n    };\r\n\r\n})();","var Maskinput;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Maskinput = function (inputSel, type, opt) {\r\n        opt = opt || {};\r\n\r\n        let defValue = '';\r\n\r\n        this.inputElem = null;\r\n\r\n        document.addEventListener('input', (e) => {\r\n            const inpEl = e.target.closest(inputSel);\r\n\r\n            if (inpEl) {\r\n                this.inputElem = inpEl;\r\n\r\n                try {\r\n                    this[type]();\r\n                } catch (error) {\r\n                    console.log(error, 'Add valid type in {new Maskinput(this, Str type);}');\r\n                }\r\n            }\r\n        });\r\n\r\n        document.addEventListener('focus', (e) => {\r\n            const inpEl = e.target.closest(inputSel);\r\n\r\n            if (inpEl) {\r\n                this.inputElem = inpEl;\r\n\r\n                try {\r\n                    this[type]('focus');\r\n                } catch (error) {\r\n                    console.log(error, 'Add valid type in {new Maskinput(this, Str type);}');\r\n                }\r\n            }\r\n        }, true);\r\n\r\n        this.tel = function (ev) {\r\n            if (ev == 'focus' && !this.inputElem.value.length) {\r\n                this.inputElem.value = '+7(';\r\n            }\r\n\r\n            if (!/[\\+\\d\\(\\)\\-]*/.test(this.inputElem.value)) {\r\n                this.inputElem.value = defValue;\r\n            } else {\r\n                var reg = /^(\\+7?)?(\\(\\d{0,3})?(\\)\\d{0,3})?(\\-\\d{0,2}){0,2}$/,\r\n                    cursPos = this.inputElem.selectionStart;\r\n\r\n                if (!reg.test(this.inputElem.value)) {\r\n                    this.inputElem.value = this.inputElem.value.replace(/^(?:\\+7?)?\\(?(\\d{0,3})\\)?(\\d{0,3})\\-?(\\d{0,2})\\-?(\\d{0,2})$/, function (str, p1, p2, p3, p4) {\r\n                        var res = '';\r\n\r\n                        if (p4 != '') {\r\n                            res = '+7(' + p1 + ')' + p2 + '-' + p3 + '-' + p4;\r\n                        } else if (p3 != '') {\r\n                            res = '+7(' + p1 + ')' + p2 + '-' + p3;\r\n                        } else if (p2 != '') {\r\n                            res = '+7(' + p1 + ')' + p2;\r\n                        } else if (p1 != '') {\r\n                            res = '+7(' + p1;\r\n                        }\r\n\r\n                        return res;\r\n                    });\r\n                }\r\n\r\n                if (!reg.test(this.inputElem.value)) {\r\n                    this.inputElem.value = defValue;\r\n                } else {\r\n                    defValue = this.inputElem.value;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.date = function (ev) {\r\n            if (ev == 'focus') return;\r\n\r\n            if (!/^[\\d\\.]*$/.test(this.inputElem.value)) {\r\n                this.inputElem.value = defValue;\r\n            } else {\r\n                if (this.inputElem.value.length > defValue.length) {\r\n                    this.inputElem.value = this.inputElem.value.replace(/^(\\d{0,2})\\.?(\\d{0,2})\\.?(\\d{0,4})$/, function (str, p1, p2, p3) {\r\n                        let res;\r\n\r\n                        if (+p1[0] > 3 || Number(p1) > 31) return defValue;\r\n\r\n                        if (p3 != '') {\r\n                            res = p1 + '.' + p2 + '.' + p3;\r\n                        } else if (p2 != '') {\r\n                            if (+p2[0] > 1 || Number(p2) > 12) return defValue;\r\n\r\n                            if (p2.length == 2) {\r\n                                res = p1 + '.' + p2 + '.';\r\n                            } else {\r\n                                res = p1 + '.' + p2;\r\n                            }\r\n                        } else if (p1.length == 2) {\r\n                            res = p1 + '.';\r\n                        } else {\r\n                            res = p1;\r\n                        }\r\n\r\n                        return res;\r\n                    });\r\n                }\r\n\r\n                if (!/^\\d{0,2}(\\.\\d{0,2}(\\.\\d{0,4})?)?$/.test(this.inputElem.value)) {\r\n                    this.inputElem.value = defValue;\r\n                } else {\r\n                    defValue = this.inputElem.value;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.time = function (ev) {\r\n            if (ev == 'focus') return;\r\n\r\n            if (!/^[\\d\\:]*$/.test(this.inputElem.value)) {\r\n                this.inputElem.value = defValue;\r\n            } else {\r\n                const reg = /^\\d{0,2}(\\:\\d{0,2})?$/;\r\n\r\n                if (this.inputElem.value.length > defValue.length) {\r\n                    this.inputElem.value = this.inputElem.value.replace(/^(\\d{0,2})\\:?(\\d{0,2})$/, function (str, p1, p2) {\r\n                        let res;\r\n\r\n                        if (p2 != '') {\r\n                            if (+p2[0] > 5 || Number(p2) > 59) return defValue;\r\n\r\n                            res = p1 + ':' + p2;\r\n\r\n                        } else {\r\n                            if (+p1[0] > 2 || Number(p1) > 23) return defValue;\r\n\r\n                            res = p1;\r\n\r\n                            if (p1.length == 2) res += ':';\r\n                        }\r\n\r\n                        return res;\r\n                    });\r\n                }\r\n\r\n                if (!/^\\d{0,2}(\\:\\d{0,2})?$/.test(this.inputElem.value)) {\r\n                    this.inputElem.value = defValue;\r\n                } else {\r\n                    defValue = this.inputElem.value;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.gmail = function (ev) {\r\n            if (ev == 'focus') return;\r\n\r\n            if (!/[@\\w.-]*/.test(this.inputElem.value)) {\r\n                this.inputElem.value = defValue;\r\n            } else {\r\n                const reg = /^[\\w.-]*(@gmail\\.com)?$/;\r\n\r\n                if (!reg.test(this.inputElem.value)) {\r\n                    this.inputElem.value = this.inputElem.value.replace(/^([\\w.-]*)@(?:gmail\\.com)?$/, '$1@gmail.com');\r\n                }\r\n\r\n                if (!reg.test(this.inputElem.value)) {\r\n                    this.inputElem.value = defValue;\r\n                } else {\r\n                    defValue = this.inputElem.value;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.number = function (ev) {\r\n            if (ev == 'focus') return;\r\n\r\n            if (opt.maxLength && this.inputElem.value.length > opt.maxLength) {\r\n                this.inputElem.value = defValue;\r\n            } else {\r\n                if (!/^\\d*$/.test(this.inputElem.value)) {\r\n                    this.inputElem.value = defValue;\r\n                } else {\r\n                    defValue = this.inputElem.value;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.float = function (ev) {\r\n            if (ev == 'focus') return;\r\n\r\n            if (opt.maxLength && this.inputElem.value.length > opt.maxLength) {\r\n                this.inputElem.value = defValue;\r\n            } else {\r\n                if (!/^\\d[\\d.,]*?$/.test(this.inputElem.value)) {\r\n                    this.inputElem.value = defValue;\r\n                } else {\r\n                    defValue = this.inputElem.value;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.cyr = function (ev) {\r\n            if (ev == 'focus') return;\r\n\r\n            if (!/^[-\\s]*$/i.test(this.inputElem.value)) {\r\n                this.inputElem.value = defValue;\r\n            } else {\r\n                defValue = this.inputElem.value;\r\n            }\r\n        }\r\n\r\n        this.cardNumber = function (ev) {\r\n            if (ev == 'focus') return;\r\n\r\n            if (!/^[\\d\\-]*$/.test(this.inputElem.value)) {\r\n                this.inputElem.value = defValue;\r\n            } else {\r\n                if (this.inputElem.value.length > defValue.length) {\r\n                    this.inputElem.value = this.inputElem.value.replace(/^(\\d{0,4})\\-?(\\d{0,4})\\-?(\\d{0,4})\\-?(\\d{0,4})$/, function (str, p1, p2, p3, p4) {\r\n                        let res;\r\n\r\n                        if (p4 != '') {\r\n                            res = p1 + '-' + p2 + '-' + p3 + '-' + p4;\r\n\r\n                        } else if (p3 != '') {\r\n                            res = p1 + '-' + p2 + '-' + p3;\r\n\r\n                            if (p3.length == 4) res += '-';\r\n\r\n                        } else if (p2 != '') {\r\n                            res = p1 + '-' + p2;\r\n\r\n                            if (p2.length == 4) res += '-';\r\n\r\n                        } else {\r\n                            res = p1;\r\n\r\n                            if (p1.length == 4) res += '-'\r\n                        }\r\n\r\n                        return res;\r\n                    });\r\n                }\r\n\r\n                if (!/^\\d{0,4}(\\-\\d{0,4}(\\-\\d{0,4}(\\-\\d{0,4})?)?)?$/.test(this.inputElem.value)) {\r\n                    this.inputElem.value = defValue;\r\n                } else {\r\n                    defValue = this.inputElem.value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n})();","// NextFieldset.init(...params);\r\n\r\nvar NextFieldset;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    NextFieldset = {\r\n        onChange: null,\r\n        opt: {},\r\n\r\n        next: function (btnElem, fwd) {\r\n            const currentFieldset = btnElem.closest('.fieldset__item');\r\n\r\n            let nextFieldset = null;\r\n\r\n            if (fwd) {\r\n                if (this.opt.nextPending) {\r\n                    let nextEl = currentFieldset.nextElementSibling;\r\n\r\n                    if (!nextEl.classList.contains('pending')) {\r\n                        while (nextEl && !nextEl.classList.contains('pending')) {\r\n                            if (nextEl.nextElementSibling.classList.contains('pending')) {\r\n                                nextFieldset = nextEl.nextElementSibling;\r\n                            }\r\n\r\n                            nextEl = nextEl.nextElementSibling;\r\n                        }\r\n\r\n                    } else {\r\n                        nextFieldset = nextEl;\r\n                    }\r\n\r\n                } else {\r\n                    nextFieldset = currentFieldset.nextElementSibling;\r\n                }\r\n\r\n            } else {\r\n                nextFieldset = currentFieldset.previousElementSibling;\r\n            }\r\n\r\n            if (!nextFieldset) return;\r\n\r\n            const goTo = (fwd) ? ValidateForm.validate(currentFieldset) : true;\r\n\r\n            if (goTo) {\r\n                currentFieldset.classList.add('fieldset__item_hidden');\r\n                currentFieldset.classList.remove('pending');\r\n                currentFieldset.classList.add('success');\r\n                nextFieldset.classList.remove('fieldset__item_hidden');\r\n\r\n                if (this.opt.focusInput) {\r\n\t\t\t\t\tconst inpEl = nextFieldset.querySelector('input[type=\"text\"]');\r\n\r\n\t\t\t\t\tif (inpEl) inpEl.focus();\r\n\t\t\t\t}\r\n\r\n                if (this.onChange) {\r\n                    this.onChange(currentFieldset, nextFieldset);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {string} nextBtnSelector\r\n         * @param {string} prevBtnSelector\r\n         * @param {object} options\r\n         */\r\n        init: function (nextBtnSelector, prevBtnSelector, options) {\r\n            const fsEls = document.querySelectorAll('.fieldset'),\r\n                fsItemEls = document.querySelectorAll('.fieldset__item');\r\n\r\n            for (let i = 0; i < fsItemEls.length; i++) {\r\n                const itEl = fsItemEls[i];\r\n                itEl.classList.add('pending');\r\n\r\n                if (i > 0) {\r\n                    itEl.classList.add('fieldset__item_hidden');\r\n                }\r\n            }\r\n\r\n            for (let i = 0; i < fsEls.length; i++) {\r\n                const fEl = fsEls[i];\r\n                fEl.classList.add('initialized');\r\n            }\r\n\r\n            options = options || {};\r\n\r\n            this.opt.nextPending = (options.nextPending !== undefined) ? options.nextPending : false;\r\n            this.opt.focusInput = (options.focusInput !== undefined) ? options.focusInput : false;\r\n\r\n            document.addEventListener('click', (e) => {\r\n                var nextBtnElem = e.target.closest(nextBtnSelector),\r\n                    prevBtnElem = e.target.closest(prevBtnSelector);\r\n\r\n                if (nextBtnElem) {\r\n                    this.next(nextBtnElem, true);\r\n                } else if (prevBtnElem) {\r\n                    this.next(prevBtnElem, false);\r\n                }\r\n            });\r\n        }\r\n    };\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    const Number = {\r\n        contEl: null,\r\n        inputEl: null,\r\n        defValue: 0,\r\n\r\n        clickHandler: function (btnEl) {\r\n            this.contEl = btnEl.closest('.number');\r\n            this.inputEl = this.contEl.querySelector('.number__input');\r\n\r\n            const action = +btnEl.getAttribute('data-action');\r\n\r\n            let val;\r\n\r\n            if (action > 0) {\r\n                val = +this.inputEl.value + 1;\r\n            } else {\r\n                val = +this.inputEl.value - 1;\r\n\r\n                if (val < 0) {\r\n                    val = 0;\r\n                }\r\n            }\r\n\r\n            this.inputEl.value = val;\r\n            this.defValue = val;\r\n        },\r\n\r\n        inputHandler: function (inpEl) {\r\n            this.inputEl = inpEl;\r\n\r\n            if (!/^\\d*$/.test(this.inputEl.value)) {\r\n                this.inputEl.value = this.defValue;\r\n            } else {\r\n                this.defValue = this.inputEl.value;\r\n            }\r\n        },\r\n\r\n        blurHandler: function(inpEl) {\r\n            this.inputEl = inpEl;\r\n\r\n            if (!this.inputEl.value.length) {\r\n                this.inputEl.value = 0;\r\n                this.defValue = 0;\r\n            }\r\n        },\r\n\r\n        init: function () {\r\n            document.addEventListener('click', (e) => {\r\n                const btnEl = e.target.closest('.number__btn');\r\n\r\n                if (btnEl) this.clickHandler(btnEl);\r\n            });\r\n\r\n            document.addEventListener('input', (e) => {\r\n                const inpEl = e.target.closest('.number__input');\r\n\r\n                if (inpEl) this.inputHandler(inpEl);\r\n            });\r\n\r\n            document.addEventListener('blur', (e) => {\r\n                const inpEl = e.target.closest('.number__input');\r\n\r\n                if (inpEl) this.blurHandler(inpEl);\r\n            }, true);\r\n        }\r\n    };\r\n\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n        Number.init();\r\n    });\r\n\r\n})();","var ValidateForm, Form, DuplicateForm;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    // variable height textarea\r\n    var varHeightTextarea = {\r\n        setHeight: function (elem) {\r\n            var mirror = elem.parentElement.querySelector('.var-height-textarea__mirror'),\r\n                mirrorOutput = elem.value.replace(/\\n/g, '<br>');\r\n\r\n            mirror.innerHTML = mirrorOutput + '&nbsp;';\r\n        },\r\n\r\n        init: function () {\r\n            document.addEventListener('input', (e) => {\r\n                var elem = e.target.closest('.var-height-textarea__textarea');\r\n\r\n                if (!elem) {\r\n                    return;\r\n                }\r\n\r\n                this.setHeight(elem);\r\n            });\r\n        }\r\n    };\r\n\r\n    // form\r\n    Form = {\r\n        formSelector: null,\r\n        onSubmitSubscribers: [],\r\n\r\n        sH: function (e) {\r\n            const formElem = e.target.closest(this.formSelector);\r\n\r\n            if (formElem) {\r\n                this.submitForm(formElem, e);\r\n            }\r\n        },\r\n\r\n        kH: function (e) {\r\n            const formElem = e.target.closest(this.formSelector);\r\n\r\n            if (!formElem) return;\r\n\r\n            const key = e.code;\r\n\r\n            if (e.target.closest('.fieldset__item') && key == 'Enter') {\r\n                e.preventDefault();\r\n                e.target.closest('.fieldset__item').querySelector('.js-next-fieldset-btn').click();\r\n\r\n            } else if (e.ctrlKey && key == 'Enter') {\r\n                e.preventDefault();\r\n                this.submitForm(formElem, e);\r\n            }\r\n        },\r\n\r\n        init: function (formSelector) {\r\n            if (!document.querySelector(formSelector)) return;\r\n\r\n            this.formSelector = formSelector;\r\n\r\n            initScripst();\r\n\r\n            ValidateForm.init(formSelector);\r\n\r\n            // submit event\r\n            document.removeEventListener('submit', this.sH);\r\n\r\n            this.sH = this.sH.bind(this);\r\n            document.addEventListener('submit', this.sH);\r\n\r\n            // keyboard event\r\n            document.removeEventListener('keydown', this.kH);\r\n\r\n            this.kH = this.kH.bind(this);\r\n            document.addEventListener('keydown', this.kH);\r\n        },\r\n\r\n        submitForm: function (formElem, e) {\r\n            if (!ValidateForm.validate(formElem)) {\r\n                if (e) e.preventDefault();\r\n\r\n                const errFieldEl = formElem.querySelector('.field-error');\r\n\r\n                if (errFieldEl.hasAttribute('data-error-index')) {\r\n                    ValidateForm.customFormErrorTip(formElem, errFieldEl.getAttribute('data-form-error-text-' + errFieldEl.getAttribute('data-error-index')));\r\n                } else if (errFieldEl.hasAttribute('data-form-error-text')) {\r\n                    ValidateForm.customFormErrorTip(formElem, errFieldEl.getAttribute('data-form-error-text'));\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            formElem.classList.add('form_sending');\r\n\r\n            if (!this.onSubmitSubscribers.length) {\r\n                formElem.submit();\r\n                return;\r\n            }\r\n\r\n            let fReturn;\r\n\r\n            this.onSubmitSubscribers.forEach(item => {\r\n                fReturn = item(formElem, (obj) => {\r\n                    obj = obj || {};\r\n\r\n                    setTimeout(() => {\r\n                        this.actSubmitBtn(obj.unlockSubmitButton, formElem);\r\n                    }, 321);\r\n\r\n                    formElem.classList.remove('form_sending');\r\n\r\n                    if (obj.clearForm == true) {\r\n                        this.clearForm(formElem);\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (fReturn === true) {\r\n                formElem.submit();\r\n            } else {\r\n                if (e) e.preventDefault();\r\n                this.actSubmitBtn(false, formElem);\r\n            }\r\n        },\r\n\r\n        onSubmit: function (fun) {\r\n            if (typeof fun === 'function') {\r\n                this.onSubmitSubscribers.push(fun);\r\n            }\r\n        },\r\n\r\n        clearForm: function (formElem) {\r\n            const elements = formElem.querySelectorAll('input[type=\"text\"], input[type=\"number\"],input[type=\"tel\"], input[type=\"password\"], textarea');\r\n\r\n            for (var i = 0; i < elements.length; i++) {\r\n                var elem = elements[i];\r\n                elem.value = '';\r\n\r\n                if (window.Placeholder) {\r\n                    Placeholder.hide(elem, false);\r\n                }\r\n            }\r\n\r\n            if (window.Select) {\r\n                Select.reset();\r\n            }\r\n\r\n            if (window.CustomFile) {\r\n                const inpFileEls = formElem.querySelectorAll('.custom-file__input');\r\n\r\n                for (let i = 0; i < inpFileEls.length; i++) {\r\n                    CustomFile.clear(inpFileEls[i]);\r\n                }\r\n            }\r\n\r\n            const textareaMirrors = formElem.querySelectorAll('.var-height-textarea__mirror');\r\n\r\n            for (var i = 0; i < textareaMirrors.length; i++) {\r\n                textareaMirrors[i].innerHTML = '';\r\n            }\r\n        },\r\n\r\n        actSubmitBtn: function (state, formElem) {\r\n            var elements = formElem.querySelectorAll('button[type=\"submit\"], input[type=\"submit\"]');\r\n\r\n            for (var i = 0; i < elements.length; i++) {\r\n                var elem = elements[i];\r\n\r\n                if (state) {\r\n                    elem.removeAttribute('disabled');\r\n                } else {\r\n                    elem.setAttribute('disabled', 'disable');\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // bind labels\r\n    function BindLabels(elementsStr) {\r\n        var elements = document.querySelectorAll(elementsStr);\r\n\r\n        for (var i = 0; i < elements.length; i++) {\r\n            var elem = elements[i],\r\n                label = elem.parentElement.querySelector('label'),\r\n                forID = (elem.hasAttribute('id')) ? elem.id : 'keylabel-' + i;\r\n\r\n            if (label && !label.hasAttribute('for')) {\r\n                label.htmlFor = forID;\r\n                elem.id = forID;\r\n            }\r\n        }\r\n    }\r\n\r\n    // duplicate form\r\n    DuplicateForm = {\r\n        add: function (btnElem) {\r\n            var modelElem = (btnElem.hasAttribute('data-form-model')) ? document.querySelector(btnElem.getAttribute('data-form-model')) : null,\r\n                destElem = (btnElem.hasAttribute('data-duplicated-dest')) ? document.querySelector(btnElem.getAttribute('data-duplicated-dest')) : null;\r\n\r\n            if (!modelElem || !destElem) return;\r\n\r\n            var duplicatedDiv = document.createElement('div');\r\n\r\n            duplicatedDiv.className = 'duplicated';\r\n\r\n            duplicatedDiv.innerHTML = modelElem.innerHTML;\r\n\r\n            destElem.appendChild(duplicatedDiv);\r\n\r\n            var dupicatedElements = destElem.querySelectorAll('.duplicated');\r\n\r\n            for (var i = 0; i < dupicatedElements.length; i++) {\r\n                var dupicatedElem = dupicatedElements[i],\r\n                    labelElements = dupicatedElem.querySelectorAll('label'),\r\n                    inputElements = dupicatedElem.querySelectorAll('input');\r\n\r\n                for (var j = 0; j < labelElements.length; j++) {\r\n                    var elem = labelElements[j];\r\n\r\n                    if (elem.htmlFor != '') {\r\n                        elem.htmlFor += '-' + i + '-' + j;\r\n                    }\r\n                }\r\n\r\n                for (var j = 0; j < inputElements.length; j++) {\r\n                    var elem = inputElements[j];\r\n\r\n                    if (elem.id != '') {\r\n                        elem.id += '-' + i + '-' + j;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (window.Select) Select.init('.custom-select');\r\n\r\n            if (this.onChange) this.onChange();\r\n        },\r\n\r\n        remove: function (btnElem) {\r\n            var duplElem = btnElem.closest('.duplicated');\r\n\r\n            if (duplElem) {\r\n                duplElem.innerHTML = '';\r\n            }\r\n\r\n            if (this.onChange) this.onChange();\r\n        },\r\n\r\n        init: function (addBtnSelector, removeBtnSelector) {\r\n            this.addBtnSelector = addBtnSelector;\r\n            this.removeBtnSelector = removeBtnSelector;\r\n\r\n            // click event\r\n            document.removeEventListener('click', this.clickHandler);\r\n\r\n            this.clickHandler = this.clickHandler.bind(this);\r\n            document.addEventListener('click', this.clickHandler);\r\n        },\r\n\r\n        clickHandler: function (e) {\r\n            const addBtnElem = e.target.closest(this.addBtnSelector),\r\n                removeBtnElem = e.target.closest(this.removeBtnSelector);\r\n\r\n            if (addBtnElem) {\r\n                this.add(addBtnElem);\r\n            } else if (removeBtnElem) {\r\n                this.remove(removeBtnElem);\r\n            }\r\n        }\r\n    };\r\n\r\n    // set tabindex\r\n    /*function SetTabindex(elementsStr) {\r\n        var elements = document.querySelectorAll(elementsStr);\r\n    \t\r\n        for (let i = 0; i < elements.length; i++) {\r\n            var elem = elements[i];\r\n        \t\r\n            if (!elemIsHidden(elem)) {\r\n                elem.setAttribute('tabindex', i + 1);\r\n            }\r\n        }\r\n    }*/\r\n\r\n    // init scripts\r\n    function initScripst() {\r\n        BindLabels('input[type=\"text\"], input[type=\"number\"], input[type=\"tel\"], input[type=\"checkbox\"], input[type=\"radio\"]');\r\n        if (window.Placeholder) Placeholder.init('input[type=\"text\"], input[type=\"number\"], input[type=\"tel\"], input[type=\"password\"], textarea');\r\n        // SetTabindex('input[type=\"text\"], input[type=\"password\"], textarea');\r\n        varHeightTextarea.init();\r\n        DuplicateForm.init('.js-dupicate-form-btn', '.js-remove-dupicated-form-btn');\r\n        if (window.Select) Select.init('.custom-select');\r\n        if (window.Checkbox) Checkbox.init({ focusOnTarget: true });\r\n    }\r\n})();","/*\r\n* call new Accord(Str button selector [, autoScroll viewport width]).init();\r\n*/\r\nvar Accord;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Accord = function (btnSel, autoScroll) {\r\n        this.btnSel = btnSel;\r\n        this.initialized = false;\r\n        this.autoScroll = autoScroll;\r\n\r\n        this.init = function () {\r\n            if (this.initialized || !document.querySelectorAll('.accord').length) return;\r\n\r\n            this.initialized = true;\r\n\r\n            document.addEventListener('click', (e) => {\r\n                const btnEl = e.target.closest(this.btnSel);\r\n\r\n                if (!btnEl || btnEl.closest('.accord_closed')) return;\r\n\r\n                e.preventDefault();\r\n\r\n                this.toggle(btnEl);\r\n            });\r\n        }\r\n\r\n        this.toggle = function (elem) {\r\n            const contentElem = elem.nextElementSibling;\r\n\r\n            if (elem.classList.contains('accord__button_active')) {\r\n                contentElem.style.height = 0;\r\n\r\n                elem.classList.remove('accord__button_active');\r\n\r\n            } else {\r\n                const mainElem = elem.closest('.accord'),\r\n                    allButtonElem = mainElem.querySelectorAll('.accord__button'),\r\n                    allContentElem = mainElem.querySelectorAll('.accord__content');\r\n\r\n                for (let i = 0; i < allButtonElem.length; i++) {\r\n                    allButtonElem[i].classList.remove('accord__button_active');\r\n                    allContentElem[i].style.height = 0;\r\n                }\r\n\r\n                contentElem.style.height = contentElem.scrollHeight + 'px';\r\n\r\n                elem.classList.add('accord__button_active');\r\n\r\n                if (this.autoScroll && window.innerWidth <= this.autoScroll) {\r\n                    this.scroll(elem);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.scroll = function (elem) {\r\n            setTimeout(function () {\r\n                $('html, body').stop().animate({ scrollTop: $(elem).position().top - 20 }, 721);\r\n            }, 321);\r\n        }\r\n    };\r\n})();","/*\r\nAjax.init(Str button selector);\r\n\r\nAjax.success = function(response) {\r\n    // code...\r\n}\r\n*/\r\n\r\n; var Ajax;\r\n\r\n(function () {\r\n    \"use strict\";\r\n\r\n    Ajax = {\r\n        success: null,\r\n\r\n        send: function (elem) {\r\n            ajax({\r\n                url: elem.getAttribute('data-action'),\r\n                send: elem.getAttribute('data-send'),\r\n                success: function (response) {\r\n                    if (this.success) {\r\n                        this.success(response);\r\n                    }\r\n                },\r\n                error: function (response) {\r\n\r\n                }\r\n            });\r\n        },\r\n\r\n        init: function (elementStr) {\r\n            document.addEventListener('click', (e) => {\r\n                var elem = e.target.closest(elementStr);\r\n\r\n                if (!elem) {\r\n                    return;\r\n                }\r\n\r\n                e.preventDefault();\r\n\r\n                this.send(elem);\r\n            });\r\n        }\r\n    };\r\n})();","/*\r\ncall to init:\r\nMore.init(Str button selector);\r\n*/\r\nvar More;\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\tMore = {\r\n\t\ttoggle: function(elem) {\r\n\t\t\tvar contentElem = elem.previousElementSibling;\r\n\r\n\t\t\tif (elem.classList.contains('active')) {\r\n\t\t\t\tcontentElem.style.height = contentElem.getAttribute('data-height') +'px';\r\n\r\n\t\t\t\telem.classList.remove('active');\r\n\t\t\t} else {\r\n\t\t\t\tcontentElem.setAttribute('data-height', contentElem.offsetHeight);\r\n\r\n\t\t\t\tcontentElem.style.height = contentElem.scrollHeight +'px';\r\n\r\n\t\t\t\telem.classList.add('active');\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tvar btnTxt = elem.innerHTML;\r\n\r\n\t\t\t\telem.innerHTML = elem.getAttribute('data-btn-text');\r\n\r\n\t\t\t\telem.setAttribute('data-btn-text', btnTxt);\r\n\t\t\t}, 321);\r\n\t\t},\r\n\r\n\t\tinit: function(elementStr) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar elem = e.target.closest(elementStr);\r\n\r\n\t\t\t\tif (!elem) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.toggle(elem);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","/*\r\ncall to init:\r\nTab.init({\r\n    container: '.tab',\r\n    button: '.tab__button',\r\n    item: '.tab__item',\r\n    changeOnHover: true // default: false\r\n});\r\n*/\r\n; var Tab;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Tab = {\r\n        options: null,\r\n\r\n        change: function (btnElem) {\r\n            if (btnElem.classList.contains('active')) return;\r\n\r\n            const contElem = btnElem.closest(this.options.container),\r\n                btnElements = contElem.querySelectorAll(this.options.button),\r\n                tabItemElements = contElem.querySelectorAll(this.options.item);\r\n\r\n            //remove active state\r\n            for (let i = 0; i < btnElements.length; i++) {\r\n                btnElements[i].classList.remove('active');\r\n            }\r\n\r\n            for (let i = 0; i < tabItemElements.length; i++) {\r\n                tabItemElements[i].classList.remove('active');\r\n            }\r\n\r\n            //get current tab item\r\n            const tabItemElem = contElem.querySelector(this.options.item + '[data-index=\"' + btnElem.getAttribute('data-index') + '\"]');\r\n\r\n            //set active state\r\n            tabItemElem.classList.add('active');\r\n\r\n            btnElem.classList.add('active');\r\n\r\n            //set height\r\n            this.setHeight(tabItemElem);\r\n        },\r\n\r\n        setHeight: function (tabItemElem) {\r\n            tabItemElem.parentElement.style.height = tabItemElem.offsetHeight + 'px';\r\n        },\r\n\r\n        reInit: function () {\r\n            if (!this.options) return;\r\n\r\n            const contElements = document.querySelectorAll(this.options.container);\r\n\r\n            for (let i = 0; i < contElements.length; i++) {\r\n                this.setHeight(contElements[i].querySelector(this.options.item + '.active'));\r\n            }\r\n        },\r\n\r\n        init: function (options) {\r\n            const contElements = document.querySelectorAll(options.container);\r\n\r\n            if (!contElements.length) return;\r\n\r\n            this.options = options;\r\n\r\n            //init tabs\r\n            for (let i = 0; i < contElements.length; i++) {\r\n                const contElem = contElements[i],\r\n                    btnElements = contElem.querySelectorAll(options.button),\r\n                    tabItemElements = contElem.querySelectorAll(options.item),\r\n                    tabItemElemActive = contElem.querySelector(this.options.item + '.active');\r\n\r\n                this.setHeight(tabItemElemActive);\r\n\r\n                for (let i = 0; i < btnElements.length; i++) {\r\n                    btnElements[i].setAttribute('data-index', i);\r\n\r\n                    tabItemElements[i].setAttribute('data-index', i);\r\n                }\r\n            }\r\n\r\n            //btn event\r\n            if (options.changeOnHover) {\r\n                document.addEventListener('mouseover', (e) => {\r\n                    const btnElem = e.target.closest(options.button);\r\n\r\n                    if (!btnElem) return;\r\n\r\n                    this.change(btnElem);\r\n                });\r\n                \r\n            } else {\r\n                document.addEventListener('click', (e) => {\r\n                    const btnElem = e.target.closest(options.button);\r\n\r\n                    if (!btnElem) return;\r\n\r\n                    e.preventDefault();\r\n\r\n                    this.change(btnElem);\r\n                });\r\n            }\r\n\r\n        }\r\n    };\r\n})();","/*\r\nnew Alert({\r\n    content: 'We use coockie',\r\n    position: 'top', // default - bottom\r\n    showOnce: true, // default - false\r\n    closeBtn: false // default - true\r\n    addClass: 'alert-class'\r\n});\r\n*/\r\n\r\n; var Alert;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var alertIndex = 0;\r\n\r\n    Alert = function (opt) {\r\n        opt = opt || {};\r\n\r\n        opt.closeBtn = (opt.closeBtn !== undefined) ? opt.closeBtn : true;\r\n\r\n        var alertId = 'alert-id-' + (alertIndex++);\r\n\r\n        if (opt.showOnce) {\r\n            let hiddenAlert = window.localStorage.getItem('notShowAlert=' + alertId);\r\n\r\n            if (hiddenAlert !== null && hiddenAlert === 'true') {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        //add alert to DOM\r\n        var alertElem = document.createElement('div');\r\n\r\n        alertElem.className = 'alert';\r\n\r\n        alertElem.id = alertId;\r\n\r\n        alertElem.innerHTML = '<div></div>' + ((opt.closeBtn) ? '<button class=\"js-alert-close alert__close-btn\"></button>' : '');\r\n\r\n        document.body.appendChild(alertElem);\r\n\r\n        if (opt.position == 'top') {\r\n            alertElem.classList.add('alert_top');\r\n        }\r\n\r\n        if (opt.addClass) {\r\n            alertElem.classList.add(opt.addClass);\r\n        }\r\n\r\n        // set content\r\n        this.setContent = function (content) {\r\n            alertElem.querySelector('div').innerHTML = content;\r\n        }\r\n\r\n        if (opt.content) {\r\n            this.setContent(opt.content);\r\n        }\r\n\r\n        // hide permanently\r\n        function hidePermanently() {\r\n            window.localStorage.setItem('notShowAlert=' + alertId, 'true');\r\n        }\r\n\r\n        // hide\r\n        function hide() {\r\n            alertElem.classList.add('alert_hidden');\r\n\r\n            if (opt.showOnce) {\r\n                hidePermanently();\r\n            }\r\n        }\r\n\r\n        alertElem.addEventListener('click', function (e) {\r\n            if (e.target.closest('.js-alert-close')) {\r\n                hide();\r\n            }\r\n        });\r\n    }\r\n})();","/*\r\nToolTip.init({\r\n    element: '.js-tooltip',\r\n    notHide: true // def: false,\r\n    evClick: true // def: false\r\n});\r\n\r\nToolTip.onShow = function(btnEl, tooltipDivEl) {\r\n\r\n}\r\n*/\r\n\r\n; var ToolTip;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    ToolTip = {\r\n        tooltipDiv: null,\r\n        tooltipClass: null,\r\n        canBeHidden: false,\r\n        position: {},\r\n        onShow: null,\r\n        opt: null,\r\n\r\n        init: function (opt) {\r\n            this.opt = opt || {};\r\n\r\n            this.opt.notHide = (opt.notHide !== undefined) ? opt.notHide : false;\r\n            this.opt.evClick = (opt.evClick !== undefined) ? opt.evClick : false;\r\n\r\n            let mouseOver = (e) => {\r\n                if (this.canBeHidden) {\r\n                    if (!e.target.closest(opt.element) && !e.target.closest('.tooltip')) {\r\n                        this.hide();\r\n\r\n                        this.canBeHidden = false;\r\n                    }\r\n                } else {\r\n                    const elem = e.target.closest(opt.element);\r\n\r\n                    if (elem) {\r\n                        this.show(elem);\r\n                    }\r\n                }\r\n            }\r\n\r\n            let mouseClick = (e) => {\r\n                const elem = e.target.closest(opt.element);\r\n\r\n                if (elem) {\r\n                    e.preventDefault();\r\n\r\n                    this.hide();\r\n                    this.show(elem);\r\n                }\r\n            }\r\n\r\n            if (document.ontouchstart !== undefined || this.opt.evClick) {\r\n                document.addEventListener('click', mouseClick);\r\n\r\n            } else {\r\n                document.addEventListener('mouseover', mouseOver);\r\n\r\n                document.addEventListener('click', function (e) {\r\n                    if (e.target.closest(opt.element)) e.preventDefault();\r\n                });\r\n            }\r\n\r\n            document.addEventListener('click', (e) => {\r\n                const closeBtn = e.target.closest('.tooltip__close');\r\n\r\n                if (closeBtn) this.hide();\r\n            });\r\n\r\n            //add tooltip to DOM\r\n            this.tooltipDiv = document.createElement('div');\r\n            this.tooltipDiv.className = 'tooltip';\r\n\r\n            document.body.appendChild(this.tooltipDiv);\r\n        },\r\n\r\n        show: function (elem) {\r\n            let html = elem.hasAttribute('data-tooltip') ? elem.getAttribute('data-tooltip').replace(/\\[(\\/?\\w+)\\]/gi, '<$1>') : '';\r\n\r\n            if (this.opt.evClick) html += '<button type=\"button\" class=\"tooltip__close\"></button>';\r\n\r\n            this.tooltipDiv.innerHTML = html;\r\n\r\n            this.tooltipClass = elem.getAttribute('data-tooltip-class');\r\n\r\n            if (window.innerWidth < 750) {\r\n                this.position.X = 'center';\r\n            } else if (elem.hasAttribute('data-tooltip-pos-x')) {\r\n                this.position.X = elem.getAttribute('data-tooltip-pos-x');\r\n            } else {\r\n                this.position.X = 'leftIn';\r\n            }\r\n\r\n            if (elem.hasAttribute('data-tooltip-pos-y')) {\r\n                this.position.Y = elem.getAttribute('data-tooltip-pos-y');\r\n            }\r\n\r\n            if (!this.position.Y) this.position.Y = 'bottomOut';\r\n\r\n            if (this.tooltipClass) this.tooltipDiv.classList.add(this.tooltipClass);\r\n\r\n            let bubleStyle = this.tooltipDiv.style,\r\n                elemRect = elem.getBoundingClientRect(),\r\n                winW = window.innerWidth,\r\n                coordX,\r\n                coordY;\r\n\r\n            switch (this.position.X) {\r\n                case 'center':\r\n                    coordX = (elemRect.left + ((elemRect.right - elemRect.left) / 2)) - (this.tooltipDiv.offsetWidth / 2);\r\n\r\n                    if (coordX < 10) {\r\n                        coordX = 10;\r\n                    }\r\n\r\n                    bubleStyle.left = coordX + 'px';\r\n                    bubleStyle.marginLeft = '0';\r\n                    bubleStyle.marginRight = '0';\r\n                    break;\r\n\r\n                case 'leftIn':\r\n                    coordX = elemRect.left;\r\n                    bubleStyle.left = coordX + 'px';\r\n                    break;\r\n\r\n                case 'rightIn':\r\n                    coordX = window.innerWidth - elemRect.right;\r\n                    bubleStyle.right = coordX + 'px';\r\n                    break;\r\n\r\n                default:\r\n                    coordX = elemRect.right;\r\n                    bubleStyle.left = coordX + 'px';\r\n                    break;\r\n            }\r\n\r\n            if ((this.tooltipDiv.offsetWidth + coordX) > winW) {\r\n                bubleStyle.width = (winW - coordX - 10) + 'px';\r\n            }\r\n\r\n            // if (tooltipPotentWidth < tooltipMinWidth) {\r\n            // \ttooltipPotentWidth = tooltipMinWidth;\r\n\r\n            // \tcoordX = window.innerWidth - tooltipMinWidth - 10;\r\n            // }\r\n\r\n            switch (this.position.Y) {\r\n                case 'bottomIn':\r\n                    coordY = elemRect.bottom + window.pageYOffset - this.tooltipDiv.offsetHeight;\r\n                    break;\r\n\r\n                case 'bottomOut':\r\n                    coordY = elemRect.bottom + window.pageYOffset;\r\n                    break;\r\n\r\n                default:\r\n                    coordY = elemRect.top + window.pageYOffset - this.tooltipDiv.offsetHeight;\r\n                    break;\r\n            }\r\n\r\n            if (coordY < 0) {\r\n                coordY = 0;\r\n                bubleStyle.marginTop = '0';\r\n            }\r\n\r\n            bubleStyle.top = coordY + 'px';\r\n\r\n            if (this.onShow) {\r\n                this.onShow(elem, this.tooltipDiv);\r\n            }\r\n\r\n            this.tooltipDiv.classList.add('tooltip_visible');\r\n\r\n            this.canBeHidden = true;\r\n\r\n            if (document.ontouchstart !== undefined) {\r\n                document.addEventListener('touchstart', this.mouseOut.bind(this));\r\n\r\n            } else if (this.opt.evClick) {\r\n                document.addEventListener('wheel', this.mouseOut.bind(this));\r\n            }\r\n        },\r\n\r\n        hide: function () {\r\n            if (this.opt.notHide) return;\r\n\r\n            this.tooltipDiv.classList.remove('tooltip_visible');\r\n            this.tooltipDiv.removeAttribute('style');\r\n            this.tooltipDiv.innerHTML = '';\r\n            this.position = {};\r\n\r\n            if (this.tooltipClass) {\r\n                this.tooltipDiv.classList.remove(this.tooltipClass);\r\n\r\n                this.tooltipClass = null;\r\n            }\r\n        },\r\n\r\n        mouseOut: function (e) {\r\n            if (this.canBeHidden && !e.target.closest(this.opt.element) && !e.target.closest('.tooltip')) {\r\n                this.hide();\r\n\r\n                this.canBeHidden = false;\r\n\r\n                document.removeEventListener('touchstart', this.mouseOut);\r\n                document.removeEventListener('wheel', this.mouseOut);\r\n            }\r\n        }\r\n    };\r\n})();","/*\r\nAnchor.init(Str anchor selector[, Int duration ms[, Int shift px]]);\r\n*/\r\n\r\nvar Anchor;\r\n\r\n(function () {\r\n    \"use strict\";\r\n\r\n    Anchor = {\r\n        duration: 1000,\r\n        shift: 0,\r\n\r\n        scroll: function (anchorId, e) {\r\n            const anchorSectionElem = document.getElementById(anchorId + '-anchor');\r\n\r\n            if (!anchorSectionElem) {\r\n                return;\r\n            }\r\n\r\n            if (e) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            let scrollTo = anchorSectionElem.getBoundingClientRect().top + window.pageYOffset,\r\n                ownShift = +anchorSectionElem.getAttribute('data-shift') || 0;\r\n\r\n            if (window.innerWidth < 1000 && anchorSectionElem.hasAttribute('data-sm-shift')) {\r\n                ownShift = +anchorSectionElem.getAttribute('data-sm-shift');\r\n            }\r\n\r\n            scrollTo = scrollTo - this.shift - ownShift;\r\n\r\n            animate(function (progress) {\r\n                window.scrollTo(0, ((scrollTo * progress) + ((1 - progress) * window.pageYOffset)));\r\n            }, this.duration, 'easeInOutQuad');\r\n        },\r\n\r\n        init: function (elementStr, duration, shift) {\r\n            if (duration) {\r\n                this.duration = duration;\r\n            }\r\n\r\n            if (shift) {\r\n                this.shift = shift;\r\n            }\r\n\r\n            //click anchor\r\n            document.addEventListener('click', (e) => {\r\n                var elem = e.target.closest(elementStr);\r\n\r\n                if (elem) {\r\n                    const anchId = (elem.hasAttribute('href')) ? elem.getAttribute('href').split('#')[1] : elem.getAttribute('data-anchor-id');\r\n\r\n                    this.scroll(anchId, e);\r\n                }\r\n            });\r\n\r\n            //hash anchor\r\n            if (window.location.hash) {\r\n                window.addEventListener('load', () => {\r\n                    this.scroll(window.location.hash.split('#')[1]);\r\n                });\r\n            }\r\n        }\r\n    };\r\n})();","/*\r\nvar diagram = new Diagram({\r\n    canvasId: Str elem id,\r\n    charts: [\r\n        {\r\n            value: Int,\r\n            color: Str,\r\n            width: Int px,\r\n            numContId: Str elem id\r\n        }\r\n    ],\r\n    maxValue: Int,\r\n    animate: true\r\n});\r\n\r\ndiagram.animate(Int duration ms);\r\n*/\r\n\r\n; var Diagram;\r\n\r\n(function() {\r\n    'use strict';\r\n    \r\n    Diagram = function(options) {\r\n        var canvasElement = document.getElementById(options.canvasId);\r\n        \r\n        this.animate = function(duration) {\r\n            if (!canvasElement) {\r\n                return;\r\n            }\r\n            \r\n            const chartValues = options.charts.map((obj) => obj.value);\r\n            \r\n            animate((progress) => {\r\n                this.ctx.clearRect(0, 0, (this.center.x * 2), (this.center.y * 2));\r\n                this.prevChartsWidth = 0;\r\n                \r\n                options.charts.forEach((chart, i) => {\r\n                    chart.value = chartValues[i] * progress;\r\n                    \r\n                    drawChart(chart, i);\r\n                });\r\n                \r\n            }, duration, 'easeInOutQuad');\r\n        }\r\n        \r\n        if (!canvasElement) {\r\n            return;\r\n        }\r\n        \r\n        canvasElement.width = canvasElement.offsetWidth;\r\n        canvasElement.height = canvasElement.offsetHeight;\r\n        \r\n        this.ctx = canvasElement.getContext('2d');\r\n        this.canvasWidth = canvasElement.width;\r\n        this.center = {x: canvasElement.width / 2, y: canvasElement.height / 2};\r\n        this.prevChartsWidth = 0;\r\n        \r\n        const startAngle = 1.5 * Math.PI;\r\n        \r\n        var drawChart = (chart, i) => {\r\n            var endAngle = 2 * Math.PI * chart.value / options.maxValue + startAngle,\r\n            radius = this.canvasWidth / 2 - chart.width / 2 - (chart.offset || 0) - this.prevChartsWidth;\r\n            \r\n            this.prevChartsWidth += chart.width + (chart.offset || 0);\r\n            \r\n            this.ctx.beginPath();\r\n            this.ctx.arc(this.center.x, this.center.y, radius, startAngle, endAngle);\r\n            this.ctx.lineWidth = chart.width;\r\n            this.ctx.strokeStyle = chart.color;\r\n            this.ctx.stroke();\r\n            \r\n            outputNum(chart);\r\n        }\r\n        \r\n        if (!options.animate) {\r\n            options.charts.forEach((chart, i) => {\r\n                drawChart(chart, i);\r\n            });\r\n        }\r\n        \r\n        function outputNum(chart) {\r\n            var numElem = document.getElementById(chart.numContId);\r\n            \r\n            if (numElem) {\r\n                numElem.innerHTML = chart.value.toFixed(0);\r\n            }\r\n        }\r\n    }\r\n})();","var Numberspin;\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\tNumberspin = function(options) {\r\n\t\tconst opt = options || {};\r\n\r\n\t\tthis.elements = document.querySelectorAll(opt.elemSel);\r\n\t\tthis.values = [];\r\n\r\n\t\tfor (var i = 0; i < this.elements.length; i++) {\r\n\t\t\tthis.values[i] = +this.elements[i].getAttribute('data-value');\r\n\t\t\tthis.elements[i].innerHTML = 0;\r\n\t\t}\r\n\r\n\t\tfunction draw(elem, num) {\r\n\t\t\tif (opt.format) {\r\n\t\t\t\tconst numStr = String(num);\r\n\r\n\t\t\t\telem.innerHTML = numStr.replace(/(\\d)?(?=(\\d{3})+$)/g, '$1 ');\r\n\t\t\t} else {\r\n\t\t\t\telem.innerHTML = num;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.animate = function(duration) {\r\n\t\t\tanimate((progress) => {\r\n\t\t\t\tfor (var i = 0; i < this.elements.length; i++) {\r\n\t\t\t\t\tlet num = Math.round(this.values[i] * progress);\r\n\r\n\t\t\t\t\tif (num < 0) {\r\n\t\t\t\t\t\tnum = 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdraw(this.elements[i], num);\r\n\t\t\t\t}\r\n\t\t\t}, duration);\r\n\t\t}\r\n\t}\r\n})();\r\n\r\n\r\n/*\r\nfunction Numberspin(elem, opt) {\r\n\tvar def = {\r\n\t\tanimation: 1\r\n\t},\r\n\topt = opt || {},\r\n\toptions = $.extend({}, def, opt),\r\n\tinterval = null,\r\n\tanimate = false,\r\n\t$Elem = $(elem),\r\n\tcurVal = 0,\r\n\tval = $Elem.html().replace(/[\\s]/g, ''),\r\n\tpattern = val.match(/[\\.,]/),\r\n\tendVal = +val.replace(/[\\D]/g, '');\r\n\r\n\t$Elem.html(0);\r\n\r\n\tthis.start = function() {\r\n\t\t\r\n\t\tif (!animate) {\r\n\t\t\tanimate = true;\r\n\t\t\tspin();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction spin() {\r\n\r\n\t\tinterval = setTimeout(function run() {\r\n\r\n\t\t\t\tif (curVal < endVal) {\r\n\r\n\t\t\t\t\tif (options.animation == 1) {\r\n\r\n\t\t\t\t\t\tvar d = endVal - curVal;\r\n\r\n\t\t\t\t\t\tif (d > 1213214321321) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 1213214321321;\r\n\t\t\t\t\t\t} else if (d > 3214321321) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 3214321321;\r\n\t\t\t\t\t\t} else if (d > 4321321) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 4321321;\r\n\t\t\t\t\t\t} else if (d > 321321) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 321321;\r\n\t\t\t\t\t\t} else if (d > 32321) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 32321;\r\n\t\t\t\t\t\t} else if (d > 2321) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 2321;\r\n\t\t\t\t\t\t} else if (d > 1321) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 1321;\r\n\t\t\t\t\t\t} else if (d > 321) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 321;\r\n\t\t\t\t\t\t} else if (d > 21) {\r\n\t\t\t\t\t\t\tcurVal = curVal + 21;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcurVal++;\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t} else if (options.animation == 2) {\r\n\r\n\t\t\t\t\t\tvar endValArr = String(endVal).split(''),\r\n\t\t\t\t\t\tcurValArr = String(curVal).split('');\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < endValArr.length; i++) {\r\n\t\t\t\t\t\t\tif (curValArr[i]) {\r\n\t\t\t\t\t\t\t\tif (curValArr[i] < endValArr[i] && curValArr[i-1] == endValArr[i-1]) {\r\n\t\t\t\t\t\t\t\t\tcurValArr[i]++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (curValArr[i-1] && curValArr[i-1] == endValArr[i-1]) {\r\n\t\t\t\t\t\t\t\tcurValArr[i] = 0;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcurVal = curValArr.join('');\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar output = String(curVal);\r\n\r\n\t\t\t\t\tif (pattern) {\r\n\t\t\t\t\t\toutput = output.replace(new RegExp('(\\\\d{'+ pattern.index +'})'), '$1'+ pattern[0]);\r\n\t\t\t\t\t\toutput = output.replace(new RegExp('(\\\\d)?(?=(\\\\d{3})+?\\\\'+ pattern[0] +')', 'g'), '$1 ');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toutput = output.replace(/(\\d)?(?=(\\d{3})+$)/g, '$1 ');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t$Elem.html(output);\r\n\r\n\t\t\t\t\tsetTimeout(run, 85);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstop();\r\n\t\t\t\t}\r\n\r\n\t\t}, 1);\r\n\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\tclearTimeout(interval);\r\n\t}\r\n\r\n}\r\n\r\nvar numberspinObj = [], i = 0, ind;\r\nfunction numberspin(elem, opt) {\r\n\tif ($(elem)[0].ind == undefined) {\r\n\t\t$(elem)[0].ind = ind = i;\r\n\t} else {\r\n\t\tind = $(elem)[0].ind;\r\n\t}\r\n\r\n\tif (!(numberspinObj[elem+ind] instanceof Numberspin)) {\r\n\t\tnumberspinObj[elem+ind] = new Numberspin(elem, opt);\r\n\t}\r\n\ti++;\r\n\r\n\treturn numberspinObj[elem+ind];\r\n}\r\n*/","/*\r\nShare.init(Str button class);\r\n*/\r\n\r\n; var Share;\r\n\r\n; (function () {\r\n\t'use strict';\r\n\r\n\tShare = {\r\n\t\tnetwork: function (elem) {\r\n\t\t\tlet net = elem.getAttribute('data-network');\r\n\r\n\t\t\tif (!net) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet encodedHref = (elem.hasAttribute('data-share-url')) ? encodeURIComponent(elem.getAttribute('data-share-url')) : encodeURIComponent(window.location.href),\r\n\t\t\t\tencodedImageUrl = (elem.hasAttribute('data-share-img')) ? encodeURIComponent(elem.getAttribute('data-share-img')) : null,\r\n\t\t\t\ttitle = (elem.hasAttribute('data-share-tit')) ? encodeURIComponent(elem.getAttribute('data-share-tit')) : null,\r\n\t\t\t\turl;\r\n\r\n\t\t\tswitch (net) {\r\n\t\t\t\tcase 'vk':\r\n\t\t\t\t\turl = 'https://vk.com/share.php?url=' + encodedHref + ((encodedImageUrl) ? '&image=' + encodedImageUrl : '') + ((title) ? '&title=' + title : '');\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fb':\r\n\t\t\t\t\turl = 'https://www.facebook.com/sharer.php?u=' + encodedHref;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tw':\r\n\t\t\t\t\turl = 'http://twitter.com/share?url=' + encodedHref + ((title) ? '&text=' + title : '');\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ok':\r\n\t\t\t\t\turl = 'https://connect.ok.ru/offer?url=' + encodedHref + ((encodedImageUrl) ? '&imageUrl=' + encodedImageUrl : '') + ((title) ? '&title=' + title : '');\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tg':\r\n\t\t\t\t\turl = 'https://telegram.me/share/url?url=' + encodedHref;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tthis.popup(url);\r\n\t\t},\r\n\r\n\t\tpopup: function (url) {\r\n\t\t\twindow.open(url, '', 'toolbar=0,status=0,width=626,height=436');\r\n\t\t},\r\n\r\n\t\tinit: function (elementStr) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar elem = e.target.closest(elementStr);\r\n\r\n\t\t\t\tif (!elem) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.network(elem);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","/* \r\nvar timer = new Timer({\r\n    elemId: 'timer', // Str element id,\r\n    format: 'extended', // default - false\r\n    stopwatch: true, // default - false\r\n    continue: false // default - false\r\n});\r\n\r\ntimer.onStop = function () {\r\n\t\r\n}\r\n\r\ntimer.start(Int interval in seconds);\r\n*/\r\n\r\n; var Timer, numToWord;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    numToWord = function (num, wordsArr) {\r\n        num %= 100;\r\n\r\n        if (num > 20) {\r\n            num %= 10;\r\n        }\r\n\r\n        switch (num) {\r\n            case 1:\r\n                return wordsArr[0];\r\n\r\n            case 2:\r\n            case 3:\r\n            case 4:\r\n                return wordsArr[1];\r\n\r\n            default:\r\n                return wordsArr[2];\r\n        }\r\n    }\r\n\r\n    Timer = function (options) {\r\n        options = options || {};\r\n\r\n        options.continue = (options.continue !== undefined) ? options.continue : false;\r\n\r\n        this.opt = options;\r\n\r\n        this.elem = document.getElementById(options.elemId);\r\n\r\n        this.tickSubscribers = [];\r\n\r\n        this.setCookie = function () {\r\n            document.cookie = 'lastTimestampValue-' + options.elemId + '=' + Date.now() + '; expires=' + new Date(Date.now() + 259200000).toUTCString();\r\n        }\r\n\r\n        this.onTick = function (fun) {\r\n            if (typeof fun === 'function') {\r\n                this.tickSubscribers.push(fun);\r\n            }\r\n        }\r\n\r\n        this.stop = function () {\r\n            clearInterval(this.interval);\r\n\r\n            if (this.onStop) {\r\n                setTimeout(this.onStop);\r\n            }\r\n        }\r\n\r\n        this.pause = function () {\r\n            clearInterval(this.interval);\r\n        }\r\n    }\r\n\r\n    Timer.prototype.output = function (time) {\r\n        let day = time > 86400 ? Math.floor(time / 86400) : 0,\r\n            hour = time > 3600 ? Math.floor(time / 3600) : 0,\r\n            min = time > 60 ? Math.floor(time / 60) : 0,\r\n            sec = time > 60 ? Math.round(time % 60) : time;\r\n\r\n        if (hour > 24) {\r\n            hour = hour % 24;\r\n        }\r\n\r\n        if (min > 60) {\r\n            min = min % 60;\r\n        }\r\n\r\n        let timerOut;\r\n\r\n        if (this.opt.format == 'extended') {\r\n            var minTxt = numToWord(min, ['', '', '']),\r\n                secTxt = numToWord(sec, ['', '', '']);\r\n\r\n            var minOut = (min != 0) ? min + ' ' + minTxt : '',\r\n                secNum = (sec < 10) ? '0' + sec : sec;\r\n\r\n            timerOut = ((min) ? min + ' ' + minTxt + ' ' : '') + '' + sec + ' ' + secTxt;\r\n\r\n        } else {\r\n            var minNum = (min < 10) ? '0' + min : min,\r\n                secNum = (sec < 10) ? '0' + sec : sec;\r\n\r\n            timerOut = minNum + ':' + secNum;\r\n        }\r\n\r\n        if (this.elem) {\r\n            this.elem.innerHTML = timerOut;\r\n        }\r\n\r\n        if (this.tickSubscribers.length) {\r\n            this.tickSubscribers.forEach(function (item) {\r\n                item(time, { day, hour, min, sec });\r\n            });\r\n        }\r\n    }\r\n\r\n    Timer.prototype.start = function (startTime) {\r\n        this.time = +startTime || 0;\r\n\r\n        var lastTimestampValue = ((cookie) => {\r\n            if (this.opt.continue) {\r\n                return false;\r\n            }\r\n\r\n            if (cookie) {\r\n                var reg = new RegExp('lastTimestampValue-' + this.opt.elemId + '=(\\\\d+)', 'i'),\r\n                    matchArr = cookie.match(reg);\r\n\r\n                return matchArr ? matchArr[1] : null;\r\n            }\r\n        })(document.cookie);\r\n\r\n        if (lastTimestampValue) {\r\n            var delta = Math.round((Date.now() - lastTimestampValue) / 1000);\r\n\r\n            if (this.opt.stopwatch) {\r\n                this.time += delta;\r\n            } else {\r\n                if (this.time > delta) {\r\n                    this.time -= delta;\r\n                } else {\r\n                    this.setCookie();\r\n                }\r\n            }\r\n\r\n        } else if (this.opt.continue) {\r\n            this.setCookie();\r\n        }\r\n\r\n        this.output(this.time);\r\n\r\n        if (this.interval !== undefined) {\r\n            clearInterval(this.interval);\r\n        }\r\n\r\n        this.interval = setInterval(() => {\r\n            if (this.opt.stopwatch) {\r\n                this.time++;\r\n\r\n                this.output(this.time);\r\n            } else {\r\n                this.time--;\r\n\r\n                if (this.time <= 0) {\r\n                    this.stop();\r\n                } else {\r\n                    this.output(this.time);\r\n                }\r\n            }\r\n        }, 1000);\r\n    }\r\n})();","; var GetContentAjax;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    GetContentAjax = function (options) {\r\n        if (!document.querySelector(options.eventBtn)) {\r\n            return;\r\n        }\r\n\r\n        this.output = null;\r\n\r\n        var getContent = (eventBtnElem) => {\r\n            var outputDivElem = document.querySelector(options.outputDiv);\r\n\r\n            ajax({\r\n                url: options.sourceFile,\r\n                send: eventBtnElem.getAttribute('data-send'),\r\n                success: (response) => {\r\n                    if (this.output === null) {\r\n                        outputDivElem.innerHTML = response;\r\n                    } else {\r\n                        outputDivElem.innerHTML = this.output(response);\r\n                    }\r\n                },\r\n                error: (response) => {\r\n                    console.log(response);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (options.event == 'click') {\r\n            document.addEventListener('click', (e) => {\r\n                var eventBtnElem = e.target.closest(options.eventBtn);\r\n\r\n                if (eventBtnElem) {\r\n                    e.preventDefault();\r\n\r\n                    getContent(eventBtnElem);\r\n                }\r\n            });\r\n        }\r\n    }\r\n})();\r\n\r\n\r\n/*var Ajax = {\r\n    take: function(url,data,id,fun) {\r\n        var _ = this;\r\n\r\n        $.ajax({\r\n            url: url,\r\n            type:\"POST\",\r\n            dataType:\"html\",\r\n            data: data,\r\n            success: function(response){\r\n                if (response) {\r\n                    _.put(response, id);\r\n                    setTimeout(fun, 721);\r\n                }\r\n            },\r\n            error: function() {\r\n                alert('Send Error');\r\n            }\r\n        });\r\n    },\r\n    put: function(resp,id) {\r\n        var Block = $(id);\r\n        if (Block.hasClass('popup__window')) {\r\n            Block.find('.popup__inner').html(resp);\r\n            Popup.show(id);\r\n        } else {\r\n            Block.append(resp);\r\n            coverImg();\r\n        }\r\n    }\r\n\r\n};\r\n\r\n$(document).ready(function() {\r\n\r\n    $('body').on('click', '.js-ajax', function () {\r\n        var _$ = $(this);\r\n\r\n        if (!_$.hasClass('lock')) {\r\n            _$.addClass('lock');\r\n\r\n            var id = _$.attr('href') || '#'+ _$.attr('data-id'),\r\n            url = _$.attr('data-url'),\r\n            data = _$.attr('data-data');\r\n\r\n            if (_$.attr('data-page')) {\r\n                var page = +_$.attr('data-page');\r\n\r\n                data += '&page='+ page;\r\n\r\n                Ajax.take(url, data, id, function() {\r\n                    page++;\r\n                    _$.attr('data-page', page).removeClass('lock');\r\n                });\r\n\r\n            } else {\r\n                Ajax.take(url, data, id, function() {\r\n                    _$.removeClass('lock');\r\n                });\r\n            }\r\n        }\r\n\r\n        return false;\r\n    });\r\n\r\n    if ($('.js-ajax-scroll').length && $(window).width() > 1000) {\r\n        var i = 0;\r\n\r\n        $(window).scroll(function() {\r\n            var winScrTop = $(window).scrollTop(),\r\n            Point = $('.js-ajax-scroll');\r\n\r\n            if (Point.offset().top < window.innerHeight && !Point.hasClass('lock')) {\r\n                Point.addClass('lock');\r\n\r\n                var id = '#'+ Point.attr('data-id'),\r\n                url = Point.attr('data-url'),\r\n                data = Point.attr('data-data'),\r\n                page = +Point.attr('data-page');\r\n\r\n                data += '&page='+ page;\r\n\r\n                Ajax.take(url, data, id, function() {\r\n                    page++;\r\n                    Point.attr('data-page', page).removeClass('lock');\r\n                });\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n});*/","(function() {\r\n   'use strict';\r\n   \r\n   // animate when is visible\r\n   const animationOnVisible = {\r\n      animElements: null,\r\n      \r\n      scroll: function() {\r\n         console.log('scr');\r\n         console.log(this.animElements);\r\n         const winBotEdge = window.pageYOffset + window.innerHeight;\r\n         \r\n         for (let i = 0; i < this.animElements.length; i++) {\r\n            const animElem = this.animElements[i],\r\n            animElemOffsetTop = animElem.getBoundingClientRect().top + window.pageYOffset,\r\n            animElemOffsetBot = animElemOffsetTop + animElem.offsetHeight;\r\n            \r\n            if (animElemOffsetTop < winBotEdge && animElemOffsetBot > window.pageYOffset) {\r\n               animElem.classList.add('animated');\r\n            } else {\r\n               animElem.classList.remove('animated');\r\n            }\r\n         }\r\n      },\r\n      \r\n      init: function() {\r\n         const animElements = document.querySelectorAll('.js-animate');\r\n         \r\n         if (animElements.length) {\r\n            this.animElements = animElements;\r\n            \r\n            this.scroll();\r\n         }\r\n      }\r\n   };\r\n   \r\n   // document ready\r\n   document.addEventListener('DOMContentLoaded', function() {\r\n      animationOnVisible.init();\r\n      \r\n      if (animationOnVisible.animElements) {\r\n         window.addEventListener('scroll', animationOnVisible.scroll.bind(animationOnVisible));\r\n      }\r\n   });\r\n\r\n   // onload animate\r\n   window.onload = function () {\r\n      const animElems = document.querySelectorAll('.js-onload-animate');\r\n\r\n      for (let i = 0; i < animElems.length; i++) {\r\n         animElems[i].classList.add('animated');\r\n      }\r\n   }\r\n})();","/* \r\nconst frAn = new FramesAnimate('stopmotion-frames', {\r\n    fps: 30,\r\n    autoplay: true,\r\n    infinite: true,\r\n    backward: false\r\n});\r\n\r\nfrAn.onStop = function () {\r\n    // code\r\n}\r\n*/\r\n\r\n'use strict';\r\n\r\nfunction FramesAnimate(elemId, options) {\r\n    const contEl = document.getElementById(elemId);\r\n\r\n    if (!contEl) return;\r\n\r\n    const opt = options || {},\r\n        count = +contEl.getAttribute('data-count'),\r\n        path = contEl.getAttribute('data-path'),\r\n        _this = this;\r\n\r\n    opt.fps = (opt.fps !== undefined) ? opt.fps : 30;\r\n    opt.autoplay = (opt.autoplay !== undefined) ? opt.autoplay : true;\r\n    opt.backward = (opt.backward !== undefined) ? opt.backward : false;\r\n    opt.infinite = (opt.infinite !== undefined) ? opt.infinite : true;\r\n\r\n    this.opt = opt;\r\n    this.contEl = contEl;\r\n    this.loadedImages = [];\r\n    this.fps = opt.fps;\r\n    this.autoplay = opt.autoplay;\r\n    this.infinite = opt.infinite;\r\n    this.animated = false;\r\n    this.onStop = null;\r\n    this.onLoad = null;\r\n    this.loaded = false;\r\n    this.loadedImages = [];\r\n    this.count = count;\r\n\r\n    \r\n\r\n    try {\r\n        this.ctx = contEl.getContext('2d');\r\n    } catch (error) {\r\n        console.log(error, 'Elem Id: ' + elemId);\r\n    }\r\n\r\n    this.img = { W: 0, H: 0 };\r\n    this.imgDims = { W: 0, H: 0 };\r\n    this.viewportDims = { W: 0, H: 0, X: 0 };\r\n\r\n    const init = () => {\r\n        this.contElWidth = contEl.offsetWidth;\r\n        this.contElHeight = contEl.offsetHeight;\r\n\r\n        contEl.width = this.contElWidth;\r\n        contEl.height = this.contElHeight;\r\n\r\n        this.imgDims.W = this.img.W / count;\r\n        this.imgDims.H = this.img.H;\r\n\r\n        this.viewportDims.W = this.contElHeight * this.imgDims.W / this.img.H;\r\n        this.viewportDims.H = this.contElHeight;\r\n        this.viewportDims.X = this.contElWidth / 2 - this.viewportDims.W / 2;\r\n    }\r\n\r\n    const imgEl = new Image();\r\n\r\n    imgEl.onload = function () {\r\n        _this.loadedImg = this;\r\n\r\n        _this.img.W = this.width;\r\n        _this.img.H = this.height;\r\n\r\n        init();\r\n\r\n        _this.loaded = true;\r\n\r\n        if (_this.onLoad) {\r\n            _this.onLoad();\r\n        }\r\n\r\n        if (_this.autoplay) {\r\n            _this.play();\r\n        }\r\n    }\r\n\r\n    imgEl.src = path;\r\n\r\n    this.reInit = function () {\r\n        if (this.loaded) init();\r\n    }\r\n}\r\n\r\nFramesAnimate.prototype.animate = function (dir) {\r\n    this.animated = true;\r\n\r\n    let i = 0,\r\n        back = false;\r\n\r\n    if (dir == 'back') {\r\n        back = true;\r\n        i = this.count - 1;\r\n    }\r\n\r\n    let start = performance.now();\r\n\r\n    requestAnimationFrame(function anim(time) {\r\n        if (time - start > 1000 / this.fps) {\r\n            this.ctx.clearRect(0, 0, this.contElWidth, this.contElHeight);\r\n\r\n            const sx = this.imgDims.W * i;\r\n\r\n            this.ctx.drawImage(this.loadedImg, sx, 0, this.imgDims.W, this.imgDims.H, this.viewportDims.X, 0, this.viewportDims.W, this.viewportDims.H);\r\n\r\n            if (!this.infinite) {\r\n                if ((back && !i) || (!back && i == this.count - 1)) {\r\n                    this.stop();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (this.opt.backward) {\r\n                // if (i == this.count) {\r\n                //     back = true;\r\n                //     i = this.count - 1;\r\n                // } else if (i < 0) {\r\n                //     back = false;\r\n                //     i = 0;\r\n                // }\r\n            } else {\r\n                if (this.opt.infinite && !back && i == this.count - 1) {\r\n                    i = -1;\r\n                }\r\n            }\r\n\r\n            if (back) {\r\n                i--;\r\n            } else {\r\n                i++;\r\n            }\r\n\r\n            start = time;\r\n        }\r\n\r\n        if (this.animated) requestAnimationFrame(anim.bind(this));\r\n    }.bind(this));\r\n}\r\n\r\nFramesAnimate.prototype.play = function (dir) {\r\n    if (this.loaded) {\r\n        this.animate(dir);\r\n    } else {\r\n        setTimeout(this.play.bind(this), 121);\r\n    }\r\n}\r\n\r\nFramesAnimate.prototype.stop = function () {\r\n    this.autoplay = false;\r\n    this.animated = false;\r\n\r\n    if (this.onStop) {\r\n        this.onStop();\r\n    }\r\n}","; var WEBGL;\r\n\r\n(function() {\r\n   WEBGL = {\r\n      VSTxt: null,\r\n\t\tFSTxt: null,\r\n\t\t\r\n      loadTxtRes: function(url, successFun) {\r\n         ajax({\r\n            url: url,\r\n            success: function(response) {\r\n               successFun(response);\r\n            },\r\n            error: function(response) {\r\n               \r\n            }\r\n         });\r\n\t\t},\r\n\t\t\r\n\t\tstart: function() {\r\n\t\t\t\r\n\t\t},\r\n      \r\n      init: function() {\r\n         this.loadTxtRes('/shaders/vertexShader.glsl', (response) => {\r\n\t\t\t\tthis.VSTxt = response;\r\n\t\t\t\t\r\n\t\t\t\tthis.loadTxtRes('/shaders/fragmentShader.glsl', (response) => {\r\n\t\t\t\t\tthis.FSTxt = response;\r\n\r\n\t\t\t\t\tthis.start();\r\n\t\t\t\t});\r\n\t\t\t});\r\n      }\r\n   };\r\n})();\r\n\r\n","/**\r\n * @constructor\r\n * @this {Mouseparallax}\r\n * @param {string} elSel\r\n * @param {object} [options={}]\r\n * @param {number} [options.deltaX=21]\r\n * @param {number} [options.deltaY=21]\r\n * @param {object[]} [options.rangeX=[]]\r\n * @param {number} options.rangeX[]\r\n * @param {number} options.rangeX[]\r\n * @param {object[]} [options.rangeY=[]]\r\n * @param {number} options.rangeY[0]\r\n * @param {number} options.rangeY[1]\r\n */\r\n\r\nfunction Mouseparallax(elSel, options) {\r\n\tvar _ = this,\r\n\t\tdefaultOpt = {\r\n\t\t\tlistener: document,\r\n\t\t\tdeltaX: 21,\r\n\t\t\tdeltaY: 21,\r\n\t\t\trangeX: [],\r\n\t\t\trangeY: [],\r\n\t\t},\r\n\t\toptions = options || {},\r\n\t\topt = $.extend({}, defaultOpt, options),\r\n\t\tstartMousePos = { X: 0, Y: 0 },\r\n\t\tlistenerW = $(opt.listener).innerWidth(),\r\n\t\tlistenerH = $(opt.listener).innerHeight(),\r\n\t\tcursorPos = { X: 0, Y: 0 },\r\n\t\tdirect = {},\r\n\t\telems = [];\r\n\r\n\t_.disabled = false;\r\n\r\n\t$(elSel).each(function () {\r\n\t\tconst $el = $(this);\r\n\r\n\t\telems.push({\r\n\t\t\t$el: $el,\r\n\t\t\ttranslateElement: { X: 0, Y: 0 },\r\n\t\t\tstartElementPos: { X: 0, Y: 0 },\r\n\t\t\tdeltaX: ($el.attr('data-delta-x') !== undefined) ? +$el.attr('data-delta-x') : opt.deltaX,\r\n\t\t\tdeltaY: ($el.attr('data-delta-y') !== undefined) ? +$el.attr('data-delta-y') : opt.deltaY,\r\n\t\t\trangeX: ($el.attr('data-range-x') !== undefined) ? $el.attr('data-range-x').split(',') : opt.rangeX,\r\n\t\t\trangeY: ($el.attr('data-range-y') !== undefined) ? $el.attr('data-range-y').split(',') : opt.rangeY\r\n\t\t});\r\n\t});\r\n\r\n\t$(document).on('mouseenter', opt.listener, function (e) {\r\n\t\tif (_.disabled) return;\r\n\t\t\r\n\t\tstartMousePos.X = e.clientX;\r\n\t\tstartMousePos.Y = e.clientY;\r\n\t});\r\n\r\n\t$(opt.listener).on('mousemove', opt.listener, function (e) {\r\n\t\tif (_.disabled) return;\r\n\r\n\t\tif (e.clientX > cursorPos.X) {\r\n\t\t\tdirect.X = 'right';\r\n\t\t} else {\r\n\t\t\tdirect.X = 'left';\r\n\t\t}\r\n\t\tcursorPos.X = e.clientX;\r\n\r\n\t\tif (e.clientY > cursorPos.Y) {\r\n\t\t\tdirect.Y = 'up';\r\n\t\t} else {\r\n\t\t\tdirect.Y = 'down';\r\n\t\t}\r\n\t\tcursorPos.Y = e.clientY;\r\n\r\n\t\tvar deltaMouse = {\r\n\t\t\tX: e.clientX - startMousePos.X,\r\n\t\t\tY: e.clientY - startMousePos.Y\r\n\t\t};\r\n\r\n\t\telems.forEach(function (el) {\r\n\t\t\tel.translateElement = {\r\n\t\t\t\tX: deltaMouse.X * (el.deltaX / listenerW) + el.startElementPos.X,\r\n\t\t\t\tY: deltaMouse.Y * (el.deltaY / listenerH) + el.startElementPos.Y\r\n\t\t\t};\r\n\r\n\t\t\tif (el.startMousePosX) {\r\n\t\t\t\tel.translateElement.X = (e.clientX - el.startMousePosX) * (el.deltaX / listenerW) + el.startElementPos.X;\r\n\t\t\t}\r\n\r\n\t\t\tif (el.startMousePosY) {\r\n\t\t\t\tel.translateElement.Y = (e.clientY - el.startMousePosY) * (el.deltaY / listenerH) + el.startElementPos.Y;\r\n\t\t\t}\r\n\r\n\t\t\tvar translateX = el.translateElement.X,\r\n\t\t\t\ttranslateY = el.translateElement.Y;\r\n\r\n\t\t\tif (el.rangeX) {\r\n\t\t\t\tif (el.translateElement.X <= el.rangeX[0] * -1) {\r\n\t\t\t\t\tif (direct.X == 'left') {\r\n\t\t\t\t\t\tel.startMousePosX = e.clientX;\r\n\t\t\t\t\t\tel.startElementPos.X = +el.rangeX[0] * -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttranslateX = el.rangeX[0] * -1;\r\n\t\t\t\t} else if (el.translateElement.X >= el.rangeX[1]) {\r\n\t\t\t\t\tif (direct.X == 'right') {\r\n\t\t\t\t\t\tel.startMousePosX = e.clientX;\r\n\t\t\t\t\t\tel.startElementPos.X = +el.rangeX[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttranslateX = el.rangeX[1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (el.rangeY) {\r\n\t\t\t\tif (el.translateElement.Y >= el.rangeY[1]) {\r\n\t\t\t\t\tif (direct.Y == 'down') {\r\n\t\t\t\t\t\tel.startMousePosY = e.clientY;\r\n\t\t\t\t\t\tel.startElementPos.Y = +el.rangeY[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttranslateY = el.rangeY[1];\r\n\t\t\t\t} else if (el.translateElement.Y <= +el.rangeY[0] * -1) {\r\n\t\t\t\t\tif (direct.Y == 'up') {\r\n\t\t\t\t\t\tel.startMousePosY = e.clientY;\r\n\t\t\t\t\t\tel.startElementPos.Y = +el.rangeY[0] * -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttranslateY = +el.rangeY[0] * -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tel.$el.css('transform', 'translate(' + translateX + 'px, ' + translateY + 'px)');\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t$(document).on('mouseleave', opt.listener, function (e) {\r\n\t\tif (_.disabled) return;\r\n\r\n\t\telems.forEach(function (el) {\r\n\t\t\tel.startElementPos.X = el.translateElement.X;\r\n\t\t\tel.startElementPos.Y = el.translateElement.Y;\r\n\t\t\tel.startMousePosX = null;\r\n\t\t\tel.startMousePosY = null;\r\n\t\t});\r\n\t});\r\n}","// new Scrollbox('#hor-scroll');\r\n\r\n; var Scrollbox;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Scrollbox = function (elem, options) {\r\n        const scrBoxEl = (typeof elem === 'string') ? document.querySelector(elem) : elem;\r\n\r\n        if (!scrBoxEl) return;\r\n\r\n        // options\r\n        const opt = options || {};\r\n\r\n        opt.horizontal = (opt.horizontal !== undefined) ? opt.horizontal : false;\r\n        opt.fullSizeStep = (opt.fullSizeStep !== undefined) ? opt.fullSizeStep : false;\r\n        opt.nestedScrollbox = (opt.nestedScrollbox !== undefined) ? opt.nestedScrollbox : null;\r\n        opt.parentScrollbox = (opt.parentScrollbox !== undefined) ? opt.parentScrollbox : null;\r\n        opt.childrenScrollbox = (opt.childrenScrollbox !== undefined) ? opt.childrenScrollbox : null;\r\n        opt.evListenerEl = (opt.evListenerEl !== undefined) ? opt.evListenerEl : null;\r\n        opt.duration = (opt.duration !== undefined) ? opt.duration : 1000;\r\n        opt.bar = (opt.bar !== undefined) ? opt.bar : false;\r\n        opt.barSize = (opt.barSize !== undefined) ? opt.barSize : null;\r\n\r\n        const winEl = scrBoxEl.querySelector('.scrollbox__window'),\r\n            innerEl = scrBoxEl.querySelector('.scrollbox__inner');\r\n\r\n        scrBoxEl.setAttribute('tabindex', '-1');\r\n\r\n        this.scrBoxEl = scrBoxEl;\r\n        this.winEl = winEl;\r\n        this.winSize = 0;\r\n        this.horizontal = opt.horizontal;\r\n        this.bar = opt.bar;\r\n        this.barSize = opt.barSize;\r\n        this.nestedSbEls = null;\r\n        this.parentEl = null;\r\n        this.barSlEl = null;\r\n        this.barSlElSize = 0;\r\n        this.scrolled = 0;\r\n        this.isScrolling = false;\r\n        this.isBreak = false;\r\n        this.delta = 0;\r\n        this.initialized = false;\r\n        this.ts = Date.now();\r\n        this.params = null;\r\n        this.innerSize = null;\r\n        this.innerEl = innerEl || null;\r\n        this.innerSize = null;\r\n        this.endBreak = null;\r\n\r\n        if (opt.parentScrollbox) {\r\n            this.parentEl = scrBoxEl.closest(opt.parentScrollbox);\r\n        }\r\n\r\n        const init = () => {\r\n            if (opt.horizontal) {\r\n                scrBoxEl.classList.add('scrollbox_horizontal');\r\n\r\n                setTimeout(() => {\r\n                    if (this.innerEl) {\r\n                        const innerW = winEl.scrollWidth,\r\n                            winW = winEl.offsetWidth;\r\n\r\n                        if (innerW > winW) {\r\n                            scrBoxEl.classList.add('srollbox_scrollable');\r\n                        }\r\n\r\n                        this.winSize = winW;\r\n                        this.innerSize = innerW;\r\n                        this.endBreak = innerW - winW;\r\n                    }\r\n\r\n                    this.scrollBar();\r\n                }, 21);\r\n\r\n            } else {\r\n                scrBoxEl.classList.add('scrollbox_vertical');\r\n\r\n                setTimeout(() => {\r\n                    if (this.innerEl) {\r\n                        const innerH = winEl.scrollHeight,\r\n                            winH = winEl.offsetHeight;\r\n\r\n                        if (innerH > winH) {\r\n                            scrBoxEl.classList.add('srollbox_scrollable');\r\n                        }\r\n\r\n                        this.winSize = winH;\r\n                        this.innerSize = innerH;\r\n                        this.endBreak = innerH - winH;\r\n                    }\r\n\r\n                    this.scrollBar();\r\n                }, 21);\r\n            }\r\n\r\n            scrBoxEl.setAttribute('data-position', 'atStart');\r\n\r\n            if (opt.nestedScrollbox) {\r\n                this.nestedSbEls = scrBoxEl.querySelectorAll(opt.nestedScrollbox);\r\n\r\n                for (let i = 0; i < this.nestedSbEls.length; i++) {\r\n                    const nEl = this.nestedSbEls[i];\r\n\r\n                    if (!nEl.hasAttribute('data-offset')) {\r\n                        if (opt.horizontal) {\r\n                            nEl.setAttribute('data-offset', nEl.getBoundingClientRect().left - winEl.getBoundingClientRect().left);\r\n                        } else {\r\n                            nEl.setAttribute('data-offset', nEl.getBoundingClientRect().top - winEl.getBoundingClientRect().top);\r\n                        }\r\n                    }\r\n\r\n                    nEl.setAttribute('data-scroll-able', 'false');\r\n                }\r\n            }\r\n\r\n            this.actionEls = [];\r\n\r\n            const actionEls = winEl.querySelectorAll('[data-action-points]');\r\n\r\n            for (let i = 0; i < actionEls.length; i++) {\r\n                const actEl = actionEls[i],\r\n                    points = actEl.getAttribute('data-action-points').split(','),\r\n                    actionProp = actEl.getAttribute('data-action-prop'),\r\n                    actionRange = actEl.getAttribute('data-range').split(','),\r\n                    reverse = actEl.getAttribute('data-reverse');\r\n\r\n                let start, end, startFrom, endTo;\r\n\r\n                points.forEach(function (item, i) {\r\n                    const pts = item.split('-'),\r\n                        rng = actionRange[i].split('-');\r\n\r\n                    if (!i) {\r\n                        start = +pts[0];\r\n                        startFrom = +rng[0];\r\n                    }\r\n\r\n                    if (i == points.length - 1) {\r\n                        end = +pts[1];\r\n                        endTo = +rng[1];\r\n                    }\r\n                });\r\n\r\n                points.forEach((item, i) => {\r\n                    const pts = item.split('-'),\r\n                        rng = actionRange[i].split('-');\r\n\r\n                    this.actionEls.push({\r\n                        el: actEl,\r\n                        startAction: +pts[0],\r\n                        endAction: +pts[1],\r\n                        actionFrom: +rng[0],\r\n                        actionTo: +rng[1],\r\n                        actionProp,\r\n                        start,\r\n                        end,\r\n                        startFrom,\r\n                        endTo,\r\n                        reverse\r\n                    });\r\n\r\n                    if (+pts[1] > this.endBreak) {\r\n                        this.endBreak = +pts[1];\r\n                    }\r\n                });\r\n            }\r\n\r\n            setTimeout(() => {\r\n                this.initialized = true;\r\n            }, 21);\r\n        }\r\n\r\n        init();\r\n\r\n        // scroll animation\r\n        const scrollAnim = (scrTo, ev, duration, delta) => {\r\n            if (this.isScrolling) return;\r\n\r\n            this.isScrolling = true;\r\n\r\n            this.delta = delta;\r\n\r\n            const scrolled = this.scrolled;\r\n\r\n            duration = (duration !== undefined) ? duration : opt.duration;\r\n\r\n            if (duration == 0) {\r\n                this.scroll((scrTo - scrolled) * 1 + scrolled, true, ev);\r\n                this.isScrolling = false;\r\n                return;\r\n            }\r\n\r\n            animate((progr) => {\r\n                this.scroll((scrTo - scrolled) * progr + scrolled, false, ev);\r\n            }, duration, 'easeInOutQuad', () => {\r\n                this.scroll((scrTo - scrolled) * 1 + scrolled, true, ev);\r\n                this.isScrolling = false;\r\n            });\r\n        }\r\n\r\n        // wheel event handler\r\n        const wheelHandler = (e) => {\r\n            e.preventDefault();\r\n\r\n            if (\r\n                this.isScrolling ||\r\n                (opt.childrenScrollbox && e.target.closest(opt.childrenScrollbox))\r\n            ) return;\r\n\r\n            let scrTo, delta;\r\n\r\n            if (e.deltaX) {\r\n                delta = e.deltaX;\r\n            } else {\r\n                delta = e.deltaY;\r\n            }\r\n\r\n            // scroll able\r\n            if (scrBoxEl.hasAttribute('data-scroll-able')) {\r\n                const atr = scrBoxEl.getAttribute('data-scroll-able');\r\n\r\n                if (\r\n                    (atr == 'toLeft' && delta < 0) ||\r\n                    (atr == 'toRight' && delta > 0) ||\r\n                    atr == 'false'\r\n                ) return;\r\n            }\r\n\r\n            if (opt.fullSizeStep) {\r\n                if (delta > 0) {\r\n                    scrTo = this.scrolled + this.winSize;\r\n                } else if (delta < 0) {\r\n                    scrTo = this.scrolled - this.winSize;\r\n                }\r\n\r\n            } else {\r\n                if (Math.abs(delta) > this.winSize) {\r\n                    if (delta > 0) {\r\n                        delta = this.winSize;\r\n                    } else if (delta < 0) {\r\n                        delta = -this.winSize;\r\n                    }\r\n                }\r\n\r\n                if (Math.abs(delta) < 150) {\r\n                    if (delta > 0) {\r\n                        delta = 150;\r\n                    } else if (delta < 0) {\r\n                        delta = -150;\r\n                    }\r\n                }\r\n\r\n                scrTo = this.scrolled + delta;\r\n            }\r\n\r\n            scrollAnim(scrTo, e, undefined, delta);\r\n        }\r\n\r\n        scrBoxEl.addEventListener('wheel', wheelHandler);\r\n\r\n        // keyboard events\r\n        document.addEventListener('keydown', (e) => {\r\n            if (this.isScrolling) return;\r\n\r\n            let scrTo, delta;\r\n\r\n            if (opt.horizontal) {\r\n                if (e.code == 'ArrowRight') {\r\n                    delta = 1;\r\n                } else if (e.code == 'ArrowLeft') {\r\n                    delta = -1;\r\n                }\r\n            } else {\r\n                if (e.code == 'ArrowDown') {\r\n                    delta = 1;\r\n                } else if (e.code == 'ArrowUp') {\r\n                    delta = -1;\r\n                }\r\n            }\r\n\r\n            // scroll able\r\n            if (scrBoxEl.hasAttribute('data-scroll-able')) {\r\n                const atr = scrBoxEl.getAttribute('data-scroll-able');\r\n\r\n                if (\r\n                    (atr == 'toLeft' && delta < 0) ||\r\n                    (atr == 'toRight' && delta > 0) ||\r\n                    atr == 'false'\r\n                ) return;\r\n            }\r\n\r\n            if (opt.fullSizeStep) {\r\n                if (delta > 0) {\r\n                    scrTo = this.scrolled + step;\r\n                } else if (delta < 0) {\r\n                    scrTo = this.scrolled - step;\r\n                }\r\n            } else {\r\n                if (delta > 0) {\r\n                    delta = 150;\r\n                } else if (delta < 0) {\r\n                    delta = -150;\r\n                }\r\n\r\n                delta *= 2;\r\n\r\n                scrTo = this.scrolled + delta;\r\n            }\r\n\r\n            if (delta) scrollAnim(scrTo, e, undefined, delta);\r\n        });\r\n\r\n        this.scrollTo = function (scrTo, dur, params) {\r\n            this.params = params;\r\n\r\n            scrollAnim(scrTo, 'scrollTo', dur);\r\n\r\n            scrBoxEl.removeAttribute('data-scroll-able');\r\n\r\n            this.isBreak = false;\r\n\r\n            if (opt.nestedScrollboxObj && opt.nestedScrollboxObj.length) {\r\n                opt.nestedScrollboxObj.forEach(function (item) {\r\n                    item.scrBoxEl.setAttribute('data-scroll-able', 'false');\r\n                    item.scrBoxEl.setAttribute('data-position', 'atStart');\r\n                    item.scrolled = 0;\r\n                    item.innerEl.style.left = '0';\r\n                });\r\n            }\r\n        }\r\n\r\n        this.setOptions = function (options) {\r\n\r\n        }\r\n\r\n        this.reInit = function () {\r\n            init();\r\n        }\r\n\r\n        this.destroy = function () {\r\n            this.scrolled = 0;\r\n            this.initialized = false;\r\n\r\n            scrBoxEl.removeEventListener('wheel', wheelHandler);\r\n\r\n            this.actionEls.forEach(function (item) {\r\n                item.el.style.transform = '';\r\n            });\r\n        }\r\n    }\r\n\r\n    Scrollbox.prototype.scroll = function (scrTo, aftScroll, ev) {\r\n        if (!this.isBreak && this.nestedSbEls && ev != 'scrollTo') {\r\n            for (let i = 0; i < this.nestedSbEls.length; i++) {\r\n                const nEl = this.nestedSbEls[i],\r\n                    left = +nEl.getAttribute('data-offset'),\r\n                    pos = nEl.getAttribute('data-position');\r\n\r\n                if (\r\n                    left + nEl.offsetWidth > this.scrolled &&\r\n                    left < this.scrolled + this.winEl.offsetWidth\r\n                ) {\r\n                    if (\r\n                        this.delta > 0 && scrTo >= left &&\r\n                        !nEl.classList.contains('disabled')\r\n                    ) {\r\n                        if (pos != 'atEnd') {\r\n                            this.isBreak = true;\r\n\r\n                            scrTo = left;\r\n                            this.scrTo = left;\r\n\r\n                            nEl.setAttribute('data-scroll-able', 'true');\r\n\r\n                        } else {\r\n                            nEl.setAttribute('data-scroll-able', 'false');\r\n                        }\r\n\r\n                    } else if (\r\n                        this.delta < 0 && scrTo <= left &&\r\n                        !nEl.classList.contains('disabled')\r\n                    ) {\r\n                        if (pos != 'atStart') {\r\n                            this.isBreak = true;\r\n\r\n                            scrTo = left;\r\n                            this.scrTo = left;\r\n\r\n                            nEl.setAttribute('data-scroll-able', 'true');\r\n\r\n                        } else {\r\n                            nEl.setAttribute('data-scroll-able', 'false');\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n        } else if (this.isBreak) {\r\n            scrTo = this.scrTo;\r\n        }\r\n\r\n        this.actionEls.forEach(function (item) {\r\n            let sign = '-';\r\n\r\n            if (item.reverse === 'true') {\r\n                sign = '';\r\n            }\r\n\r\n            if (scrTo >= item.startAction && scrTo <= item.endAction) {\r\n                const progress = (scrTo - item.startAction) / ((item.endAction - item.startAction)),\r\n                    moveTo = (item.actionTo - item.actionFrom) * progress + item.actionFrom;\r\n\r\n                if (item.actionProp === 'left') {\r\n                    item.el.style.left = sign + moveTo + '%';\r\n                } else {\r\n                    item.el.style.transform = 'translate(' + sign + moveTo + '%, 0)';\r\n                }\r\n\r\n            } else if (scrTo < item.start) {\r\n                if (item.actionProp === 'left') {\r\n                    item.el.style.left = sign + item.startFrom + '%';\r\n                } else {\r\n                    item.el.style.transform = 'translate(' + sign + item.startFrom + '%, 0)';\r\n                }\r\n\r\n            } else if (scrTo > item.end) {\r\n                if (item.actionProp === 'left') {\r\n                    item.el.style.left = sign + item.endTo + '%';\r\n                } else {\r\n                    item.el.style.transform = 'translate(' + sign + item.endTo + '%, 0)';\r\n                }\r\n            }\r\n        });\r\n\r\n        let pos;\r\n\r\n        if (scrTo >= this.endBreak) {\r\n            scrTo = this.endBreak;\r\n\r\n            pos = 'atEnd';\r\n\r\n        } else if (scrTo <= 0) {\r\n            scrTo = 0;\r\n\r\n            pos = 'atStart';\r\n        }\r\n\r\n        if (pos) {\r\n            this.scrBoxEl.setAttribute('data-position', pos);\r\n        } else {\r\n            this.scrBoxEl.removeAttribute('data-position');\r\n        }\r\n\r\n        if (this.parentEl) {\r\n            if (this.delta > 0) {\r\n                if (pos == 'atEnd') {\r\n                    if (aftScroll) this.parentEl.setAttribute('data-scroll-able', 'true');\r\n                } else {\r\n                    this.parentEl.setAttribute('data-scroll-able', 'false');\r\n                }\r\n\r\n            } else if (this.delta < 0) {\r\n                if (pos == 'atStart') {\r\n                    if (aftScroll) this.parentEl.setAttribute('data-scroll-able', 'true');\r\n                } else {\r\n                    this.parentEl.setAttribute('data-scroll-able', 'false');\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.barSlEl && ev != 'bar') {\r\n            if (this.horizontal) {\r\n                const barW = this.barSlEl.parentElement.offsetWidth;\r\n\r\n                this.barSlEl.style.transform = 'translateX(' + ((barW - this.barSlElSize) / 100) * (scrTo / (this.endBreak / 100)) + 'px)';\r\n\r\n            } else {\r\n                const barH = this.barSlEl.parentElement.offsetHeight;\r\n\r\n                this.barSlEl.style.transform = 'translateY(' + ((barH - this.barSlElSize) / 100) * (scrTo / (this.endBreak / 100)) + 'px)';\r\n            }\r\n        }\r\n\r\n        this.scrolled = scrTo;\r\n\r\n        // move\r\n        if (this.innerEl) {\r\n            if (this.horizontal) {\r\n                this.innerEl.style.transform = 'translateX(' + (-scrTo) + 'px)';\r\n            } else {\r\n                this.innerEl.style.transform = 'translateY(' + (-scrTo) + 'px)';\r\n            }\r\n        }\r\n\r\n        if (this.onScroll) this.onScroll(this.scrBoxEl, pos, ev, scrTo, this.params);\r\n\r\n        // after scroll\r\n        if (aftScroll) {\r\n            this.scrolled = scrTo;\r\n            this.isBreak = false;\r\n\r\n            if (this.afterScroll) this.afterScroll(this.scrBoxEl, pos, ev, scrTo, this.params);\r\n\r\n            this.params = null;\r\n        }\r\n    }\r\n\r\n    Scrollbox.prototype.scrollBar = function () {\r\n        if (!this.bar) return;\r\n\r\n        if (this.horizontal) {\r\n            const barEl = this.scrBoxEl.querySelector('.scrollbox__horizontal-bar');\r\n\r\n            if (barEl) {\r\n                if (!this.initialized) {\r\n                    const el = document.createElement('div');\r\n\r\n                    barEl.appendChild(el);\r\n\r\n                    this.barSlEl = el;\r\n                }\r\n\r\n                if (this.innerSize > this.winEl.offsetWidth) {\r\n                    if (this.barSize === null) {\r\n                        this.barSlEl.style.width = (this.winSize / (this.innerSize / 100)) + '%';\r\n\r\n                        setTimeout(() => {\r\n                            this.barSlElSize = this.barSlEl.offsetWidth;\r\n                        }, 21);\r\n\r\n                    } else if (this.barSize === true) {\r\n                        this.barSlElSize = this.barSlEl.offsetWidth;\r\n                    } else {\r\n                        this.barSlEl.style.width = this.barSize + 'px';\r\n                        this.barSlElSize = this.barSize;\r\n                    }\r\n\r\n                    barEl.style.display = '';\r\n\r\n                } else {\r\n                    barEl.style.display = 'none';\r\n                }\r\n            }\r\n\r\n        } else {\r\n            const barEl = this.scrBoxEl.querySelector('.scrollbox__vertical-bar');\r\n\r\n            if (barEl) {\r\n                if (!this.initialized) {\r\n                    const el = document.createElement('div');\r\n\r\n                    barEl.appendChild(el);\r\n\r\n                    this.barSlEl = el;\r\n                }\r\n\r\n                if (this.endBreak) {\r\n                    if (this.barSize === null) {\r\n                        this.barSlEl.style.height = (this.winSize / (this.innerSize / 100)) + '%';\r\n\r\n                        setTimeout(() => {\r\n                            this.barSlElSize = this.barSlEl.offsetHeight;\r\n                        }, 21);\r\n\r\n                    } else if (this.barSize === true) {\r\n                        this.barSlElSize = this.barSlEl.offsetHeight;\r\n                    } else {\r\n                        this.barSlEl.style.height = this.barSize + 'px';\r\n                        this.barSlElSize = this.barSize;\r\n                    }\r\n\r\n                    barEl.style.display = '';\r\n\r\n                } else {\r\n                    barEl.style.display = 'none';\r\n                }\r\n            }\r\n        }\r\n\r\n        const mouseStart = { X: 0, Y: 0 },\r\n            mouseDelta = { X: 0, Y: 0 },\r\n            bar = { X: 0, Y: 0, W: 0, H: 0 },\r\n            barSlStart = { X: 0, Y: 0 };\r\n\r\n        const mouseMove = (e) => {\r\n            mouseDelta.X = e.clientX - mouseStart.X;\r\n            mouseDelta.Y = e.clientY - mouseStart.Y;\r\n\r\n            if (this.horizontal) {\r\n                let shift = mouseDelta.X + barSlStart.X - bar.X;\r\n\r\n                const limit = bar.W - this.barSlElSize;\r\n\r\n                if (shift <= 0) {\r\n                    shift = 0;\r\n                } else if (shift >= limit) {\r\n                    shift = limit;\r\n                }\r\n\r\n                this.barSlEl.style.transform = 'translateX(' + shift + 'px)';\r\n\r\n                this.scroll((shift / (limit / 100)) * (this.endBreak / 100), null, 'bar');\r\n\r\n            } else {\r\n                let shift = mouseDelta.Y + barSlStart.Y - bar.Y;\r\n\r\n                const limit = bar.H - this.barSlElSize;\r\n\r\n                if (shift <= 0) {\r\n                    shift = 0;\r\n                } else if (shift >= limit) {\r\n                    shift = limit;\r\n                }\r\n\r\n                this.barSlEl.style.transform = 'translateY(' + shift + 'px)';\r\n\r\n                this.scroll((shift / (limit / 100)) * (this.endBreak / 100), null, 'bar');\r\n            }\r\n        }\r\n\r\n        const mouseUp = () => {\r\n            document.removeEventListener('mousemove', mouseMove);\r\n\r\n            this.scrBoxEl.classList.remove('scrollbox_dragging');\r\n        }\r\n\r\n        const mouseDown = (e) => {\r\n            if (e.type == 'mousedown' && e.which != 1) return;\r\n\r\n            const barSlEl = e.target.closest('div');\r\n\r\n            if (barSlEl === this.barSlEl) {\r\n                document.addEventListener('mousemove', mouseMove);\r\n\r\n                mouseStart.X = e.clientX;\r\n                mouseStart.Y = e.clientY;\r\n\r\n                bar.X = barSlEl.parentElement.getBoundingClientRect().left;\r\n                bar.Y = barSlEl.parentElement.getBoundingClientRect().top;\r\n                bar.W = barSlEl.parentElement.offsetWidth;\r\n                bar.H = barSlEl.parentElement.offsetHeight;\r\n\r\n                barSlStart.X = barSlEl.getBoundingClientRect().left;\r\n                barSlStart.Y = barSlEl.getBoundingClientRect().top;\r\n\r\n                this.scrBoxEl.classList.add('scrollbox_dragging');\r\n            }\r\n        }\r\n\r\n        if (!this.initialized) {\r\n            document.addEventListener('mousedown', mouseDown);\r\n            document.addEventListener('mouseup', mouseUp);\r\n        }\r\n    }\r\n})();","var FlSlider = {\r\n    \r\n    animation: false,\r\n    count: 0,\r\n    isLine: false,\r\n    t: null,\r\n    \r\n    init: function() {\r\n        var _ = this;\r\n        \r\n        _.count = $('.float-slider__float-item').length;\r\n        \r\n        $('.float-slider__float-item').first().addClass('float-slider__float-item_curr');\r\n        $('.float-slider__fade-item').first().addClass('float-slider__fade-item_curr');\r\n        \r\n        \r\n        if (_.count > 1) {\r\n            \r\n            $('.float-slider__float-item').last().addClass('float-slider__float-item_prev');\r\n            \r\n            $('.float-slider__float-item').first().next('.float-slider__float-item').removeClass('float-slider__float-item_prev').addClass('float-slider__float-item_next');\r\n            \r\n            var dots = '';\r\n            for (var i = 0; i < _.count; i++) {\r\n                dots += '<li'+ ((i == 0) ? ' class=\"float-slider__dots-active\"' : '') +'><button type=\"button\" data-index=\"'+ i +'\"></button></li>';\r\n            }\r\n            \r\n            $('.float-slider__float').append('<ul class=\"float-slider__dots\">'+ dots +'</ul>');\r\n            \r\n            if ($('.float-slider').attr('data-line')) {\r\n                _.isLine = true;\r\n            }\r\n            \r\n        } else {\r\n            $('.float-slider__arrow').remove();\r\n        }\r\n        \r\n    },\r\n    \r\n    dots: function(ind) {\r\n        var _ = this;\r\n        function dotC() {\r\n            if (!$('.float-slider__float-item[data-index=\"'+ ind +'\"]').hasClass('float-slider__float-item_curr')) {\r\n                \r\n                if (_.count == 2 && ind === 0) {\r\n                    _.change('prev');\r\n                } else {\r\n                    _.change('next');\r\n                }\r\n                \r\n                setTimeout(dotC, 1121);\r\n            }\r\n        }\r\n        dotC();\r\n    },\r\n    \r\n    activeDot: function() {\r\n        var _ = this;\r\n        var ind = $('.float-slider__float-item_curr').attr('data-index');\r\n        $('.float-slider__dots li').removeClass('float-slider__dots-active');\r\n        $('.float-slider__dots').find('button[data-index=\"'+ ind +'\"]').parent().addClass('float-slider__dots-active');\r\n        $('.float-slider-control__btn').removeClass('float-slider-control__btn_active');\r\n        $('#float-sl-cont-'+ ind).addClass('float-slider-control__btn_active');\r\n        if (_.isLine) {\r\n            clearTimeout(_.t);\r\n            _.line();\r\n        }\r\n    },\r\n    \r\n    line: function() {\r\n        var _ = this;\r\n        $('.float-slider-control__line span').removeClass('crawl');\r\n        $('.float-slider-control__btn_active .float-slider-control__line span').addClass('crawl');\r\n        _.t = setTimeout(function() {\r\n            _.change('next');\r\n        }, 5000);\r\n    },\r\n    \r\n    change: function(dir) {\r\n        \r\n        var _ = this,\r\n        Curr = $('.float-slider__float-item_curr'),\r\n        Next = $('.float-slider__float-item_next'),\r\n        Prev = $('.float-slider__float-item_prev'),\r\n        ToNext,\r\n        ToPrev;\r\n        \r\n        if (_.count > 3) {\r\n            ToNext = (Next.next('.float-slider__float-item').length) ? Next.next('.float-slider__float-item') : $('.float-slider__float-item').first();\r\n            ToPrev = (Prev.prev('.float-slider__float-item').length) ? Prev.prev('.float-slider__float-item') : $('.float-slider__float-item').last();\r\n        }\r\n        \r\n        if (_.count == 2) {\r\n            if (Next.attr('data-index') === '1') {\r\n                if (dir == 'prev') {\r\n                    return false;\r\n                }\r\n            } else if (Prev.attr('data-index') === '0') {\r\n                if (dir == 'next') {\r\n                    return false;\r\n                }\r\n            }\r\n        } else if (_.count == 1) {\r\n            return false;\r\n        }\r\n        \r\n        if (!_.animation) {\r\n            \r\n            if (dir == 'next') {\r\n                _.animation = true;\r\n                \r\n                Next.addClass('next-to-curr');\r\n                Curr.addClass('curr-to-prev');\r\n                \r\n                if (_.count > 3) {\r\n                    ToNext.addClass('to-next');\r\n                    Prev.addClass('from-prev');\r\n                } else {\r\n                    Prev.addClass('prev-to-next');\r\n                }\r\n                \r\n                $('.float-slider__fade-item').removeClass('float-slider__fade-item_curr');\r\n                \r\n                setTimeout(function() {\r\n                    \r\n                    $('.float-slider__fade-item[data-index=\"'+ Next.attr('data-index') +'\"]').addClass('float-slider__fade-item_curr');\r\n                    \r\n                    if (_.count > 3) {\r\n                        ToNext.addClass('float-slider__float-item_next').removeClass('to-next');\r\n                        Prev.removeClass('float-slider__float-item_prev from-prev');\r\n                    } else {\r\n                        Prev.addClass('float-slider__float-item_next').removeClass('float-slider__float-item_prev prev-to-next');\r\n                    }\r\n                    \r\n                    Curr.addClass('float-slider__float-item_prev').removeClass('float-slider__float-item_curr curr-to-prev');\r\n                    \r\n                    Next.addClass('float-slider__float-item_curr').removeClass('float-slider__float-item_next next-to-curr');\r\n                    \r\n                    _.animation = false;\r\n                    _.activeDot();\r\n                    \r\n                }, 1021);\r\n                \r\n            } else if (dir == 'prev') {\r\n                _.animation = true;\r\n                \r\n                Prev.addClass('prev-to-curr');\r\n                Curr.addClass('curr-to-next');\r\n                \r\n                \r\n                if (_.count > 3) {\r\n                    ToPrev.addClass('to-prev');\r\n                    Next.addClass('from-next');\r\n                } else {\r\n                    Next.addClass('next-to-prev');\r\n                }\r\n                \r\n                $('.float-slider__fade-item').removeClass('float-slider__fade-item_curr');\r\n                \r\n                setTimeout(function() {\r\n                    \r\n                    $('.float-slider__fade-item[data-index=\"'+ Prev.attr('data-index') +'\"]').addClass('float-slider__fade-item_curr');\r\n                    \r\n                    Prev.addClass('float-slider__float-item_curr').removeClass('float-slider__float-item_prev prev-to-curr');\r\n                    \r\n                    Curr.addClass('float-slider__float-item_next').removeClass('float-slider__float-item_curr curr-to-next');\r\n                    \r\n                    if (_.count > 3) {\r\n                        ToPrev.addClass('float-slider__float-item_prev').removeClass('to-prev');\r\n                        Next.removeClass('float-slider__float-item_next from-next');\r\n                    } else {\r\n                        Next.addClass('float-slider__float-item_prev').removeClass('float-slider__float-item_next next-to-prev');\r\n                    }\r\n                    \r\n                    _.animation = false;\r\n                    _.activeDot();\r\n                    \r\n                }, 1021);\r\n                \r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n    \r\n};\r\n\r\n\r\n$('document').ready(function() {\r\n    \r\n    FlSlider.init();\r\n    \r\n    if ($('.float-slider-control').length) {\r\n        var s = true;\r\n        $(window).scroll(function() {\r\n            if ( $('.float-slider-control').offset().top < (($(window).height()/2)+$(window).scrollTop()) ) {\r\n                if (s) {\r\n                    s = false;\r\n                    FlSlider.line();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    \r\n    $('body').on('click', '.float-slider-control__btn-btn', function() {\r\n        if (!$(this).parent().hasClass('float-slider-control__btn_active')) {\r\n            var ind = +$(this).attr('data-index');\r\n            FlSlider.dots(ind);\r\n        }\r\n    });\r\n    \r\n    $('body').on('click', '.float-slider__dots button', function() {\r\n        if (!$(this).parent().hasClass('float-slider__dots-active')) {\r\n            var ind = +$(this).attr('data-index');\r\n            FlSlider.dots(ind);\r\n        }\r\n    });\r\n    \r\n    $('body').on('click', '.float-slider__arrow', function() {\r\n        var dir = $(this).attr('data-direct');\r\n        FlSlider.change(dir);\r\n    });\r\n    \r\n    if (window.innerWidth < 1200) {\r\n        $('.float-slider').swipe({\r\n            swipe: function(event, direction) {\r\n                if (direction == 'right') {\r\n                    FlSlider.change('prev');\r\n                } else if(direction == 'left') {\r\n                    FlSlider.change('next');\r\n                }\r\n            },\r\n            triggerOnTouchEnd: false,\r\n            excludedElements: '',\r\n            threshold: 21,\r\n        });\r\n    }\r\n    \r\n});","// Zoom.init('.js-zoom-container');\r\n\r\nvar Zoom;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Zoom = {\r\n        contSel: '',\r\n        contEl: null,\r\n        contPos: { X: 0, Y: 0, X2: 0, Y2: 0 },\r\n        zoomEl: null,\r\n        zoomInnerEl: null,\r\n        mOver: null,\r\n        mMove: null,\r\n\r\n        build: function() {\r\n            this.zoomInnerEl = document.createElement('div');\r\n\r\n            this.zoomInnerEl.className = 'zoom__inner';\r\n\r\n            this.zoomInnerEl.style.width = this.contEl.offsetWidth + 'px';\r\n            this.zoomInnerEl.style.height = this.contEl.offsetHeight + 'px';\r\n\r\n            this.zoomInnerEl.innerHTML = this.contEl.innerHTML;\r\n\r\n            this.zoomEl.appendChild(this.zoomInnerEl);\r\n\r\n            this.zoomEl.style.display = 'block';\r\n        },\r\n\r\n        start: function (e) {\r\n            this.contEl = e.target.closest(this.contSel);\r\n\r\n            if (!this.contEl) return;\r\n\r\n            document.removeEventListener('mouseover', this.mOver);\r\n\r\n            this.contPos.X = this.contEl.getBoundingClientRect().left + window.pageXOffset;\r\n            this.contPos.Y = this.contEl.getBoundingClientRect().top + window.pageYOffset;\r\n            this.contPos.X2 = this.contEl.getBoundingClientRect().right + window.pageXOffset;\r\n            this.contPos.Y2 = this.contEl.getBoundingClientRect().bottom + window.pageYOffset;\r\n\r\n            this.build();\r\n            \r\n            this.mMove = this.move.bind(this);\r\n\r\n            document.addEventListener('mousemove', this.mMove);\r\n        },\r\n\r\n        move: function (e) {\r\n            this.zoomEl.style.left = (e.pageX - 131) + 'px';\r\n            this.zoomEl.style.top = (e.pageY - 131) + 'px';\r\n\r\n            const sX = (e.pageX - this.contPos.X) * 2 - 131,\r\n            sY = (e.pageY - this.contPos.Y) * 2 - 131;\r\n\r\n            this.zoomInnerEl.style.left = -sX + 'px';\r\n            this.zoomInnerEl.style.top = -sY + 'px';\r\n\r\n            if (\r\n                e.pageX < this.contPos.X || e.pageY < this.contPos.Y ||\r\n                e.pageX > this.contPos.X2 || e.pageY > this.contPos.Y2\r\n            ) {\r\n                this.end();\r\n            }\r\n        },\r\n\r\n        end: function () {\r\n            this.zoomEl.style.display = 'none';\r\n            this.zoomEl.innerHTML = '';\r\n\r\n            document.removeEventListener('mousemove', this.mMove);\r\n            document.addEventListener('mouseover', this.mOver);\r\n        },\r\n\r\n        init: function (contSel) {\r\n            this.contSel = contSel;\r\n            this.mOver = this.start.bind(this);\r\n\r\n            document.addEventListener('mouseover', this.mOver);\r\n\r\n            this.zoomEl = document.createElement('div');\r\n            this.zoomEl.className = 'zoom';\r\n            document.body.appendChild(this.zoomEl);\r\n        }\r\n    };\r\n})();\r\n","var Cursor;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    Cursor = {\r\n        elObj: null,\r\n        cursorEl: null,\r\n        mOver: null,\r\n        mMove: null,\r\n        mOut: null,\r\n        opt: null,\r\n\r\n        init: function (options) {\r\n            this.opt = options;\r\n\r\n            this.mOver = this.start.bind(this);\r\n\r\n            document.addEventListener('mouseover', this.mOver);\r\n\r\n            const cursWrap = document.createElement('div');\r\n            cursWrap.className = 'cursor-wrap';\r\n\r\n            document.body.appendChild(cursWrap);\r\n\r\n            this.cursorEl = document.createElement('div');\r\n            this.cursorEl.className = 'cursor';\r\n\r\n            cursWrap.appendChild(this.cursorEl);\r\n        },\r\n\r\n        start: function (e) {\r\n            let el;\r\n\r\n            for (const it of this.opt) {\r\n                el = e.target.closest(it.selector);\r\n\r\n                if (el) {\r\n                    this.elObj = { el, cursCl: it.class };\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!el) return;\r\n\r\n            if (this.elObj.cursCl) {\r\n                this.cursorEl.setAttribute('data-class', this.elObj.cursCl);\r\n            } else {\r\n                this.cursorEl.removeAttribute('data-class');\r\n            }\r\n\r\n            this.cursorEl.classList.add('cursor_visible');\r\n\r\n            this.mMove = this.move.bind(this);\r\n            document.addEventListener('mousemove', this.mMove);\r\n\r\n            this.mOut = this.end.bind(this);\r\n            document.addEventListener('mouseout', this.mOut);\r\n        },\r\n\r\n        move: function (e) {\r\n            const x = e.clientX - this.cursorEl.offsetWidth / 2,\r\n                y = e.clientY - this.cursorEl.offsetHeight / 2;\r\n\r\n            this.cursorEl.style.transform = 'translate(' + x + 'px,' + y + 'px)';\r\n        },\r\n\r\n        end: function () {\r\n            this.cursorEl.classList.remove('cursor_visible');\r\n\r\n            document.removeEventListener('mousemove', this.mMove);\r\n            document.removeEventListener('mouseout', this.mOut);\r\n        }\r\n    };\r\n})();","var SPA;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    SPA = function (opt) {\r\n        this.opt = opt || {};\r\n        this.routeSubscribers = [];\r\n\r\n        this.route = function (path, fun) {\r\n            if (typeof fun === 'function') {\r\n                this.routeSubscribers.push({ path, fun });\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        this.changeTemplate = function () {\r\n            const hash = window.location.hash;\r\n\r\n            let fun, matches;\r\n\r\n            for (const item of this.routeSubscribers) {\r\n                if (!hash && !item.path) {\r\n                    fun = item.fun;\r\n                    break;\r\n\r\n                } else if (hash && item.path) {\r\n                    matches = hash.match(new RegExp(item.path));\r\n\r\n                    if (matches) {\r\n                        fun = item.fun;\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!fun) return;\r\n\r\n            fun(matches, (data, cb) => {\r\n                const contEl = document.getElementById(data.container),\r\n                    tplEl = document.getElementById(data.template);\r\n\r\n                if (!contEl || !tplEl) return;\r\n\r\n                contEl.innerHTML = template(data, tplEl.innerHTML, this.opt.tplSign);\r\n\r\n                if (cb) cb();\r\n            });\r\n        }\r\n\r\n        window.addEventListener('popstate', () => {\r\n            // if (link) return;\r\n\r\n            setTimeout(() => {\r\n                this.changeTemplate();\r\n            }, 121);\r\n        });\r\n\r\n        this.changeTemplate();\r\n    }\r\n\r\n    // SPA = {\r\n    //     opt: null,\r\n    //     routeSubscribers: [],\r\n\r\n    //     init: function (opt) {\r\n    //         this.opt = opt || {};\r\n\r\n    //         // let link;\r\n\r\n    //         // document.addEventListener('click', (e) => {\r\n    //         //     link = e.target.closest(this.opt.link);\r\n\r\n    //         //     if (link) {\r\n    //         //         setTimeout(() => {\r\n    //         //             this.changeTemplate();\r\n    //         //             link = null;\r\n    //         //         }, 121);\r\n    //         //     }\r\n    //         // });\r\n\r\n    //         window.addEventListener('popstate', () => {\r\n    //             // if (link) return;\r\n\r\n    //             setTimeout(() => {\r\n    //                 this.changeTemplate();\r\n    //             }, 121);\r\n    //         });\r\n\r\n    //         this.changeTemplate();\r\n    //     },\r\n\r\n    //     route: function (path, fun) {\r\n    //         if (typeof fun === 'function') {\r\n    //             this.routeSubscribers.push({ path, fun });\r\n    //         }\r\n\r\n    //         return this;\r\n    //     },\r\n\r\n    //     changeTemplate: function () {\r\n    //         const hash = window.location.hash;\r\n\r\n    //         let fun, matches;\r\n\r\n    //         for (const item of this.routeSubscribers) {\r\n    //             if (!hash && !item.path) {\r\n    //                 fun = item.fun;\r\n    //                 break;\r\n\r\n    //             } else if (hash && item.path) {\r\n    //                 matches = hash.match(new RegExp(item.path));\r\n\r\n    //                 if (matches) {\r\n    //                     fun = item.fun;\r\n\r\n    //                     break;\r\n    //                 }\r\n    //             }\r\n    //         }\r\n\r\n    //         if (!fun) return;\r\n\r\n    //         fun(matches, (data, cb) => {\r\n    //             const contEl = document.getElementById(data.container),\r\n    //                 tplEl = document.getElementById(data.template);\r\n\r\n    //             if (!contEl || !tplEl) return;\r\n\r\n    //             contEl.innerHTML = template(data, tplEl.innerHTML, this.opt.tplSign);\r\n\r\n    //             if (cb) cb();\r\n    //         });\r\n    //     }\r\n    // };\r\n\r\n})();","var DragAndDrop;\r\n/* \r\nDragAndDrop.onDragged(function () {\r\n    // code\r\n});\r\n*/\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    DragAndDrop = {\r\n        opt: null,\r\n        dragElemObj: {},\r\n        parentDropElem: null,\r\n        curentDropElem: null,\r\n        maskDiv: null,\r\n        lastInsertPos: '',\r\n        onDragSubscribers: [],\r\n\r\n        init: function (opt) {\r\n            this.opt = opt || {};\r\n\r\n            document.removeEventListener('mousedown', this.mD);\r\n\r\n            this.mD = this.mD.bind(this);\r\n\r\n            document.addEventListener('mousedown', this.mD);\r\n\r\n            this.setInd();\r\n        },\r\n\r\n        setInd: function () {\r\n            const dropEls = document.querySelectorAll('.dropable');\r\n\r\n            for (let i = 0; i < dropEls.length; i++) {\r\n                const dropEl = dropEls[i];\r\n\r\n                const dragEls = dropEl.querySelectorAll('.dragable');\r\n\r\n                for (let i = 0; i < dragEls.length; i++) {\r\n                    const dragEl = dragEls[i];\r\n\r\n                    dragEl.setAttribute('data-index', i);\r\n                }\r\n            }\r\n        },\r\n\r\n        mD: function (e) {\r\n            if (e.type == 'mousedown' && e.which != 1) return;\r\n\r\n            const dragEl = e.target.closest('.dragable');\r\n\r\n            if (!dragEl) return;\r\n\r\n            this.mM = this.mM.bind(this);\r\n            this.mU = this.mU.bind(this);\r\n\r\n            document.addEventListener('mousemove', this.mM);\r\n            document.addEventListener('mouseup', this.mU);\r\n\r\n            const clientX = (e.type == 'touchstart') ? e.targetTouches[0].clientX : e.clientX,\r\n                clientY = (e.type == 'touchstart') ? e.targetTouches[0].clientY : e.clientY;\r\n\r\n            // dragable options \r\n            this.dragElemObj.elem = dragEl;\r\n            this.dragElemObj.X = dragEl.getBoundingClientRect().left;\r\n            this.dragElemObj.Y = dragEl.getBoundingClientRect().top;\r\n            this.dragElemObj.shiftX = clientX - this.dragElemObj.X;\r\n            this.dragElemObj.shiftY = clientY - this.dragElemObj.Y;\r\n            this.dragElemObj.width = dragEl.offsetWidth;\r\n            this.dragElemObj.height = dragEl.offsetHeight;\r\n\r\n            dragEl.style.width = this.dragElemObj.width + 'px';\r\n            dragEl.style.height = this.dragElemObj.height + 'px';\r\n            dragEl.style.left = this.dragElemObj.X + 'px';\r\n            dragEl.style.top = this.dragElemObj.Y + 'px';\r\n\r\n            dragEl.classList.add('dragable_active');\r\n\r\n            this.parentDropElem = dragEl.closest('.dropable');\r\n\r\n            this.maskDiv = document.createElement('div');\r\n\r\n            this.maskDiv.className = 'dropable__mask';\r\n            this.maskDiv.style.height = this.dragElemObj.height + 'px';\r\n\r\n            this.dragElemObj.elem.after(this.maskDiv);\r\n        },\r\n\r\n        mM: function (e) {\r\n            const clientX = (e.type == 'touchmove') ? e.targetTouches[0].clientX : e.clientX,\r\n                clientY = (e.type == 'touchstart') ? e.targetTouches[0].clientY : e.clientY;\r\n\r\n            const moveX = clientX - this.dragElemObj.shiftX,\r\n                moveY = clientY - this.dragElemObj.shiftY;\r\n\r\n            this.dragElemObj.elem.style.left = moveX + 'px';\r\n            this.dragElemObj.elem.style.top = moveY + 'px';\r\n\r\n            const dropEl = e.target.closest('.dropable');\r\n\r\n            if (dropEl && dropEl !== this.curentDropElem) {\r\n                this.curentDropElem = dropEl;\r\n\r\n                dropEl.querySelector('.dropable__inner').prepend(this.maskDiv);\r\n\r\n                this.lastInsertPos = '';\r\n            }\r\n\r\n            const siblingDragEl = e.target.closest('.dragable');\r\n\r\n            if (siblingDragEl) {\r\n                const siblingDragElCenter = siblingDragEl.getBoundingClientRect().top + (siblingDragEl.offsetHeight / 2);\r\n\r\n                if (clientY >= siblingDragElCenter) {\r\n                    if (this.maskDiv && this.lastInsertPos != 'after') {\r\n                        this.lastInsertPos = 'after'\r\n                        siblingDragEl.after(this.maskDiv);\r\n                    }\r\n\r\n                } else {\r\n                    if (this.maskDiv && this.lastInsertPos != 'before') {\r\n                        this.lastInsertPos = 'before';\r\n                        siblingDragEl.before(this.maskDiv);\r\n                    }\r\n                }\r\n\r\n            }\r\n        },\r\n\r\n        mU: function () {\r\n            document.removeEventListener('mousemove', this.mM);\r\n\r\n            if (this.dragElemObj.elem && this.maskDiv) {\r\n                this.dragElemObj.elem.classList.remove('dragable_active');\r\n\r\n                this.dragElemObj.elem.style = '';\r\n\r\n                this.maskDiv.replaceWith(this.dragElemObj.elem);\r\n\r\n                this.setInd();\r\n\r\n                this.onDragSubscribers.forEach(function (fun) {\r\n                    fun();\r\n                });\r\n            }\r\n\r\n            this.dragElemObj = {};\r\n            this.maskDiv = null;\r\n            this.curentDropElem = null;\r\n        },\r\n\r\n        onDragged: function (fun) {\r\n            if (typeof fun === 'function') {\r\n                this.onDragSubscribers.push(fun);\r\n            }\r\n        }\r\n    };\r\n})();"]}